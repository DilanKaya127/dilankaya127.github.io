<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Rails ile BaÅŸlarken - Rails DokÃ¼mantasyonu - TÃ¼rkÃ§e
    </title>
    <link
      rel="stylesheet"
      href="/assets/css/rails.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css"
    />

    <link
      rel="icon"
      type="image/svg"
      href="/assets/images/rails/logo_rails-circle.svg"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-Y6Q8S53SSQ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-Y6Q8S53SSQ");
    </script>
  </head>
  <body>
    <header class="header">
      <div class="container">
        <div class="header-content">
          <h1 class="logo">
            <a href="/rails/">
              <img
                src="/assets/images/rails/logo_rails-circle.svg"
                alt="Rails Logo"
                class="logo-image"
              />
            </a>
          </h1>
          <nav class="nav">
            <a href="/">Ana Sayfa</a>
            <!-- <a href="https://dilankaya127.github.io">PortfÃ¶y</a> -->

            <div class="dropdown">
              <a class="dropbtn">KÄ±lavuzlar</a>
              <div class="dropdown-content multi-column">
                 
                <div class="dropdown-column">
                  <h4>Buradan BaÅŸlayÄ±n</h4>
                  
                  <a href="/rails/guides/getting_started">Rails ile BaÅŸlarken</a>
                  
                  <a href="/rails/guides/install_ruby_on_rails">Ruby on Rails Ä°ndirme KÄ±lavuzu</a>
                  
                </div>
                  
                <div class="dropdown-column">
                  <h4>Model</h4>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Record Temelleri</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Record Migration</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Record DoÄŸrulamalarÄ±</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Record Callback</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Record Ä°liÅŸkileri</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Record Sorgu ArayÃ¼zÃ¼</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Model Temelleri</a>
                  
                </div>
                  
                <div class="dropdown-column">
                  <h4>View</h4>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Action View Overview</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Layout ve Rendering</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Action View Helper</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Action View Form Helper</a>
                  
                </div>
                  
                <div class="dropdown-column">
                  <h4>Controller</h4>
                  
                  <a href="/rails/guides/action_controller_overview">Action Controller</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Action Controller Ä°leri Konular</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">DÄ±ÅŸarÄ±dan Ä°Ã§eriye Routing</a>
                  
                </div>
                  
                <div class="dropdown-column">
                  <h4>DiÄŸer BileÅŸenler</h4>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Support Core UzantÄ±lar</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Action Mailer Temelleri</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Action Mailbox Temelleri</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Action Text</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Job Temelleri</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Storage</a>
                  
                  <a href="/rails/guides/action_cable_overview">Action Cable</a>
                  
                </div>
                  
                <div class="dropdown-column">
                  <h4>Daha Derin Konular</h4>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails UluslararasÄ±laÅŸtÄ±rma API</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails UygulamalarÄ±nÄ± Test Etme</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails UygulamalarÄ±nda Hata AyÄ±klama</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails UygulamalarÄ±nÄ± YapÄ±landÄ±rma</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails Komut SatÄ±rÄ±</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Asset Pipeline</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails'te JavaScript ile Ã‡alÄ±ÅŸma</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails BaÅŸlatma SÃ¼reci</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Otomatik YÃ¼kleme ve Yeniden YÃ¼kleme</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Support Instrumentation</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">API Ã–zel Uygulamalar iÃ§in Rails KullanÄ±mÄ±</a>
                  
                </div>
                  
                <div class="dropdown-column">
                  <h4>ÃœrÃ¼n Ã‡Ä±karmak</h4>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">DaÄŸÄ±tÄ±m iÃ§in Performans Ayarlama</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails ile Ã–nbelleÄŸe Alma: Genel BakÄ±ÅŸ</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails UygulamalarÄ±nÄ±n GÃ¼venliÄŸini SaÄŸlama</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails UygulamalarÄ±nda Hata Bildirim</a>
                  
                </div>
                  
                <div class="dropdown-column">
                  <h4>Ä°leri Seviye Active Record</h4>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Record ve PostgreSQL</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Ã‡oklu VeritabanÄ±</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Active Record Åifreleme</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">BileÅŸik Birincil Anahtarlar</a>
                  
                </div>
                  
                <div class="dropdown-column">
                  <h4>Rails UygulamalarÄ±nÄ± BÃ¼yÃ¼telim</h4>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails Eklentileri OluÅŸturmanÄ±n Temelleri</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rack'te Rails</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails Generator ve ÅablonlarÄ± OluÅŸturma ve Ã–zelleÅŸtirme</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Engine ile Ã‡alÄ±ÅŸmaya BaÅŸlarken</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails Uygulama ÅablonlarÄ±</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails'te Ä°ÅŸ ParÃ§acÄ±ÄŸÄ± OluÅŸturma ve Kod YÃ¼rÃ¼tme</a>
                  
                </div>
                  
                <div class="dropdown-column">
                  <h4>KatkÄ±da Bulunun</h4>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Ruby on Rails'e KatkÄ±da Bulunma</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">API DokÃ¼mantasyon YÃ¶nergeleri</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">KÄ±lavuz YÃ¶nergeleri</a>
                  
                  <a href="/rails/guides/missing_pages/currently_being_worked">Rails Core GeliÅŸtirme BaÄŸÄ±mlÄ±lÄ±klarÄ±nÄ± YÃ¼kleme</a>
                  
                </div>
                     
              </div>
            </div>
            <a href="https://github.com/dilankaya127/rails-tr-TR">GitHub</a>
          </nav>
        </div>
      </div>
    </header>

    <main class="main">
      <div class="container">
        <div class="guide-container">
  <button id="toc-toggle" class="toc-toggle">â˜° Ä°Ã§indekiler</button>

  <aside class="guide-sidebar">
    <div class="guide-toc">
      <div id="toc"></div>
      <button class="toc-close" aria-label="Ä°Ã§indekileri Kapat">âœ•</button>
    </div>
  </aside>

  <article class="guide-content">
    <div class="guide-body"><p><strong>RESMÄ° KILAVUZA BU ADRES ÃœZERÄ°NDEN ULAÅABÄ°LÄ°RSÄ°NÄ°Z: <a href="https://guides.rubyonrails.org">https://guides.rubyonrails.org</a></strong></p>

<hr />

<h1 id="rails-ile-baÅŸlarken">Rails ile BaÅŸlarken</h1>

<p>Bu kÄ±lavuz Ruby on Railsâ€™i nasÄ±l kurup Ã§alÄ±ÅŸtÄ±racaÄŸÄ±nÄ±zÄ± anlatmaktadÄ±r.</p>

<p>Bu kÄ±lavuzu okuduktan sonra ÅŸunlarÄ± Ã¶ÄŸreneceksiniz:</p>

<ul>
  <li>Railsâ€™i nasÄ±l kuracaÄŸÄ±nÄ±zÄ±, yeni bir Rails uygulamasÄ± nasÄ±l oluÅŸturacaÄŸÄ±nÄ±zÄ± ve uygulamanÄ±zÄ± bir veritabanÄ±na nasÄ±l baÄŸlayacaÄŸÄ±nÄ±zÄ±</li>
  <li>Rails uygulamasÄ±nÄ±n genel yapÄ±sÄ±nÄ±</li>
  <li>MVC (Model, View, Controller) ve RESTful tasarÄ±mÄ±nÄ±n temel ilkelerini</li>
  <li>Rails uygulamasÄ±nÄ±n baÅŸlangÄ±Ã§ parÃ§alarÄ±nÄ± hÄ±zlÄ± bir ÅŸekilde nasÄ±l oluÅŸturacaÄŸÄ±nÄ±zÄ±</li>
  <li>Kamal kullanarak uygulamanÄ±zÄ± Ã¼retim ortamÄ±na nasÄ±l daÄŸÄ±tacaÄŸÄ±nÄ±zÄ± (deploy edeceÄŸinizi)</li>
</ul>

<h2 id="giriÅŸ">GiriÅŸ</h2>

<p>Ruby on Railsâ€™e hoÅŸ geldiniz! Bu kÄ±lavuzda, Rails ile web uygulamalarÄ± geliÅŸtirmenin temel konularÄ±nÄ± ele alacaÄŸÄ±z. Bu kÄ±lavuzu takip etmek iÃ§in Railsâ€™te herhangi bir deneyime ihtiyacÄ±nÄ±z yok.</p>

<p>Rails, Ruby programlama dili iÃ§in geliÅŸtirilmiÅŸ bir web frameworkâ€™Ã¼dÃ¼r. Rails, Rubyâ€™nin birÃ§ok Ã¶zelliÄŸinin avantajÄ±nÄ± barÄ±ndÄ±rmaktadÄ±r, bu yÃ¼zden sizlere Rubyâ€™nin temellerini Ã¶ÄŸrenmenizi <em>ÅŸiddetle</em> Ã¶neririz. BÃ¶ylece bu kÄ±lavuzda karÅŸÄ±lacaÄŸÄ±nÄ±z bazÄ± temel terimleri ve kelimeleri anlÄ±yor olacaksÄ±nÄ±z.</p>

<ul>
  <li><a href="https://www.ruby-lang.org/en/documentation/">Resmi Ruby Websitesi</a></li>
  <li><a href="https://github.com/EbookFoundation/free-programming-books/blob/main/books/free-programming-books-langs.md#ruby">Ãœcretsiz Programlama KitaplarÄ±nÄ± Ä°Ã§eren Liste</a></li>
</ul>

<h2 id="railsin-felsefesi">Railsâ€™in Felsefesi</h2>

<p>Rails, Ruby programlama dilinde yazÄ±lmÄ±ÅŸ bir web uygulamasÄ± geliÅŸtirme frameworkâ€™Ã¼dÃ¼r. Her geliÅŸtiricinin baÅŸlangÄ±Ã§ iÃ§in ihtiyaÃ§ duyduÄŸu ÅŸeyleri varsayarak web uygulamalarÄ±nÄ± programlamayÄ± kolaylaÅŸtÄ±rmak iÃ§in tasarlanmÄ±ÅŸtÄ±r. DiÄŸer birÃ§ok dil ve frameworkâ€™e gÃ¶re daha az kod yazarak daha fazlasÄ±nÄ± baÅŸarmanÄ±zÄ± saÄŸlar. Deneyimli Rails geliÅŸtiricileri, web uygulamasÄ± geliÅŸtirmeyi daha eÄŸlenceli hale getirdiÄŸini de belirtmektedir.</p>

<p>Rails, inatÃ§Ä± bir yazÄ±lÄ±mdÄ±r. Ä°ÅŸleri yapmanÄ±n â€œen iyiâ€ bir yolu olduÄŸu varsayÄ±mÄ±ndan hareket eder ve bu yolu teÅŸvik etmek iÃ§in tasarlanmÄ±ÅŸtÄ±r -ve bazÄ± durumlarda alternatiflerden caydÄ±rÄ±r-. â€œRails YÃ¶ntemiâ€ni Ã¶ÄŸrenirseniz, muhtemelen Ã¼retkenliÄŸinizde muazzam bir artÄ±ÅŸ gÃ¶receksiniz. DiÄŸer dillerden edindiÄŸiniz eski alÄ±ÅŸkanlÄ±klarÄ± Rails geliÅŸtirirken Ä±srarla sÃ¼rdÃ¼rÃ¼r ve baÅŸka yerlerde Ã¶ÄŸrendiÄŸiniz kalÄ±plarÄ± kullanmaya Ã§alÄ±ÅŸÄ±rsanÄ±z, daha az mutlu bir deneyim yaÅŸayabilirsiniz.</p>

<p>Rails felsefesi iki ana kÄ±lavuz ilke iÃ§erir:</p>

<ul>
  <li><strong>Kendini Tekrar Etme:</strong> DRY (Donâ€™t Repeat Yourself), yazÄ±lÄ±m geliÅŸtirmenin bir ilkesidir ve â€œHer bilgi parÃ§asÄ±; sistem iÃ§inde tek, aÃ§Ä±k ve kesin bir ÅŸekilde temsil edilmelidirâ€ der. AynÄ± bilgiyi tekrar tekrar yazmayarak kodumuz daha kolay bakÄ±mÄ± yapÄ±labilir, daha geniÅŸletilebilir ve daha az hata iÃ§erir hale gelir.</li>
  <li><strong>YapÄ±landÄ±rma Ãœzerine Kurallar:</strong> Rails, bir web uygulamasÄ±nda birÃ§ok ÅŸeyin en iyi ÅŸekilde nasÄ±l yapÄ±lacaÄŸÄ±na dair fikirlere sahiptir ve bunlarÄ± sonsuz yapÄ±landÄ±rma dosyalarÄ± aracÄ±lÄ±ÄŸÄ±yla kendiniz tanÄ±mlamanÄ±zÄ± gerektirmek yerine, varsayÄ±lan olarak bu kurallar kÃ¼mesini kullanÄ±r.</li>
</ul>

<h2 id="yeni-bir-rails-uygulamasÄ±-geliÅŸtirme">Yeni Bir Rails UygulamasÄ± GeliÅŸtirme</h2>

<p><code class="language-plaintext highlighter-rouge">store</code> adÄ±nda bir proje geliÅŸtireceÄŸiz, Railsâ€™in yerleÅŸik Ã¶zelliklerinden birkaÃ§Ä±nÄ± gÃ¶steren basit bir e-ticaret sitesi olacak.</p>

<div class="guide-alert guide-alert-info">
  <div class="guide-alert-icon">ğŸ’¡</div>
  <div class="guide-alert-content">
    Dolar iÅŸareti <code>$</code> ile baÅŸlayan tÃ¼m komutlar terminalde Ã§alÄ±ÅŸtÄ±rÄ±lmalÄ±dÄ±r.
  </div>
</div>

<h3 id="Ã¶n-koÅŸullar">Ã–n KoÅŸullar</h3>

<p>Bu proje iÃ§in ÅŸunlar gerekli:</p>

<ul>
  <li>Ruby 3.2 veya daha Ã¼st sÃ¼rÃ¼mÃ¼</li>
  <li>Rails 8.1.0 veya daha Ã¼st sÃ¼rÃ¼mÃ¼</li>
  <li>Bir kod editÃ¶rÃ¼</li>
</ul>

<p>Ruby ve/veya Railsâ€™i indirmeniz gerekiyorsa, bu tutorialÄ± takip edin: <a href="../install_ruby_on_rails/">Ruby on Rails Ä°ndirme KÄ±lavuzu</a></p>

<p>Railsâ€™in doÄŸru sÃ¼rÃ¼mÃ¼nÃ¼n yÃ¼klÃ¼ olduÄŸunu doÄŸrulayalÄ±m. Mevcut sÃ¼rÃ¼mÃ¼ gÃ¶rÃ¼ntÃ¼lemek iÃ§in bir terminal aÃ§Ä±n ve aÅŸaÄŸÄ±dakileri Ã§alÄ±ÅŸtÄ±rÄ±n. Bir sÃ¼rÃ¼m numarasÄ± gÃ¶rmelisiniz:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails <span class="nt">--version</span>
Rails 8.1.0
</code></pre></div></div>

<p>Rails 8.1.0 veya daha yÃ¼ksek bir sÃ¼rÃ¼m olmalÄ±.</p>

<h3 id="iÌ‡lk-rails-uygulamanÄ±zÄ±-oluÅŸturma">Ä°lk Rails UygulamanÄ±zÄ± OluÅŸturma</h3>

<p>Rails, hayatÄ±nÄ±zÄ± kolaylaÅŸtÄ±rmak iÃ§in Ã§eÅŸitli komutlar sunar. TÃ¼m komutlarÄ± gÃ¶rmek iÃ§in <code class="language-plaintext highlighter-rouge">rails --help</code> komutunu Ã§alÄ±ÅŸtÄ±rÄ±n.</p>

<p><code class="language-plaintext highlighter-rouge">rails new</code> komutu, yeni bir Rails uygulamasÄ±nÄ±n temelini oluÅŸturur, bu yÃ¼zden buradan baÅŸlayalÄ±m.</p>

<p><code class="language-plaintext highlighter-rouge">store</code> uygulamamÄ±zÄ± oluÅŸturmak iÃ§in terminalinizde aÅŸaÄŸÄ±daki komutu Ã§alÄ±ÅŸtÄ±rÄ±n:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails new store
</code></pre></div></div>

<div class="guide-alert guide-alert-warning">
  <div class="guide-alert-icon">ğŸ“</div>
  <div class="guide-alert-content">
    Rails'in oluÅŸturduÄŸu uygulamayÄ± flag kullanarak Ã¶zelleÅŸtirebilirsiniz.
Bu seÃ§enekleri gÃ¶rmek iÃ§in <code>rails new --help</code> komutunu Ã§alÄ±ÅŸtÄ±rÄ±n.
  </div>
</div>

<p>Yeni uygulamanÄ±z oluÅŸturulduktan sonra, uygulama dizinine geÃ§in:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>store
</code></pre></div></div>

<h3 id="dizin-yapÄ±sÄ±">Dizin YapÄ±sÄ±</h3>

<p>Yeni bir Rails uygulamasÄ±nda yer alan dosya ve dizinlere hÄ±zlÄ±ca bir gÃ¶z atalÄ±m. DosyalarÄ± ve dizinleri gÃ¶rmek iÃ§in bu klasÃ¶rÃ¼ kod editÃ¶rÃ¼nÃ¼zde aÃ§abilir veya terminalinizde <code class="language-plaintext highlighter-rouge">ls -la</code> komutunu Ã§alÄ±ÅŸtÄ±rabilirsiniz.</p>

<table>
  <thead>
    <tr>
      <th>Dosya/KlasÃ¶r</th>
      <th>AmacÄ±</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>app/</td>
      <td>UygulamanÄ±z iÃ§in controllers, models, views, helpers, mailer, jobs ve assets iÃ§erir. <strong>Bu kÄ±lavuzun geri kalanÄ±nda Ã§oÄŸunlukla bu klasÃ¶re odaklanacaksÄ±nÄ±z.</strong></td>
    </tr>
    <tr>
      <td>bin/</td>
      <td>UygulamanÄ±zÄ± baÅŸlatan <code class="language-plaintext highlighter-rouge">rails</code> betiÄŸini (scriptini) iÃ§erir ve uygulamanÄ±zÄ± kurmak, gÃ¼ncellemek, daÄŸÄ±tmak veya Ã§alÄ±ÅŸtÄ±rmak iÃ§in kullandÄ±ÄŸÄ±nÄ±z diÄŸer betikleri de iÃ§erebilir.</td>
    </tr>
    <tr>
      <td>config/</td>
      <td>UygulamanÄ±zÄ±n yÃ¶nlendirmeleri (route), veritabanÄ± ve daha fazlasÄ± iÃ§in yapÄ±landÄ±rma iÃ§erir. Bu konu <a href="../configuring/">Rails UygulamalarÄ±nÄ±n YapÄ±landÄ±rÄ±lmasÄ±</a> bÃ¶lÃ¼mÃ¼nde daha ayrÄ±ntÄ±lÄ± olarak ele alÄ±nmÄ±ÅŸtÄ±r.</td>
    </tr>
    <tr>
      <td>db/</td>
      <td>Mevcut veritabanÄ± ÅŸemanÄ±zÄ±n yanÄ± sÄ±ra veritabanÄ± deÄŸiÅŸikliklerini (migrations) de iÃ§erir.</td>
    </tr>
    <tr>
      <td>Dockerfile</td>
      <td>Docker iÃ§in yapÄ±landÄ±rma dosyasÄ±dÄ±r.</td>
    </tr>
    <tr>
      <td>Gemfile<br />Gemfile.lock</td>
      <td>Bu dosyalar, Rails uygulamanÄ±z iÃ§in hangi gem baÄŸÄ±mlÄ±lÄ±klarÄ±nÄ±n gerekli olduÄŸunu belirtmenizi saÄŸlar. Bu dosyalar <a href="https://bundler.io">Bundler</a> gemâ€™i tarafÄ±ndan kullanÄ±lÄ±r.</td>
    </tr>
    <tr>
      <td>lib/</td>
      <td>UygulamanÄ±z iÃ§in geniÅŸletilmiÅŸ modÃ¼ller.</td>
    </tr>
    <tr>
      <td>log/</td>
      <td>Uygulama log dosyalarÄ±.</td>
    </tr>
    <tr>
      <td>public/</td>
      <td>Statik dosyalarÄ± ve derlenmiÅŸ assetleri iÃ§erir. UygulamanÄ±z Ã§alÄ±ÅŸÄ±rken, bu dizin olduÄŸu gibi gÃ¶sterilecektir.</td>
    </tr>
    <tr>
      <td>Rakefile</td>
      <td>Bu dosya komut satÄ±rÄ±ndan Ã§alÄ±ÅŸtÄ±rÄ±labilecek gÃ¶revleri bulur ve yÃ¼kler. GÃ¶rev tanÄ±mlarÄ± Railsâ€™in bileÅŸenleri boyunca tanÄ±mlanmÄ±ÅŸtÄ±r. <code class="language-plaintext highlighter-rouge">Rakefile</code>â€˜Ä± deÄŸiÅŸtirmek yerine, uygulamanÄ±zÄ±n <code class="language-plaintext highlighter-rouge">lib/tasks</code> dizinine dosyalar ekleyerek kendi gÃ¶revlerinizi eklemelisiniz.</td>
    </tr>
    <tr>
      <td>README.md</td>
      <td>Bu, uygulamanÄ±z iÃ§in kÄ±sa bir kullanÄ±m kÄ±lavuzudur. UygulamanÄ±zÄ±n ne yaptÄ±ÄŸÄ±nÄ±, nasÄ±l kurulacaÄŸÄ±nÄ± vb. baÅŸkalarÄ±na anlatmak iÃ§in bu dosyayÄ± dÃ¼zenlemelisiniz.</td>
    </tr>
    <tr>
      <td>script/</td>
      <td>Tek seferlik veya genel amaÃ§lÄ± <a href="https://github.com/rails/rails/blob/main/railties/lib/rails/generators/rails/script/USAGE">script</a> ve <a href="https://github.com/rails/rails/blob/main/railties/lib/rails/generators/rails/benchmark/USAGE">benchmark</a>  iÃ§erir.</td>
    </tr>
    <tr>
      <td>storage/</td>
      <td>Disk Hizmeti (Disk Service) iÃ§in SQLite veritabanlarÄ±nÄ± ve Active Storage dosyalarÄ±nÄ± iÃ§erir. Bu konu <a href="../active_storage_overview/">Active Storage</a> bÃ¶lÃ¼mÃ¼nde ele alÄ±nmÄ±ÅŸtÄ±r.</td>
    </tr>
    <tr>
      <td>test/</td>
      <td>Birim testleri (unit test), fikstÃ¼rler ve diÄŸer test aparatlarÄ±. Bunlar <a href="../testing/">Rails UygulamalarÄ±nÄ± Test Etme</a> bÃ¶lÃ¼mÃ¼nde ele alÄ±nmÄ±ÅŸtÄ±r.</td>
    </tr>
    <tr>
      <td>tmp/</td>
      <td>GeÃ§ici dosyalar (Ã¶nbellek ve pid dosyalarÄ± gibi).</td>
    </tr>
    <tr>
      <td>vendor/</td>
      <td>TÃ¼m Ã¼Ã§Ã¼ncÃ¼ taraf kodlarÄ± iÃ§in bir alan. Tipik bir Rails uygulamasÄ±nda bu, Ã¼Ã§Ã¼ncÃ¼ taraf kodlar arasÄ±nda Ã¶zel olarak eklenen (vendored) gemâ€™ler iÃ§erir.</td>
    </tr>
    <tr>
      <td>.dockerignore</td>
      <td>Bu dosya Dockerâ€™a hangi dosyalarÄ± konteynere kopyalamamasÄ± gerektiÄŸini sÃ¶yler.</td>
    </tr>
    <tr>
      <td>.gitattributes</td>
      <td>Bu dosya, bir Git deposundaki belirli yollar iÃ§in meta verileri tanÄ±mlar. Bu meta veriler Git ve diÄŸer araÃ§lar tarafÄ±ndan davranÄ±ÅŸlarÄ±nÄ± geliÅŸtirmek iÃ§in kullanÄ±labilir. Daha fazla bilgi iÃ§in <a href="https://git-scm.com/docs/gitattributes">gitattributes belgelerine</a> bakÄ±n.</td>
    </tr>
    <tr>
      <td>.git/</td>
      <td>Git deposu dosyalarÄ±nÄ± iÃ§erir.</td>
    </tr>
    <tr>
      <td>.github/</td>
      <td>GitHubâ€™a Ã¶zgÃ¼ dosyalarÄ± iÃ§erir.</td>
    </tr>
    <tr>
      <td>.gitignore</td>
      <td>Bu dosya Gitâ€™e hangi dosyalarÄ± veya kalÄ±plarÄ± (pattern) yok saymasÄ± gerektiÄŸini sÃ¶yler. DosyalarÄ± yok sayma hakkÄ±nda daha fazla bilgi iÃ§in <a href="https://help.github.com/articles/ignoring-files">GitHub - Ignoring files</a> adresine bakÄ±n.</td>
    </tr>
    <tr>
      <td>.kamal/</td>
      <td>Kamalâ€™Ä±n gizli/Ã¶nemli verilerini ve daÄŸÄ±tÄ±m betiklerini (hook) iÃ§erir.</td>
    </tr>
    <tr>
      <td>.rubocop.yml</td>
      <td>Bu dosya RuboCop iÃ§in yapÄ±landÄ±rmayÄ± iÃ§erir.</td>
    </tr>
    <tr>
      <td>.ruby-version</td>
      <td>Bu dosya varsayÄ±lan Ruby sÃ¼rÃ¼mÃ¼nÃ¼ iÃ§erir.</td>
    </tr>
  </tbody>
</table>

<h3 id="model-view-controller-temelleri">Model-View-Controller Temelleri</h3>

<p>Rails kodu Model-View-Controller (MVC) mimarisi kullanÄ±larak dÃ¼zenlenmiÅŸtir. MVC ile, kodlarÄ±mÄ±zÄ±n Ã§oÄŸunun iÃ§inde Ã§alÄ±ÅŸtÄ±ÄŸÄ± Ã¼Ã§ ana yapÄ± vardÄ±r:</p>

<ul>
  <li>Model - UygulamanÄ±zdaki verileri yÃ¶netir. Tipik olarak, veritabanÄ± tablolarÄ±nÄ±zdÄ±r.</li>
  <li>View - YanÄ±tlarÄ± (response) HTML, JSON, XML gibi farklÄ± biÃ§imlerde gÃ¶stermeyi (render) yÃ¶netir.</li>
  <li>Controller - Her istek iÃ§in kullanÄ±cÄ± etkileÅŸimlerini ve  mantÄ±ÄŸÄ± (logic) iÅŸler.</li>
</ul>

<picture class="flowdiagram">
  <source srcset="/assets/images/rails/getting_started/mvc_architecture_dark.jpg" media="(prefers-color-scheme:dark)" />
  <img src="/assets/images/rails/getting_started/mvc_architecture_light.jpg" />
</picture>

<p>Åimdi MVC hakkÄ±nda temel bir anlayÄ±ÅŸa sahip olduÄŸumuza gÃ¶re, Railsâ€™te bunun nasÄ±l kullanÄ±ldÄ±ÄŸÄ±nÄ± gÃ¶relim.</p>

<h2 id="merhaba-rails">Merhaba, Rails!</h2>

<p>UygulamamÄ±zÄ±n veritabanÄ±nÄ± oluÅŸturarak ve Rails sunucumuzu ilk kez baÅŸlatarak kolay bir baÅŸlangÄ±Ã§ yapalÄ±m.</p>

<p>Terminalinizde, <code class="language-plaintext highlighter-rouge">store</code> dizininde aÅŸaÄŸÄ±daki komutlarÄ± Ã§alÄ±ÅŸtÄ±rÄ±n:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails db:create
</code></pre></div></div>

<p>Bu, baÅŸlangÄ±Ã§ta uygulamanÄ±n veritabanÄ±nÄ± oluÅŸturacaktÄ±r.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails server
</code></pre></div></div>

<div class="guide-alert guide-alert-warning">
  <div class="guide-alert-icon">ğŸ“</div>
  <div class="guide-alert-content">
    KomutlarÄ± bir uygulama dizini iÃ§inde Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±mÄ±zda <code>bin/rails</code> kullanmalÄ±yÄ±z. Bu, uygulamanÄ±n Rails sÃ¼rÃ¼mÃ¼nÃ¼n kullanÄ±ldÄ±ÄŸÄ±ndan emin olunmasÄ±nÄ± saÄŸlar.
  </div>
</div>

<p>Bu, statik dosyalarÄ± ve Rails uygulamanÄ±zÄ± sunacak olan Puma adlÄ± bir web sunucusunu baÅŸlatacaktÄ±r:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">=&gt;</span> Booting Puma
<span class="o">=&gt;</span> Rails 8.1.0 application starting <span class="k">in </span>development
<span class="o">=&gt;</span> Run <span class="sb">`</span>bin/rails server <span class="nt">--help</span><span class="sb">`</span> <span class="k">for </span>more startup options
Puma starting <span class="k">in </span>single mode...
<span class="k">*</span> Puma version: 6.4.3 <span class="o">(</span>ruby 3.3.5-p100<span class="o">)</span> <span class="o">(</span><span class="s2">"The Eagle of Durango"</span><span class="o">)</span>
<span class="k">*</span>  Min threads: 3
<span class="k">*</span>  Max threads: 3
<span class="k">*</span>  Environment: development
<span class="k">*</span>          PID: 12345
<span class="k">*</span> Listening on http://127.0.0.1:3000
<span class="k">*</span> Listening on http://[::1]:3000
Use Ctrl-C to stop
</code></pre></div></div>

<p>Rails uygulamanÄ±zÄ± gÃ¶rmek iÃ§in tarayÄ±cÄ±nÄ±zda http://localhost:3000 adresini aÃ§Ä±n. VarsayÄ±lan Rails karÅŸÄ±lama sayfasÄ±nÄ± gÃ¶receksiniz:</p>

<p><img src="/assets/images/rails/getting_started/rails_welcome.png" alt="Rails welcome page" /></p>

<p>Ä°ÅŸe yarÄ±yor!</p>

<p>Bu sayfa, yeni bir Rails uygulamasÄ± iÃ§in <em>smoke test</em> olup, bir sayfayÄ± sunmak iÃ§in perde arkasÄ±nda her ÅŸeyin Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olunmasÄ±nÄ± saÄŸlar.</p>

<p>Rails sunucusunu istediÄŸiniz zaman durdurmak iÃ§in terminalinizde <code class="language-plaintext highlighter-rouge">Ctrl-C</code> tuÅŸuna basÄ±n.</p>

<h3 id="geliÅŸtirme-aÅŸamasÄ±nda-otomatik-yÃ¼kleme">GeliÅŸtirme AÅŸamasÄ±nda Otomatik YÃ¼kleme</h3>

<p>GeliÅŸtiricinin mutluluÄŸu Railsâ€™in temel felsefelerinden biridir ve bunu saÄŸlamanÄ±n bir yolu da geliÅŸtirme sÄ±rasÄ±nda kodun otomatik yeniden yÃ¼klenmesidir (reload).</p>

<p>Rails sunucusunu baÅŸlattÄ±ÄŸÄ±nÄ±zda, yeni dosyalar veya mevcut dosyalardaki deÄŸiÅŸiklikler algÄ±lanÄ±r ve otomatik olarak yÃ¼klenir veya gerektiÄŸinde yeniden yÃ¼klenir. Bu, her deÄŸiÅŸiklikten sonra Rails sunucunuzu yeniden baÅŸlatmak zorunda kalmadan kodlamaya odaklanmanÄ±zÄ± saÄŸlar.</p>

<p>Rails uygulamalarÄ±nÄ±n diÄŸer programlama dillerinde gÃ¶rdÃ¼ÄŸÃ¼nÃ¼z <code class="language-plaintext highlighter-rouge">require</code> deyimlerini (statement) nadiren kullandÄ±ÄŸÄ±nÄ± da fark edebilirsiniz. Rails, uygulama kodunuzu yazmaya odaklanabilmeniz iÃ§in dosyalarÄ± otomatik olarak istemek Ã¼zere adlandÄ±rma kurallarÄ±nÄ± kullanÄ±r.</p>

<p>Daha fazla ayrÄ±ntÄ± iÃ§in <a href="../autoloading_and_reloading_constants/">Otomatik YÃ¼kleme ve Yeniden YÃ¼kleme Sabitleri</a> bÃ¶lÃ¼mÃ¼ne bakÄ±n.</p>

<h2 id="veritabanÄ±-modeli-oluÅŸturma">VeritabanÄ± Modeli OluÅŸturma</h2>

<p>Active Record, iliÅŸkisel veritabanlarÄ±nÄ± Ruby koduna eÅŸleyen bir Rails Ã¶zelliÄŸidir.
Tablo ve kayÄ±t oluÅŸturma, gÃ¼ncelleme ve silme gibi veritabanÄ± ile etkileÅŸim iÃ§in yapÄ±landÄ±rÄ±lmÄ±ÅŸ sorgu dilinin (SQL) oluÅŸturulmasÄ±na yardÄ±mcÄ± olur. UygulamamÄ±z Rails iÃ§in varsayÄ±lan olan SQLite kullanmaktadÄ±r.</p>

<p>Basit e-ticaret maÄŸazamÄ±za Ã¼rÃ¼n eklemek iÃ§in Rails uygulamamÄ±za bir veritabanÄ± tablosu ekleyerek baÅŸlayalÄ±m.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate model Product name:string
</code></pre></div></div>

<p>Bu komut Railsâ€™e veritabanÄ±nda <code class="language-plaintext highlighter-rouge">name</code> sÃ¼tunu ve tÃ¼rÃ¼ <code class="language-plaintext highlighter-rouge">string</code> olan <code class="language-plaintext highlighter-rouge">Product</code> adÄ±nda bir model oluÅŸturmasÄ±nÄ± sÃ¶yler. DiÄŸer sÃ¼tun tÃ¼rlerini nasÄ±l ekleyeceÄŸinizi daha sonra Ã¶ÄŸreneceksiniz.</p>

<p>Terminalinizde aÅŸaÄŸÄ±dakileri gÃ¶receksiniz:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      invoke  active_record
      create    db/migrate/20240426151900_create_products.rb
      create    app/models/product.rb
      invoke    test_unit
      create      <span class="nb">test</span>/models/product_test.rb
      create      <span class="nb">test</span>/fixtures/products.yml
</code></pre></div></div>

<p>Bu komut birkaÃ§ ÅŸey yaparak ÅŸunlarÄ± oluÅŸturur:</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">db/migrate</code> klasÃ¶rÃ¼nde bir ÅŸema deÄŸiÅŸikliÄŸi (migration).</li>
  <li><code class="language-plaintext highlighter-rouge">app/models/product.rb</code> iÃ§inde bir Active Record modeli.</li>
  <li>Bu model iÃ§in testler ve test fikstÃ¼rleri.</li>
</ol>

<div class="guide-alert guide-alert-warning">
  <div class="guide-alert-icon">ğŸ“</div>
  <div class="guide-alert-content">
    Model adlarÄ± <b>tekildir</b>, Ã§Ã¼nkÃ¼ Ã¶rneklenen bir model veritabanÄ±ndaki tek bir kaydÄ± temsil eder (yani, veritabanÄ±na eklemek iÃ§in bir <i>product</i> oluÅŸturuyorsunuz).
  </div>
</div>

<h3 id="veritabanÄ±-deÄŸiÅŸiklikleri">VeritabanÄ± DeÄŸiÅŸiklikleri</h3>

<p>Bir <em>migration</em> veritabanÄ±mÄ±zda yapmak istediÄŸimiz bir deÄŸiÅŸikliktir.</p>

<p>Migrationâ€™larÄ± tanÄ±mlayarak, Railsâ€™e veritabanÄ±ndaki tablolarÄ±, sÃ¼tunlarÄ± veya diÄŸer Ã¶znitelikleri eklemek, deÄŸiÅŸtirmek veya kaldÄ±rmak iÃ§in veritabanÄ±nÄ± nasÄ±l deÄŸiÅŸtireceÄŸini sÃ¶ylÃ¼yoruz. Bu, geliÅŸtirme aÅŸamasÄ±nda (sadece bizim bilgisayarÄ±mÄ±zda) yaptÄ±ÄŸÄ±mÄ±z deÄŸiÅŸiklikleri takip etmemize yardÄ±mcÄ± olur, bÃ¶ylece Ã¼retim ortamÄ±na (canlÄ±da/Ã§evrimiÃ§iyken!) gÃ¼venli bir ÅŸekilde daÄŸÄ±tÄ±labilirler.</p>

<p>Kod editÃ¶rÃ¼nÃ¼zde Railsâ€™in bizim iÃ§in oluÅŸturduÄŸu migrationâ€™Ä± aÃ§Ä±n, bÃ¶ylece migrationâ€™Ä±n ne yaptÄ±ÄŸÄ±nÄ± gÃ¶rebiliriz. <code class="language-plaintext highlighter-rouge">db/migrate/&lt;timestamp&gt;_create_products.rb</code> ÅŸeklinde bir dosyada bulunur:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CreateProducts</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">8.1</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:products</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:name</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Bu migration Railsâ€™e <code class="language-plaintext highlighter-rouge">products</code> adÄ±nda yeni bir veritabanÄ± tablosu oluÅŸturmasÄ±nÄ± sÃ¶ylÃ¼yor.</p>

<div class="guide-alert guide-alert-warning">
  <div class="guide-alert-icon">ğŸ“</div>
  <div class="guide-alert-content">
    YukarÄ±daki modelin aksine, Rails veritabanÄ± tablo adlarÄ±nÄ± <b>Ã§oÄŸul</b> yapar, Ã§Ã¼nkÃ¼ veritabanÄ± her modelin tÃ¼m Ã¶rneklerini tutar (yani, <i>products</i> veritabanÄ± oluÅŸturuyorsunuz).
  </div>
</div>

<p>Daha sonra <code class="language-plaintext highlighter-rouge">create_table</code> bloÄŸu bu veritabanÄ± tablosunda hangi sÃ¼tunlarÄ±n ve tÃ¼rlerin tanÄ±mlanmasÄ± gerektiÄŸini belirler.</p>

<p><code class="language-plaintext highlighter-rouge">t.string :name</code> Railsâ€™e <code class="language-plaintext highlighter-rouge">products</code> tablosunda <code class="language-plaintext highlighter-rouge">name</code> adÄ±nda bir sÃ¼tun oluÅŸturmasÄ±nÄ± ve tÃ¼rÃ¼nÃ¼ <code class="language-plaintext highlighter-rouge">string</code> olarak ayarlamasÄ±nÄ± sÃ¶yler.</p>

<p><code class="language-plaintext highlighter-rouge">t.timestamps</code>, modellerinizde <code class="language-plaintext highlighter-rouge">created_at:datetime</code> ve <code class="language-plaintext highlighter-rouge">updated_at:datetime</code> adÄ±nda iki sÃ¼tun tanÄ±mlamak iÃ§in bir kÄ±sayoldur. Bu sÃ¼tunlarÄ± Railsâ€™teki Ã§oÄŸu Active Record modelinde gÃ¶rÃ¼rsÃ¼nÃ¼z ve kayÄ±tlar oluÅŸturulurken veya gÃ¼ncellenirken Active Record tarafÄ±ndan otomatik olarak ayarlanÄ±rlar.</p>

<h3 id="deÄŸiÅŸiklikleri-Ã§alÄ±ÅŸtÄ±rma">DeÄŸiÅŸiklikleri Ã‡alÄ±ÅŸtÄ±rma</h3>

<p>ArtÄ±k veritabanÄ±nda hangi deÄŸiÅŸikliklerin yapÄ±lacaÄŸÄ±nÄ± belirlediÄŸinize gÃ¶re, migrationâ€™larÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in aÅŸaÄŸÄ±daki komutu kullanÄ±n:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails db:migrate
</code></pre></div></div>

<p>Bu komut yeni migrationâ€™larÄ± kontrol eder ve bunlarÄ± veritabanÄ±nÄ±za uygular. Ã‡Ä±ktÄ±sÄ± ÅŸu ÅŸekilde gÃ¶rÃ¼nÃ¼r:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">==</span> 20240426151900 CreateProducts: migrating <span class="o">===================================</span>
<span class="nt">--</span> create_table<span class="o">(</span>:products<span class="o">)</span>
   -&gt; 0.0030s
<span class="o">==</span> 20240426151900 CreateProducts: migrated <span class="o">(</span>0.0031s<span class="o">)</span> <span class="o">==========================</span>
</code></pre></div></div>

<div class="guide-alert guide-alert-info">
  <div class="guide-alert-icon">ğŸ’¡</div>
  <div class="guide-alert-content">
    EÄŸer bir hata yaparsanÄ±z, son migration'Ä± geri almak iÃ§in <code>bin/rails db:rollback</code> komutunu Ã§alÄ±ÅŸtÄ±rabilirsiniz.
  </div>
</div>

<h2 id="rails-konsolu">Rails Konsolu</h2>

<p>ArtÄ±k products tablomuzu oluÅŸturduÄŸumuza gÃ¶re, Railsâ€™te onunla etkileÅŸime geÃ§ebiliriz. Hadi deneyelim.</p>

<p>Bunun iÃ§in <em>console</em> adÄ± verilen bir Rails Ã¶zelliÄŸini kullanacaÄŸÄ±z. Konsol, Rails uygulamamÄ±zdaki kodumuzu test etmek iÃ§in yararlÄ±, etkileÅŸimli bir araÃ§tÄ±r.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails console
</code></pre></div></div>

<p>AÅŸaÄŸÄ±daki gibi bir komut istemi ile karÅŸÄ±laÅŸacaksÄ±nÄ±z:</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Loading development environment (Rails 8.1.0)
store(dev)&gt;
</span></code></pre></div></div>

<p>Burada <code class="language-plaintext highlighter-rouge">Enter</code> tuÅŸuna bastÄ±ÄŸÄ±mÄ±zda Ã§alÄ±ÅŸtÄ±rÄ±lacak kodu yazabiliriz. Rails sÃ¼rÃ¼mÃ¼nÃ¼ yazdÄ±rmayÄ± deneyelim:</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; Rails.version
</span><span class="p">=&gt;</span> <span class="s2">"8.1.0"</span>
</code></pre></div></div>

<p>Ä°ÅŸe yarÄ±yor!</p>

<h2 id="active-record-model-temelleri">Active Record Model Temelleri</h2>

<p>Rails model oluÅŸturucusunu <code class="language-plaintext highlighter-rouge">Product</code> modelini oluÅŸturmak iÃ§in Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±mÄ±zda, <code class="language-plaintext highlighter-rouge">app/models/product.rb</code> adresinde bir dosya oluÅŸturdu. Bu dosya, <code class="language-plaintext highlighter-rouge">products</code> veritabanÄ± tablomuzla etkileÅŸim iÃ§in Active Record kullanan bir sÄ±nÄ±f oluÅŸturur.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Product</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Bu sÄ±nÄ±fta hiÃ§ kod olmamasÄ± sizi ÅŸaÅŸÄ±rtabilir. Rails bu modeli neyin tanÄ±mladÄ±ÄŸÄ±nÄ± nasÄ±l biliyor?</p>

<p><code class="language-plaintext highlighter-rouge">Product</code> modeli kullanÄ±ldÄ±ÄŸÄ±nda, Rails sÃ¼tun adlarÄ± ve tÃ¼rleri iÃ§in veritabanÄ± tablosunu sorgulayacak ve bu Ã¶znitelikler (attribute) iÃ§in otomatik olarak kod oluÅŸturacaktÄ±r. Rails bizi bu ÅŸablon kodu yazmaktan kurtarÄ±r ve bunun yerine uygulama mantÄ±ÄŸÄ±mÄ±za odaklanabilmemiz iÃ§in bu iÅŸi bizim yerimize perde arkasÄ±nda halleder.</p>

<p>Railsâ€™in Product modeli iÃ§in hangi sÃ¼tunlarÄ± algÄ±ladÄ±ÄŸÄ±nÄ± gÃ¶rmek iÃ§in Rails konsolunu kullanalÄ±m.</p>

<p>Ã‡alÄ±ÅŸtÄ±rÄ±n:</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; Product.column_names
</span></code></pre></div></div>

<p>Bunu gÃ¶rmelisiniz:</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">=&gt;</span> <span class="p">[</span><span class="s2">"id"</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">,</span> <span class="s2">"created_at"</span><span class="p">,</span> <span class="s2">"updated_at"</span><span class="p">]</span>
</code></pre></div></div>

<p>Rails, veritabanÄ±ndan yukarÄ±daki sÃ¼tun bilgilerini istedi ve bu bilgileri `Productâ€™ sÄ±nÄ±fÄ±ndaki Ã¶znitelikleri dinamik olarak tanÄ±mlamak iÃ§in kullandÄ±, bÃ¶ylece her birini manuel olarak sizin tanÄ±mlamanÄ±z gerekmez. Bu, Railsâ€™in geliÅŸtirmeyi nasÄ±l kolaylaÅŸtÄ±rdÄ±ÄŸÄ±nÄ±n bir Ã¶rneÄŸidir.</p>

<h3 id="kayÄ±tlarÄ±-oluÅŸturma">KayÄ±tlarÄ± OluÅŸturma</h3>

<p>AÅŸaÄŸÄ±daki kod ile yeni bir Product kaydÄ± oluÅŸturabiliriz:</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; product = Product.new(name: "T-Shirt")
</span><span class="p">=&gt;</span> <span class="kt">#&lt;</span><span class="no">Product</span><span class="p">:</span><span class="mh">0x000000012e616c30</span> <span class="ss">id: </span><span class="kp">nil</span><span class="p">,</span> <span class="ss">name: </span><span class="s2">"T-Shirt"</span><span class="p">,</span> <span class="ss">created_at: </span><span class="kp">nil</span><span class="p">,</span> <span class="ss">updated_at: </span><span class="kp">nil</span><span class="kt">&gt;</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">product</code> deÄŸiÅŸkeni <code class="language-plaintext highlighter-rouge">Product</code>â€˜Ä±n bir Ã¶rneklemesidir. VeritabanÄ±na kaydedilmemiÅŸtir ve bu nedenle bir ID, created_at veya updated_at gibi zaman damgalarÄ± yoktur.</p>

<p>KaydÄ± veritabanÄ±na yazmak iÃ§in <code class="language-plaintext highlighter-rouge">save</code> Ã§aÄŸrÄ±sÄ± yapabiliriz.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; product.save
  TRANSACTION (0.1ms)  BEGIN immediate TRANSACTION /*application='Store'*/
  Product Create (0.9ms)  INSERT INTO "products" ("name", "created_at", "updated_at") VALUES ('T-Shirt', '2024-11-09 16:35:01.117836', '2024-11-09 16:35:01.117836') RETURNING "id" /*application='Store'*/
  TRANSACTION (0.9ms)  COMMIT TRANSACTION /*application='Store'*/
</span><span class="p">=&gt;</span> <span class="kp">true</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">save</code> Ã§aÄŸrÄ±ldÄ±ÄŸÄ±nda, Rails bellekteki Ã¶znitelikleri alÄ±r ve bu kaydÄ± veritabanÄ±na eklemek iÃ§in bir <code class="language-plaintext highlighter-rouge">INSERT</code> SQL sorgusu oluÅŸturur.</p>

<p>Rails ayrÄ±ca bellekteki nesneyi <code class="language-plaintext highlighter-rouge">created_at</code> ve <code class="language-plaintext highlighter-rouge">updated_at</code> zaman damgalarÄ±yla birlikte veritabanÄ± kaydÄ± <code class="language-plaintext highlighter-rouge">id</code> ile gÃ¼nceller. Bunu <code class="language-plaintext highlighter-rouge">product</code> deÄŸiÅŸkenini yazdÄ±rarak gÃ¶rebiliriz.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; product
</span><span class="gp">=&gt; #&lt;Product:0x00000001221f6260 id: 1, name: "T-Shirt", created_at: "2024-11-09 16:35:01.117836000 +0000", updated_at: "2024-11-09 16:35:01.117836000 +0000"&gt;</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">save</code>â€˜e benzer ÅŸekilde, bir Active Record nesnesini tek bir Ã§aÄŸrÄ±da oluÅŸturmak ve kaydetmek iÃ§in <code class="language-plaintext highlighter-rouge">create</code> kullanabiliriz.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; Product.create(name: "Pants")
  TRANSACTION (0.1ms)  BEGIN immediate TRANSACTION /*application='Store'*/
  Product Create (0.4ms)  INSERT INTO "products" ("name", "created_at", "updated_at") VALUES ('Pants', '2024-11-09 16:36:01.856751', '2024-11-09 16:36:01.856751') RETURNING "id" /*application='Store'*/
  TRANSACTION (0.1ms)  COMMIT TRANSACTION /*application='Store'*/
</span><span class="gp">=&gt; #&lt;Product:0x0000000120485c80 id: 2, name: "Pants", created_at: "2024-11-09 16:36:01.856751000 +0000", updated_at: "2024-11-09 16:36:01.856751000 +0000"&gt;</span><span class="w">
</span></code></pre></div></div>

<h3 id="kayÄ±tlarÄ±-sorgulama">KayÄ±tlarÄ± Sorgulama</h3>

<p>Active Record modelimizi kullanarak veritabanÄ±ndaki kayÄ±tlara da bakabiliriz.</p>

<p>VeritabanÄ±ndaki tÃ¼m Product kayÄ±tlarÄ±nÄ± bulmak iÃ§in <code class="language-plaintext highlighter-rouge">all</code> metodunu kullanabiliriz.
Bu bir <em>sÄ±nÄ±f</em> metodudur, bu yÃ¼zden Product Ã¼zerinde kullanabiliriz (yukarÄ±daki <code class="language-plaintext highlighter-rouge">save</code> gibi product Ã¶rneklemesi Ã¼zerinde Ã§aÄŸÄ±racaÄŸÄ±mÄ±z bir Ã¶rnekleme metoduna karÅŸÄ±lÄ±k gelir).</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; Product.all
  Product Load (0.1ms)  SELECT "products".* FROM "products" /* loading for pp */ LIMIT 11 /*application='Store'*/
</span><span class="gp">=&gt; [#&lt;Product:0x0000000121845158 id: 1, name: "T-Shirt", created_at: "2024-11-09 16:35:01.117836000 +0000", updated_at: "2024-11-09 16:35:01.117836000 +0000"&gt;</span><span class="p">,</span>
<span class="gp"> #&lt;Product:0x0000000121845018 id: 2, name: "Pants", created_at: "2024-11-09 16:36:01.856751000 +0000", updated_at: "2024-11-09 16:36:01.856751000 +0000"&gt;</span><span class="p">]</span>
</code></pre></div></div>

<p>Bu, <code class="language-plaintext highlighter-rouge">products</code> tablosundaki tÃ¼m kayÄ±tlarÄ± yÃ¼klemek iÃ§in bir <code class="language-plaintext highlighter-rouge">SELECT</code> SQL sorgusu oluÅŸturur. Her kayÄ±t otomatik olarak Product Active Record modelimizin bir Ã¶rneÄŸine dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lÃ¼r, bÃ¶ylece Rubyâ€™den onlarla kolayca Ã§alÄ±ÅŸabiliriz.</p>

<div class="guide-alert guide-alert-info">
  <div class="guide-alert-icon">ğŸ’¡</div>
  <div class="guide-alert-content">
    <code>all</code> metodu; filtreleme, sÄ±ralama ve diÄŸer veritabanÄ± iÅŸlemlerini yÃ¼rÃ¼tme Ã¶zelliklerine sahip veritabanÄ± kayÄ±tlarÄ±nÄ±n Array benzeri bir koleksiyonu olan bir <code>ActiveRecord::Relation</code> nesnesini dÃ¶ndÃ¼rÃ¼r.
  </div>
</div>

<h3 id="kayÄ±tlarÄ±-filtreleme-ve-sÄ±ralama">KayÄ±tlarÄ± Filtreleme ve SÄ±ralama</h3>

<p>VeritabanÄ±mÄ±zdaki sonuÃ§larÄ± filtrelemek istersek ne olur? KayÄ±tlarÄ± bir sÃ¼tuna gÃ¶re filtrelemek iÃ§in <code class="language-plaintext highlighter-rouge">where</code> kullanabiliriz.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; Product.where(name: "Pants")
  Product Load (1.5ms)  SELECT "products".* FROM "products" WHERE "products"."name" = 'Pants' /* loading for pp */ LIMIT 11 /*application='Store'*/
</span><span class="gp">=&gt; [#&lt;Product:0x000000012184d858 id: 2, name: "Pants", created_at: "2024-11-09 16:36:01.856751000 +0000", updated_at: "2024-11-09 16:36:01.856751000 +0000"&gt;</span><span class="p">]</span>
</code></pre></div></div>

<p>Bu bir <code class="language-plaintext highlighter-rouge">SELECT</code> SQL sorgusu oluÅŸturur, ancak <code class="language-plaintext highlighter-rouge">"Pants"</code> ile eÅŸleÅŸen bir <code class="language-plaintext highlighter-rouge">name</code>â€˜e sahip kayÄ±tlarÄ± filtrelemek iÃ§in bir <code class="language-plaintext highlighter-rouge">WHERE</code> cÃ¼mleciÄŸi de ekler. Bu aynÄ± zamanda bir <code class="language-plaintext highlighter-rouge">ActiveRecord::Relation</code> dÃ¶ndÃ¼rÃ¼r Ã§Ã¼nkÃ¼ birden fazla kayÄ±t aynÄ± isme sahip olabilir.</p>

<p>KayÄ±tlarÄ± isme gÃ¶re artan alfabetik sÄ±rada sÄ±ralamak iÃ§in <code class="language-plaintext highlighter-rouge">order(name: :asc)</code> kullanabiliriz.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; Product.order(name: :asc)
  Product Load (0.3ms)  SELECT "products".* FROM "products" /* loading for pp */ ORDER BY "products"."name" ASC LIMIT 11 /*application='Store'*/
</span><span class="gp">=&gt; [#&lt;Product:0x0000000120e02a88 id: 2, name: "Pants", created_at: "2024-11-09 16:36:01.856751000 +0000", updated_at: "2024-11-09 16:36:01.856751000 +0000"&gt;</span><span class="p">,</span>
<span class="gp"> #&lt;Product:0x0000000120e02948 id: 1, name: "T-Shirt", created_at: "2024-11-09 16:35:01.117836000 +0000", updated_at: "2024-11-09 16:35:01.117836000 +0000"&gt;</span><span class="p">]</span>
</code></pre></div></div>

<h3 id="kayÄ±tlarÄ±-bulma">KayÄ±tlarÄ± Bulma</h3>

<p>Peki ya belirli bir kaydÄ± bulmak istiyorsak?</p>

<p>Bunu, tek bir kaydÄ± IDâ€™ye gÃ¶re aramak iÃ§in <code class="language-plaintext highlighter-rouge">find</code> sÄ±nÄ±f metodunu kullanarak yapabiliriz. AÅŸaÄŸÄ±daki kodu kullanarak metodu Ã§aÄŸÄ±rÄ±n ve belirli bir ID girin:</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; Product.find(1)
  Product Load (0.2ms)  SELECT "products".* FROM "products" WHERE "products"."id" = 1 LIMIT 1 /*application='Store'*/
</span><span class="gp">=&gt; #&lt;Product:0x000000012054af08 id: 1, name: "T-Shirt", created_at: "2024-11-09 16:35:01.117836000 +0000", updated_at: "2024-11-09 16:35:01.117836000 +0000"&gt;</span><span class="w">
</span></code></pre></div></div>

<p>Bu bir <code class="language-plaintext highlighter-rouge">SELECT</code> sorgusu oluÅŸturur, ancak <code class="language-plaintext highlighter-rouge">id</code> sÃ¼tunu iÃ§in aktarÄ±lan <code class="language-plaintext highlighter-rouge">1</code> ile eÅŸleÅŸen bir <code class="language-plaintext highlighter-rouge">WHERE</code> belirtir. AyrÄ±ca, yalnÄ±zca tek bir kayÄ±t dÃ¶ndÃ¼rmek iÃ§in bir <code class="language-plaintext highlighter-rouge">LIMIT</code> ekler.</p>

<p>Bu kez, veritabanÄ±ndan yalnÄ±zca tek bir kayÄ±t aldÄ±ÄŸÄ±mÄ±z iÃ§in <code class="language-plaintext highlighter-rouge">ActiveRecord::Relation</code> yerine bir <code class="language-plaintext highlighter-rouge">Product</code> Ã¶rneÄŸi alÄ±yoruz.</p>

<h3 id="kayÄ±tlarÄ±-gÃ¼ncelleme">KayÄ±tlarÄ± GÃ¼ncelleme</h3>

<p>KayÄ±tlar 2 ÅŸekilde gÃ¼ncellenebilir: <code class="language-plaintext highlighter-rouge">update</code> kullanÄ±larak veya Ã¶znitelikler atandÄ±ktan sonra <code class="language-plaintext highlighter-rouge">save</code> Ã§aÄŸrÄ±sÄ± yapÄ±larak.</p>

<p>Bir Product Ã¶rneÄŸi Ã¼zerinde <code class="language-plaintext highlighter-rouge">update</code> Ã§aÄŸrÄ±sÄ± yapabilir ve veritabanÄ±na kaydedilecek yeni Ã¶zelliklerin bir Hashâ€™ini iletebiliriz. Bu; Ã¶znitelikleri atayacak, doÄŸrulamalarÄ± (validations) Ã§alÄ±ÅŸtÄ±racak ve deÄŸiÅŸiklikleri tek bir metot Ã§aÄŸrÄ±sÄ±nda veritabanÄ±na kaydedecektir.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; product = Product.find(1)
store(dev)&gt; product.update(name: "Shoes")
  TRANSACTION (0.1ms)  BEGIN immediate TRANSACTION /*application='Store'*/
  Product Update (0.3ms)  UPDATE "products" SET "name" = 'Shoes', "updated_at" = '2024-11-09 22:38:19.638912' WHERE "products"."id" = 1 /*application='Store'*/
  TRANSACTION (0.4ms)  COMMIT TRANSACTION /*application='Store'*/
</span><span class="p">=&gt;</span> <span class="kp">true</span>
</code></pre></div></div>

<p>Bu, veritabanÄ±ndaki â€œT-Shirtâ€ Ã¼rÃ¼nÃ¼nÃ¼n adÄ±nÄ± â€œShoesâ€ olarak gÃ¼ncelledi.
Bunu <code class="language-plaintext highlighter-rouge">Product.all</code> dosyasÄ±nÄ± tekrar Ã§alÄ±ÅŸtÄ±rarak gÃ¶rÃ¼n.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; Product.all
</span></code></pre></div></div>

<p>Ä°ki Ã¼rÃ¼n gÃ¶receksiniz: Shoes ve Pants.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">  Product Load (0.3ms)  SELECT "products".* FROM "products" /* loading for pp */ LIMIT 11 /*application='Store'*/
</span><span class="p">=&gt;</span>
<span class="p">[</span><span class="kt">#&lt;</span><span class="no">Product</span><span class="p">:</span><span class="mh">0x000000012c0f7300</span>
  <span class="ss">id: </span><span class="mi">1</span><span class="p">,</span>
  <span class="ss">name: </span><span class="s2">"Shoes"</span><span class="p">,</span>
  <span class="ss">created_at: </span><span class="s2">"2024-12-02 20:29:56.303546000 +0000"</span><span class="p">,</span>
<span class="gp">  updated_at: "2024-12-02 20:30:14.127456000 +0000"&gt;</span><span class="p">,</span>
<span class="c"> #&lt;Product:0x000000012c0f71c0
</span><span class="go">  id: 2,
  name: "Pants",
  created_at: "2024-12-02 20:30:02.997261000 +0000",
</span><span class="gp">  updated_at: "2024-12-02 20:30:02.997261000 +0000"&gt;</span><span class="p">]</span>
</code></pre></div></div>

<p>Alternatif olarak, Ã¶znitelikleri atayabilir, deÄŸiÅŸiklikleri doÄŸrulamaya ve veritabanÄ±na kaydetmeye hazÄ±r olduÄŸumuzda <code class="language-plaintext highlighter-rouge">save</code> Ã§aÄŸrÄ±sÄ± yapabiliriz.</p>

<p>â€œShoesâ€ adÄ±nÄ± yeniden â€œT-Shirtâ€ olarak deÄŸiÅŸtirelim.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; product = Product.find(1)
store(dev)&gt; product.name = "T-Shirt"
</span><span class="p">=&gt;</span> <span class="s2">"T-Shirt"</span>
<span class="n">store</span><span class="p">(</span><span class="n">dev</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">product</span><span class="p">.</span><span class="nf">save</span>
  <span class="no">TRANSACTION</span> <span class="p">(</span><span class="mf">0.1</span><span class="n">ms</span><span class="p">)</span>  <span class="k">BEGIN</span> <span class="n">immediate</span> <span class="no">TRANSACTION</span> <span class="sr">/*application='Store'*/</span>
  <span class="no">Product</span> <span class="no">Update</span> <span class="p">(</span><span class="mf">0.2</span><span class="n">ms</span><span class="p">)</span>  <span class="no">UPDATE</span> <span class="s2">"products"</span> <span class="no">SET</span> <span class="s2">"name"</span> <span class="o">=</span> <span class="s1">'T-Shirt'</span><span class="p">,</span> <span class="s2">"updated_at"</span> <span class="o">=</span> <span class="s1">'2024-11-09 22:39:09.693548'</span> <span class="no">WHERE</span> <span class="s2">"products"</span><span class="o">.</span><span class="s2">"id"</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/*</span><span class="n">application</span><span class="o">=</span><span class="s1">'Store'</span><span class="o">*</span><span class="sr">/
  TRANSACTION (0.0ms)  COMMIT TRANSACTION /</span><span class="o">*</span><span class="n">application</span><span class="o">=</span><span class="s1">'Store'</span><span class="o">*</span><span class="sr">/
=&gt; true
</span></code></pre></div></div>

<h3 id="kayÄ±tlarÄ±-silme">KayÄ±tlarÄ± Silme</h3>

<p>Bir kaydÄ± veritabanÄ±ndan silmek iÃ§in <code class="language-plaintext highlighter-rouge">destroy</code> metodu kullanÄ±labilir.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; product.destroy
  TRANSACTION (0.1ms)  BEGIN immediate TRANSACTION /*application='Store'*/
  Product Destroy (0.4ms)  DELETE FROM "products" WHERE "products"."id" = 1 /*application='Store'*/
  TRANSACTION (0.1ms)  COMMIT TRANSACTION /*application='Store'*/
</span><span class="gp">=&gt; #&lt;Product:0x0000000125813d48 id: 1, name: "T-Shirt", created_at: "2024-11-09 22:39:38.498730000 +0000", updated_at: "2024-11-09 22:39:38.498730000 +0000"&gt;</span><span class="w">
</span></code></pre></div></div>

<p>Bu iÅŸlem T-Shirt Ã¼rÃ¼nÃ¼nÃ¼ veritabanÄ±mÄ±zdan sildi. Bunu <code class="language-plaintext highlighter-rouge">Product.all</code> ile doÄŸrulayarak yalnÄ±zca Pants Ã¼rÃ¼nÃ¼nÃ¼ dÃ¶ndÃ¼rdÃ¼ÄŸÃ¼nÃ¼ gÃ¶rebiliriz.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; Product.all
  Product Load (1.9ms)  SELECT "products".* FROM "products" /* loading for pp */ LIMIT 11 /*application='Store'*/
</span><span class="p">=&gt;</span>
<span class="p">[</span><span class="kt">#&lt;</span><span class="no">Product</span><span class="p">:</span><span class="mh">0x000000012abde4c8</span>
  <span class="ss">id: </span><span class="mi">2</span><span class="p">,</span>
  <span class="ss">name: </span><span class="s2">"Pants"</span><span class="p">,</span>
  <span class="ss">created_at: </span><span class="s2">"2024-11-09 22:33:19.638912000 +0000"</span><span class="p">,</span>
<span class="gp">  updated_at: "2024-11-09 22:33:19.638912000 +0000"&gt;</span><span class="p">]</span>
</code></pre></div></div>

<h3 id="doÄŸrulamalar">DoÄŸrulamalar</h3>

<p>Active Record, veritabanÄ±na eklenen verilerin belirli kurallara uymasÄ±nÄ± saÄŸlamanÄ±za olanak tanÄ±yan <em>doÄŸrulamalar</em> (validations) saÄŸlar.</p>

<p>TÃ¼m Ã¼rÃ¼nlerin bir <code class="language-plaintext highlighter-rouge">name</code>â€˜e sahip olmasÄ± gerektiÄŸinden emin olmak iÃ§in Product modeline bir <code class="language-plaintext highlighter-rouge">presence</code> doÄŸrulamasÄ± ekleyelim.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Product</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Railsâ€™in geliÅŸtirme sÄ±rasÄ±nda deÄŸiÅŸiklikleri otomatik olarak yeniden yÃ¼klediÄŸini hatÄ±rlayabilirsiniz. Ancak, kodda gÃ¼ncelleme yaptÄ±ÄŸÄ±nÄ±zda konsol Ã§alÄ±ÅŸÄ±yorsa, konsolu manuel olarak yenilemeniz gerekir. Åimdi bunu â€œreload!â€ komutunu Ã§alÄ±ÅŸtÄ±rarak yapalÄ±m.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; reload!
Reloading...
</span></code></pre></div></div>

<p>Rails konsolunda isimsiz bir Product oluÅŸturmayÄ± deneyelim.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; product = Product.new
store(dev)&gt; product.save
</span><span class="p">=&gt;</span> <span class="kp">false</span>
</code></pre></div></div>

<p>Bu kez <code class="language-plaintext highlighter-rouge">save</code>, <code class="language-plaintext highlighter-rouge">name</code> Ã¶zniteliÄŸi belirtilmediÄŸi iÃ§in <code class="language-plaintext highlighter-rouge">false</code> dÃ¶ndÃ¼rÃ¼r.</p>

<p>Rails, geÃ§erli girdiden emin olmak iÃ§in oluÅŸturma, gÃ¼ncelleme ve kaydetme iÅŸlemleri sÄ±rasÄ±nda otomatik olarak doÄŸrulamalarÄ± Ã§alÄ±ÅŸtÄ±rÄ±r. DoÄŸrulamalar tarafÄ±ndan oluÅŸturulan hatalarÄ±n bir listesini gÃ¶rmek iÃ§in, Ã¶rnekleme Ã¼zerinde <code class="language-plaintext highlighter-rouge">errors</code> Ã§aÄŸrÄ±sÄ± yapabiliriz.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; product.errors
</span><span class="p">=&gt;</span> <span class="kt">#&lt;</span><span class="no">ActiveModel</span><span class="o">::</span><span class="no">Errors</span> <span class="p">[</span><span class="kt">#&lt;</span><span class="no">ActiveModel</span><span class="o">::</span><span class="no">Error</span> <span class="n">attribute</span><span class="o">=</span><span class="nb">name</span><span class="p">,</span> <span class="n">type</span><span class="o">=</span><span class="n">blank</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{}</span><span class="kt">&gt;</span><span class="p">]</span><span class="kt">&gt;</span>
</code></pre></div></div>

<p>Bu, bize tam olarak hangi hatalarÄ±n mevcut olduÄŸunu sÃ¶yleyebilen bir <code class="language-plaintext highlighter-rouge">ActiveModel::Errors</code> nesnesi dÃ¶ndÃ¼rÃ¼r.</p>

<p>AyrÄ±ca bizim iÃ§in kullanÄ±cÄ± arayÃ¼zÃ¼mÃ¼zde kullanabileceÄŸimiz dostÃ§a hata mesajlarÄ± da oluÅŸturabilir.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; product.errors.full_messages
</span><span class="p">=&gt;</span> <span class="p">[</span><span class="s2">"Name can't be blank"</span><span class="p">]</span>
</code></pre></div></div>

<p>Åimdi Products iÃ§in bir web arayÃ¼zÃ¼ oluÅŸturalÄ±m.</p>

<p>Åimdilik konsolla iÅŸimiz bitti, bu yÃ¼zden <code class="language-plaintext highlighter-rouge">exit</code> komutunu Ã§alÄ±ÅŸtÄ±rarak konsoldan Ã§Ä±kabilirsiniz.</p>

<h2 id="bir-iÌ‡steÄŸin-railsteki-yolculuÄŸu">Bir Ä°steÄŸin Railsâ€™teki YolculuÄŸu</h2>

<p>Railsâ€™in â€œMerhabaâ€ demesini saÄŸlamak iÃ§in en azÄ±ndan bir <em>route</em>, bir <em>action</em> iÃ§eren bir <em>controller</em> ve bir <em>view</em> oluÅŸturmanÄ±z gerekir. Route, bir isteÄŸi bir controller eylemiyle (action) eÅŸler. Bir controller eylemi, isteÄŸi iÅŸlemek iÃ§in gerekli Ã§alÄ±ÅŸmalarÄ± gerÃ§ekleÅŸtirir ve view iÃ§in verileri hazÄ±rlar. Bir view, verileri istenen biÃ§imde gÃ¶rÃ¼ntÃ¼ler.</p>

<p>Uygulanma aÃ§Ä±sÄ±ndan: Routeâ€™lar bir Ruby <a href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL (Domain-Specific Language)</a> dili ile yazÄ±lmÄ±ÅŸ kurallardÄ±r. Controllerâ€™lar Ruby sÄ±nÄ±flarÄ±dÄ±r ve genel metotlarÄ± eylemlerdir. Viewâ€™ler ise genellikle HTML ve Ruby karÄ±ÅŸÄ±mÄ±yla yazÄ±lmÄ±ÅŸ ÅŸablonlardÄ±r.</p>

<p>KÄ±saca bu ÅŸekilde, ancak bu adÄ±mlarÄ±n her birini daha ayrÄ±ntÄ±lÄ± olarak inceleyeceÄŸiz.</p>

<h2 id="route">Route</h2>

<p>Railsâ€™te route, gelen bir HTTP isteÄŸinin iÅŸlenmek Ã¼zere uygun controllerâ€™a ve eyleme nasÄ±l yÃ¶nlendirileceÄŸini belirleyen URLâ€™in bir parÃ§asÄ±dÄ±r. Ä°lk olarak, URLâ€™ler ve HTTP Ä°stek metotlarÄ± hakkÄ±nda hÄ±zlÄ± bir hatÄ±rlatma yapalÄ±m.</p>

<h3 id="urlin-parÃ§alarÄ±">URLâ€™in ParÃ§alarÄ±</h3>

<p>Bir URLâ€™in farklÄ± parÃ§alarÄ±nÄ± inceleyelim:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://example.org/products?sale=true&amp;sort=asc
</code></pre></div></div>

<p>Bu URLâ€™de her parÃ§anÄ±n bir adÄ± vardÄ±r:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">https</code> bir <strong>protokol</strong>dÃ¼r.</li>
  <li><code class="language-plaintext highlighter-rouge">example.org</code> bir <strong>hizmet saÄŸlayÄ±cÄ±</strong>dÄ±r.</li>
  <li><code class="language-plaintext highlighter-rouge">/products</code> bir <strong>yol</strong> adÄ±dÄ±r.</li>
  <li><code class="language-plaintext highlighter-rouge">?sale=true&amp;sort=asc</code> bir <strong>sorgu parametresi</strong>dir.</li>
</ul>

<h3 id="http-metotlarÄ±-ve-amaÃ§larÄ±">HTTP MetotlarÄ± ve AmaÃ§larÄ±</h3>

<p>HTTP istekleri, sunucuya belirli bir URL iÃ§in hangi eylemi gerÃ§ekleÅŸtirmesi gerektiÄŸini sÃ¶ylemek iÃ§in metotlar kullanÄ±r. Ä°ÅŸte en yaygÄ±n metotlar:</p>

<ul>
  <li>Bir <code class="language-plaintext highlighter-rouge">GET</code> isteÄŸi, sunucuya belirli bir URL iÃ§in verileri almasÄ±nÄ± sÃ¶yler (Ã¶rn,
bir sayfa yÃ¼kleme veya bir kayÄ±t getirme).</li>
  <li>Bir <code class="language-plaintext highlighter-rouge">POST</code> isteÄŸi, iÅŸlenmek Ã¼zere URLâ€™e veri gÃ¶nderir (genellikle yeni bir kayÄ±t oluÅŸturur).</li>
  <li>Bir <code class="language-plaintext highlighter-rouge">PUT</code> veya <code class="language-plaintext highlighter-rouge">PATCH</code> isteÄŸi, mevcut bir kaydÄ± gÃ¼ncellemek iÃ§in bir URLâ€™e veri gÃ¶nderir.</li>
  <li>Bir URLâ€™e yapÄ±lan <code class="language-plaintext highlighter-rouge">DELETE</code> isteÄŸi sunucuya bir kaydÄ± silmesini sÃ¶yler.</li>
</ul>

<h3 id="railste-route">Railsâ€™te Route</h3>

<p>Railsâ€™teki bir <code class="language-plaintext highlighter-rouge">route</code> , bir HTTP metodu ile bir URL yolunu eÅŸleÅŸtiren bir kod satÄ±rÄ±nÄ± ifade eder. Route ayrÄ±ca Railsâ€™e bir isteÄŸe hangi <code class="language-plaintext highlighter-rouge">controller</code> ve <code class="language-plaintext highlighter-rouge">action</code>â€˜Ä±n yanÄ±t vermesi gerektiÄŸini sÃ¶yler.</p>

<p>Railsâ€™te bir route tanÄ±mlamak iÃ§in kod editÃ¶rÃ¼nÃ¼ze geri dÃ¶nÃ¼n ve
aÅŸaÄŸÄ±daki routeâ€™u <code class="language-plaintext highlighter-rouge">config/routes.rb</code> dosyasÄ±na ekleyin.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"/products"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"products#index"</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Bu route Railsâ€™e <code class="language-plaintext highlighter-rouge">/products</code> yoluna GET istekleri aramasÄ±nÄ± sÃ¶yler. Bu Ã¶rnekte, isteÄŸin yÃ¶nlendirileceÄŸi yer iÃ§in <code class="language-plaintext highlighter-rouge">"products#index"</code>â€˜i belirttik.</p>

<p>Rails eÅŸleÅŸen bir istek gÃ¶rdÃ¼ÄŸÃ¼nde, isteÄŸi <code class="language-plaintext highlighter-rouge">ProductsController</code> ve bu controllerâ€™Ä±n iÃ§indeki <code class="language-plaintext highlighter-rouge">index</code> eylemine gÃ¶nderecektir. Rails bu ÅŸekilde isteÄŸi iÅŸleyecek ve tarayÄ±cÄ±ya bir yanÄ±t dÃ¶ndÃ¼recektir.</p>

<p>Routeâ€™larÄ±mÄ±zda protokol, domain (alan adÄ±) veya sorgu parametrelerini belirtmemize gerek olmadÄ±ÄŸÄ±nÄ± fark edeceksiniz. Bunun temel nedeni; protokol ve domainâ€™in, isteÄŸin sunucunuza ulaÅŸmasÄ±nÄ± saÄŸlamasÄ±dÄ±r. Buradan, Rails isteÄŸi alÄ±r ve hangi routeâ€™larÄ±n tanÄ±mlandÄ±ÄŸÄ±na baÄŸlÄ± olarak isteÄŸe yanÄ±t vermek iÃ§in hangi yolu kullanacaÄŸÄ±nÄ± bilir. Sorgu parametreleri, Railsâ€™in isteÄŸe uygulamak iÃ§in kullanabileceÄŸi seÃ§enekler gibidir; bu nedenle genellikle controllerâ€™da verileri filtrelemek iÃ§in kullanÄ±lÄ±rlar.</p>

<picture class="flowdiagram">
  <source srcset="/assets/images/rails/getting_started/routing_dark.jpg" media="(prefers-color-scheme:dark)" />
  <img src="/assets/images/rails/getting_started/routing_light.jpg" />
</picture>

<p>BaÅŸka bir Ã¶rneÄŸe bakalÄ±m. Bu satÄ±rÄ± Ã¶nceki routeâ€™tan sonra ekleyin:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post</span> <span class="s2">"/products"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"products#create"</span>
</code></pre></div></div>

<p>Burada, Railsâ€™e â€œ/productsâ€ adresine POST isteklerini almasÄ±nÄ± ve bunlarÄ± <code class="language-plaintext highlighter-rouge">create</code> eylemini kullanarak <code class="language-plaintext highlighter-rouge">ProductsController</code> ile iÅŸlemesini sÃ¶yledik.</p>

<p>Routeâ€™larÄ±n belirli kalÄ±plara sahip URLâ€™ler ile eÅŸleÅŸmesi de gerekebilir. Peki bu nasÄ±l Ã§alÄ±ÅŸÄ±r?</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get</span> <span class="s2">"/products/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"products#show"</span>
</code></pre></div></div>

<p>Bu routeâ€™un iÃ§inde <code class="language-plaintext highlighter-rouge">:id</code> var. Buna <code class="language-plaintext highlighter-rouge">parametre</code> denir ve bu, daha sonra isteÄŸi iÅŸlemek iÃ§in kullanÄ±lmak Ã¼zere URLâ€™in bir bÃ¶lÃ¼mÃ¼nÃ¼ yakalar.</p>

<p>Bir kullanÄ±cÄ± <code class="language-plaintext highlighter-rouge">/products/1</code> Ã¶ÄŸesini ziyaret ederse, <code class="language-plaintext highlighter-rouge">:id</code> parametresi <code class="language-plaintext highlighter-rouge">1</code> olarak ayarlanÄ±r ve bu, controller eyleminde 1 IDâ€™sine sahip Product kaydÄ±nÄ± aramak ve gÃ¶rÃ¼ntÃ¼lemek iÃ§in kullanÄ±labilir. <code class="language-plaintext highlighter-rouge">/products/2</code>, IDâ€™si 2 olan Productâ€™Ä± gÃ¶rÃ¼ntÃ¼ler ve bu bÃ¶yle devam eder.</p>

<p>Route parametrelerinin Integer olmasÄ± da gerekmez.</p>

<p>Ã–rneÄŸin, makaleler iÃ§eren bir blogunuz olabilir ve <code class="language-plaintext highlighter-rouge">/blog/hello-world</code> ile aÅŸaÄŸÄ±daki routeâ€™u eÅŸleÅŸtirebilirsiniz:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get</span> <span class="s2">"/blog/:title"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"blog#show"</span>
</code></pre></div></div>

<p>Rails, <code class="language-plaintext highlighter-rouge">/blog/hello-world</code> iÃ§inden <code class="language-plaintext highlighter-rouge">hello-world</code> Ã¶ÄŸesini yakalayacaktÄ±r ve bu, eÅŸleÅŸen titleâ€™a sahip blog gÃ¶nderisini aramak iÃ§in kullanÄ±labilir.</p>

<h4 id="crud-routelarÄ±">CRUD Routeâ€™larÄ±</h4>

<p>Bir kaynak iÃ§in genellikle ihtiyaÃ§ duyacaÄŸÄ±nÄ±z 4 yaygÄ±n eylem vardÄ±r: Create (OluÅŸtur), Read (Oku), Update (GÃ¼ncelle), Delete (Sil) (CRUD). Bu da 8 tipik routeâ€™a karÅŸÄ±lÄ±k gelir:</p>

<ul>
  <li>Index - TÃ¼m kayÄ±tlarÄ± gÃ¶sterir</li>
  <li>New - Yeni bir kayÄ±t oluÅŸturmak iÃ§in bir form oluÅŸturur</li>
  <li>Create - Yeni form gÃ¶nderimini iÅŸler, hatalarÄ± ele alÄ±r ve kaydÄ± oluÅŸturur</li>
  <li>Show - Spesifik bir kaydÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in iÅŸler</li>
  <li>Edit - Spesifik bir kaydÄ± gÃ¼ncellemek iÃ§in bir formu iÅŸler</li>
  <li>Update (full - tam) - Edit formu gÃ¶nderimini yÃ¶netir, hatalarÄ± ele alÄ±r ve tÃ¼m kaydÄ± gÃ¼nceller ve genellikle bir PUT isteÄŸi tarafÄ±ndan tetiklenir.</li>
  <li>Update (partial - kÄ±smi) - Edit formu gÃ¶nderimini yÃ¶netir, hatalarÄ± ele alÄ±r ve kaydÄ±n belirli Ã¶zniteliklerini gÃ¼nceller ve genellikle bir PATCH isteÄŸi tarafÄ±ndan tetiklenir.</li>
  <li>Destroy - Spesifik bir kaydÄ± silmeyi yÃ¶netir</li>
</ul>

<p>Bu CRUD eylemleri iÃ§in aÅŸaÄŸÄ±daki ÅŸekilde routeâ€™lar ekleyebiliriz:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get</span> <span class="s2">"/products"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"products#index"</span>

<span class="n">get</span> <span class="s2">"/products/new"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"products#new"</span>
<span class="n">post</span> <span class="s2">"/products"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"products#create"</span>

<span class="n">get</span> <span class="s2">"/products/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"products#show"</span>

<span class="n">get</span> <span class="s2">"/products/:id/edit"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"products#edit"</span>
<span class="n">patch</span> <span class="s2">"/products/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"products#update"</span>
<span class="n">put</span> <span class="s2">"/products/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"products#update"</span>

<span class="n">delete</span> <span class="s2">"/products/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"products#destroy"</span>
</code></pre></div></div>

<h4 id="kaynak-routelar">Kaynak Routeâ€™lar</h4>

<p>Bu routeâ€™larÄ± her seferinde yazmak gereksizdir, bu yÃ¼zden Rails bunlarÄ± tanÄ±mlamak iÃ§in bir kÄ±sayol saÄŸlar. AynÄ± CRUD routeâ€™larÄ±nÄ±n tÃ¼mÃ¼nÃ¼ oluÅŸturmak iÃ§in yukarÄ±daki routeâ€™larÄ± bu tek satÄ±rla deÄŸiÅŸtirin:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resources</span> <span class="ss">:products</span>
</code></pre></div></div>

<div class="guide-alert guide-alert-info">
  <div class="guide-alert-icon">ğŸ’¡</div>
  <div class="guide-alert-content">
    TÃ¼m bu CRUD eylemlerini istemiyorsanÄ±z, tam olarak neye ihtiyacÄ±nÄ±z olduÄŸunu belirtirsiniz. AyrÄ±ntÄ±lar iÃ§in <a href="../routing/">Routing</a> bÃ¶lÃ¼mÃ¼ne gÃ¶z atÄ±n.
  </div>
</div>

<h3 id="route-komutlarÄ±">Route KomutlarÄ±</h3>

<p>Rails, uygulamanÄ±zÄ±n yanÄ±t verdiÄŸi tÃ¼m routeâ€™larÄ± gÃ¶rÃ¼ntÃ¼leyen bir komut saÄŸlar.</p>

<p>Terminalinizde aÅŸaÄŸÄ±daki komutu Ã§alÄ±ÅŸtÄ±rÄ±n.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails routes
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">resources :products</code> tarafÄ±ndan oluÅŸturulan routeâ€™larÄ±n Ã§Ä±ktÄ±sÄ±nÄ± aÅŸaÄŸÄ±daki ÅŸekilde gÃ¶receksiniz:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                                  Prefix Verb   URI Pattern                                                                                       Controller#Action
                                products GET    /products(.:format)                                                                               products#index
                                         POST   /products(.:format)                                                                               products#create
                             new_product GET    /products/new(.:format)                                                                           products#new
                            edit_product GET    /products/:id/edit(.:format)                                                                      products#edit
                                 product GET    /products/:id(.:format)                                                                           products#show
                                         PATCH  /products/:id(.:format)                                                                           products#update
                                         PUT    /products/:id(.:format)                                                                           products#update
                                         DELETE /products/:id(.:format)                                                                           products#destroy
</code></pre></div></div>

<p>AyrÄ±ca health checks gibi diÄŸer yerleÅŸik Rails Ã¶zelliklerinden gelen routeâ€™larÄ± da gÃ¶receksiniz.</p>

<h2 id="controller--action">Controller &amp; Action</h2>

<p>ArtÄ±k Products iÃ§in routeâ€™lar tanÄ±mladÄ±ÄŸÄ±mÄ±za gÃ¶re, bu URLâ€™lere gelen istekleri iÅŸlemek iÃ§in controller ve actionâ€™larÄ± uygulayalÄ±m.</p>

<p>Bu komut, bir index actionâ€™Ä± ile bir <code class="language-plaintext highlighter-rouge">ProductsController</code> oluÅŸturacaktÄ±r. Routeâ€™larÄ± zaten ayarladÄ±ÄŸÄ±mÄ±z iÃ§in, bir flag (aÅŸaÄŸÄ±daki â€“skip-routes) kullanarak bu kÄ±smÄ± atlayabiliriz.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate controller Products index <span class="nt">--skip-routes</span>
      create  app/controllers/products_controller.rb
      invoke  erb
      create    app/views/products
      create    app/views/products/index.html.erb
      invoke  test_unit
      create    <span class="nb">test</span>/controllers/products_controller_test.rb
      invoke  helper
      create    app/helpers/products_helper.rb
      invoke    test_unit
</code></pre></div></div>

<p>Bu komut controller iÃ§in bir avuÃ§ dosya oluÅŸturur:</p>

<ul>
  <li>Controllerâ€™Ä±n kendisini</li>
  <li>OluÅŸturduÄŸumuz controller iÃ§in bir views klasÃ¶rÃ¼</li>
  <li>Controller oluÅŸtururken belirttiÄŸimiz action iÃ§in bir view dosyasÄ±</li>
  <li>Bu controller iÃ§in bir test dosyasÄ±</li>
  <li>Viewâ€™lerdeki mantÄ±ÄŸÄ± ayÄ±klamak iÃ§in bir helper dosyasÄ±</li>
</ul>

<p>Åimdi <code class="language-plaintext highlighter-rouge">app/controllers/products_controller.rb</code> dosyasÄ±nda tanÄ±mlanan ProductsControllerâ€™a bir gÃ¶z atalÄ±m. Åuna benziyor:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ProductsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<div class="guide-alert guide-alert-warning">
  <div class="guide-alert-icon">ğŸ“</div>
  <div class="guide-alert-content">
    Dosya adÄ±nÄ±n <code>products_controller.rb</code> olduÄŸunu ve bu dosyanÄ±n tanÄ±mladÄ±ÄŸÄ± <code>ProductsController</code> sÄ±nÄ±fÄ±nÄ±n alt Ã§izgili hali olduÄŸunu fark edebilirsiniz. Bu kalÄ±p, Rails'in diÄŸer dillerde gÃ¶rdÃ¼ÄŸÃ¼nÃ¼z gibi <code>require</code> kullanmak zorunda kalmadan kodu otomatik olarak yÃ¼klemesine yardÄ±mcÄ± olur.
  </div>
</div>

<p>Buradaki <code class="language-plaintext highlighter-rouge">index</code> metodu bir Actionâ€™dÄ±r. BoÅŸ bir metot olmasÄ±na raÄŸmen, Rails varsayÄ±lan olarak eÅŸleÅŸen bir isme sahip bir ÅŸablon oluÅŸturacaktÄ±r.</p>

<p><code class="language-plaintext highlighter-rouge">index</code> actionâ€™Ä± <code class="language-plaintext highlighter-rouge">app/views/products/index.html.erb</code> dosyasÄ±nÄ± oluÅŸturacaktÄ±r. Bu dosyayÄ± kod editÃ¶rÃ¼mÃ¼zde aÃ§arsak, oluÅŸturduÄŸu HTMLâ€™i gÃ¶rÃ¼rÃ¼z.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Products#index<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>Find me in app/views/products/index.html.erb<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<h3 id="iÌ‡stek-oluÅŸturma">Ä°stek OluÅŸturma</h3>

<p>Bunu tarayÄ±cÄ±mÄ±zda gÃ¶relim. Ä°lk olarak, Rails sunucusunu baÅŸlatmak iÃ§in terminalinizde <code class="language-plaintext highlighter-rouge">bin/rails server</code> komutunu Ã§alÄ±ÅŸtÄ±rÄ±n. ArdÄ±ndan http://localhost:3000 adresini aÃ§Ä±n. Rails karÅŸÄ±lama sayfasÄ±nÄ± gÃ¶receksiniz.</p>

<p>TarayÄ±cÄ±da http://localhost:3000/products adresini aÃ§arsak, Rails product indexâ€™ini HTML olarak oluÅŸturacaktÄ±r.</p>

<p>TarayÄ±cÄ±mÄ±z <code class="language-plaintext highlighter-rouge">/products</code> isteÄŸinde bulundu ve Rails bu routeâ€™u <code class="language-plaintext highlighter-rouge">products#index</code> ile eÅŸleÅŸtirdi. Rails isteÄŸi <code class="language-plaintext highlighter-rouge">ProductsController</code>â€˜a gÃ¶nderdi ve <code class="language-plaintext highlighter-rouge">index</code> actionâ€™Ä±nÄ± Ã§aÄŸÄ±rdÄ±. Bu action boÅŸ olduÄŸu iÃ§in, Rails eÅŸleÅŸen ÅŸablonu <code class="language-plaintext highlighter-rouge">app/views/products/index.html.erb</code> adresinde iÅŸledi ve tarayÄ±cÄ±mÄ±za dÃ¶ndÃ¼rdÃ¼. Ã‡ok gÃ¼zel!</p>

<p><code class="language-plaintext highlighter-rouge">config/routes.rb</code> dosyasÄ±nÄ± aÃ§Ä±p bu satÄ±rÄ± eklersek eÄŸer, Railsâ€™e ana dizin routeâ€™unun Products index actionâ€™Ä±nÄ± render etmesi/ekranda gÃ¶stermesi gerektiÄŸini sÃ¶yleyebiliriz:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">root</span> <span class="s2">"products#index"</span>
</code></pre></div></div>

<p>Åimdi http://localhost:3000 adresini ziyaret ettiÄŸinizde, Rails Products#indexâ€™i oluÅŸturacaktÄ±r.</p>

<h3 id="Ã¶rnek-deÄŸiÅŸkenler">Ã–rnek DeÄŸiÅŸkenler</h3>

<p>Bunu bir adÄ±m daha ileri gÃ¶tÃ¼relim ve veritabanÄ±mÄ±zdan bazÄ± kayÄ±tlarÄ± render edelim.</p>

<p><code class="language-plaintext highlighter-rouge">index</code> actionâ€™Ä±nda bir veritabanÄ± sorgusu ekleyelim ve bunu bir instance variableâ€™a atayalÄ±m. Rails, viewâ€™lerle veri paylaÅŸmak iÃ§in instance variableâ€™larÄ± (@ ile baÅŸlayan deÄŸiÅŸkenler) kullanÄ±r.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ProductsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@products</span> <span class="o">=</span> <span class="no">Product</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">app/views/products/index.html.erb</code> dosyasÄ±nda HTMLâ€™i ÅŸu ERB ile deÄŸiÅŸtirebiliriz:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">debug</span> <span class="vi">@products</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>ERB, <a href="https://docs.ruby-lang.org/en/master/ERB.html">Embedded Ruby</a>â€˜nin kÄ±saltmasÄ±dÄ±r ve Rails ile dinamik olarak HTML oluÅŸturmak iÃ§in Ruby kodu Ã§alÄ±ÅŸtÄ±rmamÄ±zÄ± saÄŸlar. <code class="language-plaintext highlighter-rouge">&lt;%= %&gt;</code> etiketi ERBâ€™ye iÃ§indeki Ruby kodunu Ã§alÄ±ÅŸtÄ±rmasÄ±nÄ± ve dÃ¶nÃ¼ÅŸ deÄŸerini Ã§Ä±ktÄ± olarak vermesini sÃ¶yler. Bizim durumumuzda bu, <code class="language-plaintext highlighter-rouge">@products</code>â€˜Ä± alÄ±r, YAMLâ€™a dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r ve YAMLâ€™Ä± Ã§Ä±ktÄ± olarak verir.</p>

<p>Åimdi tarayÄ±cÄ±nÄ±zda http://localhost:3000/ adresini yenileyin, Ã§Ä±ktÄ±nÄ±n deÄŸiÅŸtiÄŸini gÃ¶receksiniz. GÃ¶rdÃ¼ÄŸÃ¼nÃ¼z ÅŸey, veritabanÄ±nÄ±zdaki kayÄ±tlarÄ±n YAML formatÄ±nda gÃ¶rÃ¼ntÃ¼lenmesidir.</p>

<p><code class="language-plaintext highlighter-rouge">debug</code> helperâ€™Ä±, hata ayÄ±klama konusunda yardÄ±mcÄ± olmak iÃ§in deÄŸiÅŸkenleri YAML formatÄ±nda yazdÄ±rÄ±r. Ã–rneÄŸin, dikkat etmeyip Ã§oÄŸul <code class="language-plaintext highlighter-rouge">@products</code> yerine tekil <code class="language-plaintext highlighter-rouge">@product</code> yazdÄ±ysanÄ±z, debug helperâ€™Ä± deÄŸiÅŸkenin controllerâ€™da doÄŸru ÅŸekilde ayarlanmadÄ±ÄŸÄ±nÄ± belirlemenize yardÄ±mcÄ± olabilir.</p>

<div class="guide-alert guide-alert-info">
  <div class="guide-alert-icon">ğŸ’¡</div>
  <div class="guide-alert-content">
    Mevcut olan daha fazla helper gÃ¶rmek iÃ§in <a href="../action_view_helpers/">Action View Helper KÄ±lavuzu</a>'na gÃ¶z atÄ±n.
  </div>
</div>

<p>TÃ¼m product/Ã¼rÃ¼n isimlerimizi render etmek iÃ§in <code class="language-plaintext highlighter-rouge">app/views/products/index.html.erb</code> dosyasÄ±nÄ± gÃ¼ncelleyelim.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Products<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"products"</span><span class="nt">&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@products</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">product</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">product</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>ERB kullanarak, bu kod <code class="language-plaintext highlighter-rouge">@products</code> <code class="language-plaintext highlighter-rouge">ActiveRecord::Relation</code> nesnesindeki her Ã¼rÃ¼n boyunca dÃ¶ngÃ¼ gerÃ§ekleÅŸtirir ve Ã¼rÃ¼n adÄ±nÄ± iÃ§eren bir <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> etiketi render eder.</p>

<p>Bu sefer yeni bir ERB etiketi de kullandÄ±k. <code class="language-plaintext highlighter-rouge">&lt;% %&gt;</code> Ruby kodunu deÄŸerlendirir ancak dÃ¶nÃ¼ÅŸ deÄŸerini Ã§Ä±ktÄ± olarak vermez. Bu, HTMLâ€™imizde istemediÄŸimiz bir array Ã§Ä±ktÄ±sÄ± verecek olan <code class="language-plaintext highlighter-rouge">@products.each</code>â€˜in Ã§Ä±ktÄ±sÄ±nÄ± yok sayar.</p>

<h3 id="crud-eylemleri">CRUD Eylemleri</h3>

<p>Birbirinden ayrÄ± Ã¼rÃ¼nlere eriÅŸebilmemiz gerekiyor. Bu, bir kaynaÄŸÄ± okumak iÃ§in CRUDâ€™daki Râ€™dir.</p>

<p><code class="language-plaintext highlighter-rouge">resources :products</code> routeâ€™umuzla bireysel Ã¼rÃ¼nler iÃ§in routeâ€™u zaten tanÄ±mladÄ±k. Bu, <code class="language-plaintext highlighter-rouge">products#show</code>â€˜a iÅŸaret eden <code class="language-plaintext highlighter-rouge">/products/:id</code> routeâ€™unu oluÅŸturur.</p>

<p>Åimdi bu actionâ€™Ä± <code class="language-plaintext highlighter-rouge">ProductsController</code>â€˜a eklememiz ve Ã§aÄŸrÄ±ldÄ±ÄŸÄ±nda ne olacaÄŸÄ±nÄ± tanÄ±mlamamÄ±z gerekiyor.</p>

<h3 id="Ã¼rÃ¼nleri-bireysel-olarak-gÃ¶sterme">ÃœrÃ¼nleri Bireysel Olarak GÃ¶sterme</h3>

<p>Products Controllerâ€™Ä± aÃ§Ä±n ve <code class="language-plaintext highlighter-rouge">show</code> actionâ€™Ä±nÄ± ÅŸu ÅŸekilde ekleyin:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ProductsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@products</span> <span class="o">=</span> <span class="no">Product</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@product</span> <span class="o">=</span> <span class="no">Product</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Buradaki <code class="language-plaintext highlighter-rouge">show</code> actionâ€™Ä± <em>tekil</em> <code class="language-plaintext highlighter-rouge">@product</code> tanÄ±mlar Ã§Ã¼nkÃ¼ veritabanÄ±ndan tek bir kayÄ±t yÃ¼klÃ¼yor, yani baÅŸka bir deyiÅŸle sÃ¶ylemek gerekirse: Bu, tek bir Ã¼rÃ¼nÃ¼ gÃ¶ster, demek. <code class="language-plaintext highlighter-rouge">index</code>â€˜te Ã§oÄŸul <code class="language-plaintext highlighter-rouge">@products</code> kullanÄ±rÄ±z Ã§Ã¼nkÃ¼ birden fazla Ã¼rÃ¼n yÃ¼klÃ¼yoruz.</p>

<p>VeritabanÄ±nÄ± sorgulamak iÃ§in istek parametrelerine eriÅŸmek amacÄ±yla <code class="language-plaintext highlighter-rouge">params</code> kullanÄ±rÄ±z. Bu durumda, <code class="language-plaintext highlighter-rouge">/products/:id</code> routeâ€™umuzdaki <code class="language-plaintext highlighter-rouge">:id</code>â€˜yi kullanÄ±yoruz. <code class="language-plaintext highlighter-rouge">/products/1</code> adresini ziyaret ettiÄŸimizde, params hashâ€™i <code class="language-plaintext highlighter-rouge">{id: 1}</code> iÃ§erir ve bu da <code class="language-plaintext highlighter-rouge">show</code> actionâ€™Ä±mÄ±zÄ±n veritabanÄ±ndan IDâ€™si <code class="language-plaintext highlighter-rouge">1</code> olan Productâ€™Ä± yÃ¼klemek iÃ§in <code class="language-plaintext highlighter-rouge">Product.find(1)</code> Ã§aÄŸÄ±rmasÄ±yla sonuÃ§lanÄ±r.</p>

<p>SÄ±rada show actionâ€™Ä± iÃ§in bir viewâ€™e ihtiyacÄ±mÄ±z var. Rails isimlendirme kurallarÄ±nÄ± takip ederek, <code class="language-plaintext highlighter-rouge">ProductsController</code>, <code class="language-plaintext highlighter-rouge">app/views</code> iÃ§indeki <code class="language-plaintext highlighter-rouge">products</code> alt klasÃ¶rÃ¼nde viewâ€™leri bekler.</p>

<p><code class="language-plaintext highlighter-rouge">show</code> actionâ€™Ä± <code class="language-plaintext highlighter-rouge">app/views/products/show.html.erb</code> adÄ±nda bir dosya bekler. Bu dosyayÄ± editÃ¶rÃ¼mÃ¼zde oluÅŸturalÄ±m ve aÅŸaÄŸÄ±daki iÃ§eriÄŸi ekleyelim:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@product</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Back"</span><span class="p">,</span> <span class="n">products_path</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Index sayfasÄ±nÄ±n her Ã¼rÃ¼n iÃ§in show sayfasÄ±na link vermesi faydalÄ± olur, bÃ¶ylece yÃ¶nlendirme iÃ§in onlara tÄ±klayabiliriz. <code class="language-plaintext highlighter-rouge">app/views/products/index.html.erb</code> viewâ€™i gÃ¼ncelleyerek <code class="language-plaintext highlighter-rouge">show</code> actionâ€™Ä±nÄ±n pathâ€™i iÃ§in bir anchor etiketi kullanarak bu yeni sayfaya link verebiliriz.</p>

<pre><code class="language-erb#6,8">&lt;h1&gt;Products&lt;/h1&gt;

&lt;div id="products"&gt;
  &lt;% @products.each do |product| %&gt;
    &lt;div&gt;
      &lt;a href="/products/&lt;%= product.id %&gt;"&gt;
        &lt;%= product.name %&gt;
      &lt;/a&gt;
    &lt;/div&gt;
  &lt;% end %&gt;
&lt;/div&gt;
</code></pre>

<p>Bu sayfayÄ± tarayÄ±cÄ±nÄ±zda yenileyin. Ã‡alÄ±ÅŸtÄ±ÄŸÄ±nÄ± gÃ¶receksiniz, ancak daha iyisini yapabiliriz.</p>

<p>Rails, pathâ€™ler ve URLâ€™ler oluÅŸturmak iÃ§in helper metotlarÄ± saÄŸlar. <code class="language-plaintext highlighter-rouge">bin/rails routes</code> komutunu Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±nÄ±zda Prefix sÃ¼tununu gÃ¶receksiniz. Bu prefixâ€™ler, Ruby kodu ile URL oluÅŸturmak iÃ§in kullanabileceÄŸiniz helperâ€™larla eÅŸleÅŸir.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                                  Prefix Verb   URI Pattern                                                                                       Controller#Action
                                products GET    /products(.:format)                                                                               products#index
                                 product GET    /products/:id(.:format)                                                                           products#show
</code></pre></div></div>

<p>Bu route prefixâ€™leri bize aÅŸaÄŸÄ±daki gibi helperâ€™lar verir:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">products_path</code> <code class="language-plaintext highlighter-rouge">"/products"</code> oluÅŸturur</li>
  <li><code class="language-plaintext highlighter-rouge">products_url</code> <code class="language-plaintext highlighter-rouge">"http://localhost:3000/products"</code> oluÅŸturur</li>
  <li><code class="language-plaintext highlighter-rouge">product_path(1)</code> <code class="language-plaintext highlighter-rouge">"/products/1"</code> oluÅŸturur</li>
  <li><code class="language-plaintext highlighter-rouge">product_url(1)</code> <code class="language-plaintext highlighter-rouge">"http://localhost:3000/products/1"</code> oluÅŸturur</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">_path</code> tarayÄ±cÄ±nÄ±n mevcut domain iÃ§in olduÄŸunu anladÄ±ÄŸÄ± gÃ¶receli (relative) bir path dÃ¶ndÃ¼rÃ¼r.</p>

<p><code class="language-plaintext highlighter-rouge">_url</code> protokol, host ve port dahil tam bir URL dÃ¶ndÃ¼rÃ¼r.</p>

<p>URL helperâ€™larÄ± tarayÄ±cÄ± dÄ±ÅŸÄ±nda gÃ¶rÃ¼ntÃ¼lenecek e-postalarÄ± render etmek iÃ§in faydalÄ±dÄ±r.</p>

<p><code class="language-plaintext highlighter-rouge">link_to</code> helperâ€™Ä±yla birleÅŸtirildiÄŸinde, anchor etiketleri oluÅŸturabilir ve bunu Rubyâ€™de temiz bir ÅŸekilde yapmak iÃ§in URL helperâ€™Ä±nÄ± kullanabiliriz. <code class="language-plaintext highlighter-rouge">link_to</code>, (<code class="language-plaintext highlighter-rouge">product.name</code>) linki iÃ§in gÃ¶rÃ¼ntÃ¼lecek iÃ§eriÄŸi  ve <code class="language-plaintext highlighter-rouge">href</code> Ã¶zelliÄŸi iÃ§in link verilecek path veya URLâ€™i (<code class="language-plaintext highlighter-rouge">product</code>) kabul eder.</p>

<p>Bu helperâ€™larÄ± kullanmak iÃ§in kodu refactor edelim:</p>

<pre><code class="language-erb#6">&lt;h1&gt;Products&lt;/h1&gt;

&lt;div id="products"&gt;
  &lt;% @products.each do |product| %&gt;
    &lt;div&gt;
      &lt;%= link_to product.name, product_path(product.id) %&gt;
    &lt;/div&gt;
  &lt;% end %&gt;
&lt;/div&gt;
</code></pre>

<h3 id="Ã¼rÃ¼n-oluÅŸturma">ÃœrÃ¼n OluÅŸturma</h3>

<p>Åimdiye kadar Ã¼rÃ¼nleri Rails konsolda oluÅŸturmak zorunda kaldÄ±k, ancak bunu tarayÄ±cÄ±da Ã§alÄ±ÅŸÄ±r hale getirelim.</p>

<p>Create iÃ§in iki action oluÅŸturmamÄ±z gerekiyor:</p>

<ol>
  <li>ÃœrÃ¼n bilgilerini toplamak iÃ§in yeni Ã¼rÃ¼n formu</li>
  <li>ÃœrÃ¼nÃ¼ kaydetmek ve hatalarÄ± kontrol etmek iÃ§in controllerâ€™da create actionâ€™Ä±</li>
</ol>

<p>Controller actionâ€™larÄ±mÄ±zla baÅŸlayalÄ±m.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ProductsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@products</span> <span class="o">=</span> <span class="no">Product</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@product</span> <span class="o">=</span> <span class="no">Product</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@product</span> <span class="o">=</span> <span class="no">Product</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">new</code> actionâ€™Ä± form alanlarÄ±nÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in kullanacaÄŸÄ±mÄ±z yeni bir <code class="language-plaintext highlighter-rouge">Product</code> Ã¶rneÄŸi oluÅŸturur.</p>

<p><code class="language-plaintext highlighter-rouge">app/views/products/index.html.erb</code> dosyasÄ±nÄ± new actionâ€™Ä±na link verecek ÅŸekilde gÃ¼ncelleyebiliriz.</p>

<pre><code class="language-erb#3">&lt;h1&gt;Products&lt;/h1&gt;

&lt;%= link_to "New product", new_product_path %&gt;

&lt;div id="products"&gt;
  &lt;% @products.each do |product| %&gt;
    &lt;div&gt;
      &lt;%= link_to product.name, product_path(product.id) %&gt;
    &lt;/div&gt;
  &lt;% end %&gt;
&lt;/div&gt;
</code></pre>

<p>Bu yeni <code class="language-plaintext highlighter-rouge">Product</code> iÃ§in formu render etmek amacÄ±yla <code class="language-plaintext highlighter-rouge">app/views/products/new.html.erb</code> dosyasÄ±nÄ± oluÅŸturalÄ±m.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>New product<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="vi">@product</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:name</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:name</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Bu viewâ€™de Ã¼rÃ¼n oluÅŸturmak iÃ§in HTML formu oluÅŸturmak amacÄ±yla Rails <code class="language-plaintext highlighter-rouge">form_with</code> helperâ€™Ä±nÄ± kullanÄ±yoruz. Bu helper; CSRF tokenâ€™lar, saÄŸlanan <code class="language-plaintext highlighter-rouge">model:</code> temelinde URL oluÅŸturma ve hatta submit butonu textâ€™ini modele gÃ¶re uyarlama gibi ÅŸeyleri iÅŸlemek iÃ§in bir <em>form builder</em> kullanÄ±r.</p>

<p>Bu sayfayÄ± tarayÄ±cÄ±nÄ±zda aÃ§Ä±p View Source yaparsanÄ±z, formun HTMLâ€™i ÅŸÃ¶yle gÃ¶rÃ¼necektir:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/products"</span> <span class="na">accept-charset=</span><span class="s">"UTF-8"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"authenticity_token"</span> <span class="na">value=</span><span class="s">"UHQSKXCaFqy_aoK760zpSMUPy6TMnsLNgbPMABwN1zpW-Jx6k-2mISiF0ulZOINmfxPdg5xMyZqdxSW1UK-H-Q"</span> <span class="na">autocomplete=</span><span class="s">"off"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"product_name"</span><span class="nt">&gt;</span>Name<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"product[name]"</span> <span class="na">id=</span><span class="s">"product_name"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">name=</span><span class="s">"commit"</span> <span class="na">value=</span><span class="s">"Create Product"</span> <span class="na">data-disable-with=</span><span class="s">"Create Product"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div></div>

<p>Form builder gÃ¼venlik iÃ§in bir CSRF token eklemiÅŸ, formu UTF-8 desteÄŸi iÃ§in yapÄ±landÄ±rmÄ±ÅŸ, input field isimlerini ayarlamÄ±ÅŸ ve hatta submit butonu iÃ§in disabled durumu eklemiÅŸtir.</p>

<p>Form builderâ€™a yeni bir <code class="language-plaintext highlighter-rouge">Product</code> Ã¶rneÄŸi geÃ§irdiÄŸimiz iÃ§in, otomatik olarak yeni bir kayÄ±t oluÅŸturmak iÃ§in varsayÄ±lan route olan <code class="language-plaintext highlighter-rouge">/products</code>â€˜a <code class="language-plaintext highlighter-rouge">POST</code> isteÄŸi gÃ¶nderecek ÅŸekilde yapÄ±landÄ±rÄ±lmÄ±ÅŸ bir form oluÅŸturdu.</p>

<p>Bunu iÅŸlemek iÃ§in Ã¶ncelikle controllerâ€™Ä±mÄ±zda <code class="language-plaintext highlighter-rouge">create</code> actionâ€™Ä±nÄ± uygulamamÄ±z gerekiyor.</p>

<pre><code class="language-ruby#14-26">class ProductsController &lt; ApplicationController
  def index
    @products = Product.all
  end

  def show
    @product = Product.find(params[:id])
  end

  def new
    @product = Product.new
  end

  def create
    @product = Product.new(product_params)
    if @product.save
      redirect_to @product
    else
      render :new, status: :unprocessable_entity
    end
  end

  private
    def product_params
      params.expect(product: [ :name ])
    end
end
</code></pre>

<h4 id="gÃ¼Ã§lÃ¼-parametreler">GÃ¼Ã§lÃ¼ Parametreler</h4>

<p><code class="language-plaintext highlighter-rouge">create</code> actionâ€™Ä± form tarafÄ±ndan gÃ¶nderilen veriyi iÅŸler, ancak gÃ¼venlik iÃ§in filtrelenmesi gerekir. Ä°ÅŸte <code class="language-plaintext highlighter-rouge">product_params</code> metodunun devreye girdiÄŸi yer burasÄ±dÄ±r.</p>

<p><code class="language-plaintext highlighter-rouge">product_params</code>â€˜ta Railsâ€™e, paramsâ€™Ä± incelemesini ve deÄŸer olarak bir parametre arrayâ€™i ile <code class="language-plaintext highlighter-rouge">:product</code> adÄ±nda bir anahtar (key) olduÄŸundan emin olmasÄ±nÄ± sÃ¶ylÃ¼yoruz. Products iÃ§in izin verilen tek parametre <code class="language-plaintext highlighter-rouge">:name</code>â€˜dir ve Rails diÄŸer tÃ¼m parametreleri yok sayacaktÄ±r. Bu, uygulamamÄ±zÄ± hackâ€™lemeye Ã§alÄ±ÅŸabilecek kÃ¶tÃ¼ niyetli kullanÄ±cÄ±lardan korur.</p>

<h4 id="hata-yÃ¶netimi">Hata YÃ¶netimi</h4>

<p>Bu paramsâ€™larÄ± yeni <code class="language-plaintext highlighter-rouge">Product</code>â€˜a atadÄ±ktan sonra, onu veritabanÄ±na kaydetmeyi deneyebiliriz. <code class="language-plaintext highlighter-rouge">@product.save</code> Active Recordâ€™a doÄŸrulamalarÄ± Ã§alÄ±ÅŸtÄ±rmasÄ±nÄ± ve kaydÄ± veritabanÄ±na kaydetmesini sÃ¶yler.</p>

<p><code class="language-plaintext highlighter-rouge">save</code> baÅŸarÄ±lÄ± olursa, yeni Ã¼rÃ¼ne yÃ¶nlendirmek istiyoruz. <code class="language-plaintext highlighter-rouge">redirect_to</code>â€˜ya bir Active Record nesnesi verildiÄŸinde, Rails o kaydÄ±n show actionâ€™Ä± iÃ§in bir path oluÅŸturur.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">redirect_to</span> <span class="vi">@product</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">@product</code> bir <code class="language-plaintext highlighter-rouge">Product</code> Ã¶rneÄŸi olduÄŸu iÃ§in, Rails model adÄ±nÄ± Ã§oÄŸullaÅŸtÄ±rÄ±r ve yÃ¶nlendirme yapmak iÃ§in <code class="language-plaintext highlighter-rouge">"/products/2"</code> Ã¼retmek amacÄ±yla nesnenin IDâ€™sini pathâ€™e dahil eder.</p>

<p><code class="language-plaintext highlighter-rouge">save</code> baÅŸarÄ±sÄ±z olduÄŸunda ve kayÄ±t geÃ§erli olmadÄ±ÄŸÄ±nda, kullanÄ±cÄ±nÄ±n geÃ§ersiz veriyi dÃ¼zeltebilmesi iÃ§in formu yeniden render etmek istiyoruz. <code class="language-plaintext highlighter-rouge">else</code> ile Railsâ€™e <code class="language-plaintext highlighter-rouge">render :new</code> geÃ§iyoruz. Rails <code class="language-plaintext highlighter-rouge">Products</code> controllerâ€™Ä±nda olduÄŸumuzu bilir, bu yÃ¼zden <code class="language-plaintext highlighter-rouge">app/views/products/new.html.erb</code> dosyasÄ±nÄ± render etmelidir. <code class="language-plaintext highlighter-rouge">create</code>â€˜te <code class="language-plaintext highlighter-rouge">@product</code> deÄŸiÅŸkenini ayarladÄ±ÄŸÄ±mÄ±z iÃ§in, o ÅŸablonu render edebiliriz ve form veritabanÄ±na kaydedilememiÅŸ olsa bile <code class="language-plaintext highlighter-rouge">Product</code> verimizle doldurulacaktÄ±r.</p>

<p>AyrÄ±ca tarayÄ±cÄ±ya bu POST isteÄŸinin baÅŸarÄ±sÄ±z olduÄŸunu ve buna gÃ¶re iÅŸlem yapmasÄ± gerektiÄŸini sÃ¶ylemek iÃ§in HTTP durumunu 422 Unprocessable Entity (Ä°ÅŸlenemeyen VarlÄ±k) olarak ayarlÄ±yoruz.</p>

<h3 id="Ã¼rÃ¼nleri-dÃ¼zenleme">ÃœrÃ¼nleri DÃ¼zenleme</h3>

<p>KayÄ±tlarÄ± dÃ¼zenleme sÃ¼reci kayÄ±t oluÅŸturmaya Ã§ok benzer. <code class="language-plaintext highlighter-rouge">new</code> ve <code class="language-plaintext highlighter-rouge">create</code> actionâ€™larÄ± yerine <code class="language-plaintext highlighter-rouge">edit</code> ve <code class="language-plaintext highlighter-rouge">update</code> ile bunlarÄ± yapacaÄŸÄ±z.</p>

<p>BunlarÄ± controllerâ€™da aÅŸaÄŸÄ±daki ÅŸekilde uygulayalÄ±m:</p>

<pre><code class="language-ruby#23-34">class ProductsController &lt; ApplicationController
  def index
    @products = Product.all
  end

  def show
    @product = Product.find(params[:id])
  end

  def new
    @product = Product.new
  end

  def create
    @product = Product.new(product_params)
    if @product.save
      redirect_to @product
    else
      render :new, status: :unprocessable_entity
    end
  end

  def edit
    @product = Product.find(params[:id])
  end

  def update
    @product = Product.find(params[:id])
    if @product.update(product_params)
      redirect_to @product
    else
      render :edit, status: :unprocessable_entity
    end
  end

  private
    def product_params
      params.expect(product: [ :name ])
    end
end
</code></pre>

<p>Daha sonra <code class="language-plaintext highlighter-rouge">app/views/products/show.html.erb</code> dosyasÄ±na bir â€œEditâ€ linki ekleyebiliriz:</p>

<pre><code class="language-erb#4">&lt;h1&gt;&lt;%= @product.name %&gt;&lt;/h1&gt;

&lt;%= link_to "Back", products_path %&gt;
&lt;%= link_to "Edit", edit_product_path(@product) %&gt;
</code></pre>

<h4 id="before-actionlar">Before Actionâ€™lar</h4>

<p><code class="language-plaintext highlighter-rouge">edit</code> ve <code class="language-plaintext highlighter-rouge">update</code> iÅŸlemleri <code class="language-plaintext highlighter-rouge">show</code> gibi mevcut bir veritabanÄ± kaydÄ± gerektirdiÄŸinden bunu <code class="language-plaintext highlighter-rouge">before_action</code> iÃ§ine kopyalayabiliriz.</p>

<p>Bir <code class="language-plaintext highlighter-rouge">before_action</code>, actionâ€™lar arasÄ±nda paylaÅŸÄ±lan kodu Ã§ekmenize ve actionâ€™dan <em>Ã¶nce</em> Ã§alÄ±ÅŸtÄ±rmanÄ±za olanak tanÄ±r. YukarÄ±daki controller kodunda <code class="language-plaintext highlighter-rouge">@product = Product.find(params[:id])</code> Ã¼Ã§ farklÄ± metotta tanÄ±mlanmÄ±ÅŸtÄ±r. Bu sorguyu <code class="language-plaintext highlighter-rouge">set_product</code> adlÄ± bir before actionâ€™a Ã§Ä±karmak her action iÃ§in kodumuzu temizler.</p>

<p>Bu, DRY (Donâ€™t Repeat Yourself - Kendini Tekrar Etme) felsefesinin Ã§alÄ±ÅŸan gÃ¼zel bir Ã¶rneÄŸidir.</p>

<pre><code class="language-ruby#2,8-9,24-25,27-33,36-38">class ProductsController &lt; ApplicationController
  before_action :set_product, only: %i[ show edit update ]

  def index
    @products = Product.all
  end

  def show
  end

  def new
    @product = Product.new
  end

  def create
    @product = Product.new(product_params)
    if @product.save
      redirect_to @product
    else
      render :new, status: :unprocessable_entity
    end
  end

  def edit
  end

  def update
    if @product.update(product_params)
      redirect_to @product
    else
      render :edit, status: :unprocessable_entity
    end
  end

  private
    def set_product
      @product = Product.find(params[:id])
    end

    def product_params
      params.expect(product: [ :name ])
    end
end
</code></pre>

<h4 id="partial-Ã§Ä±karma">Partial Ã‡Ä±karma</h4>

<p>Yeni Ã¼rÃ¼n oluÅŸturmak iÃ§in zaten bir form yazdÄ±k. Bunu edit ve update iÃ§in yeniden kullanabilsek gÃ¼zel olmaz mÄ±ydÄ±? Bir viewâ€™i birden fazla yerde yeniden kullanmanÄ±za olanak tanÄ±yan â€œpartialsâ€ adlÄ± bir Ã¶zellik kullanarak bunu yapabiliriz.</p>

<p>Formu <code class="language-plaintext highlighter-rouge">app/views/products/_form.html.erb</code> adlÄ± bir dosyaya taÅŸÄ±yabiliriz. Dosya adÄ± bunun bir partial olduÄŸunu belirtmek iÃ§in alt Ã§izgi ile baÅŸlar.</p>

<p>AyrÄ±ca herhangi bir instance variableâ€™Ä±, partialâ€™Ä± render ettiÄŸimizde tanÄ±mlayabileceÄŸimiz bir local variable (yerel deÄŸiÅŸken) ile deÄŸiÅŸtirmek istiyoruz. Bunu <code class="language-plaintext highlighter-rouge">@product</code>â€˜Ä± <code class="language-plaintext highlighter-rouge">product</code> ile deÄŸiÅŸtirerek yapacaÄŸÄ±z.</p>

<pre><code class="language-erb#1">&lt;%= form_with model: product do |form| %&gt;
  &lt;div&gt;
    &lt;%= form.label :name %&gt;
    &lt;%= form.text_field :name %&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;%= form.submit %&gt;
  &lt;/div&gt;
&lt;% end %&gt;
</code></pre>

<div class="guide-alert guide-alert-info">
  <div class="guide-alert-icon">ğŸ’¡</div>
  <div class="guide-alert-content">
    Local variable'lar kullanmak partial'larÄ±n aynÄ± sayfada her seferinde farklÄ± bir deÄŸerle birden fazla kez yeniden kullanÄ±lmasÄ±na olanak tanÄ±r. Bu, index sayfasÄ± gibi Ã¶ÄŸe listelerini render ederken iÅŸe yarar.
  </div>
</div>

<p>Bu partialâ€™Ä± <code class="language-plaintext highlighter-rouge">app/views/products/new.html.erb</code> viewâ€™inde kullanmak iÃ§in formu bir render Ã§aÄŸrÄ±sÄ±yla deÄŸiÅŸtirebiliriz:</p>

<pre><code class="language-erb#3">&lt;h1&gt;New product&lt;/h1&gt;

&lt;%= render "form", product: @product %&gt;
&lt;%= link_to "Cancel", products_path %&gt;
</code></pre>

<p>Form partial sayesinde edit viewâ€™i  neredeyse tamamen aynÄ± ÅŸey oluyor. <code class="language-plaintext highlighter-rouge">app/views/products/edit.html.erb</code> dosyasÄ±nÄ± aÅŸaÄŸÄ±dakilerle oluÅŸturalÄ±m:</p>

<pre><code class="language-erb#3">&lt;h1&gt;Edit product&lt;/h1&gt;

&lt;%= render "form", product: @product %&gt;
&lt;%= link_to "Cancel", @product %&gt;
</code></pre>

<p>View partialâ€™larÄ± hakkÄ±nda daha fazla bilgi edinmek iÃ§in <a href="../action_view_overview/">Action View KÄ±lavuzu</a>â€˜na gÃ¶z atÄ±n.</p>

<h3 id="Ã¼rÃ¼nleri-silme">ÃœrÃ¼nleri Silme</h3>

<p>UygulamamÄ±z gereken son Ã¶zellik ise Ã¼rÃ¼nleri silmek. <code class="language-plaintext highlighter-rouge">DELETE /products/:id</code> isteklerini iÅŸlemek iÃ§in <code class="language-plaintext highlighter-rouge">ProductsController</code>â€˜Ä±mÄ±za bir <code class="language-plaintext highlighter-rouge">destroy</code> actionâ€™Ä± ekleyeceÄŸiz.</p>

<p><code class="language-plaintext highlighter-rouge">before_action :set_product</code>â€˜a <code class="language-plaintext highlighter-rouge">destroy</code> eklemek, <code class="language-plaintext highlighter-rouge">@product</code> instance variableâ€™Ä±nÄ± diÄŸer actionâ€™lar iÃ§in yaptÄ±ÄŸÄ±mÄ±z ÅŸekilde ayarlamamÄ±zÄ± saÄŸlar.</p>

<pre><code class="language-ruby#2,35-38">class ProductsController &lt; ApplicationController
  before_action :set_product, only: %i[ show edit update destroy ]

  def index
    @products = Product.all
  end

  def show
  end

  def new
    @product = Product.new
  end

  def create
    @product = Product.new(product_params)
    if @product.save
      redirect_to @product
    else
      render :new, status: :unprocessable_entity
    end
  end

  def edit
  end

  def update
    if @product.update(product_params)
      redirect_to @product
    else
      render :edit, status: :unprocessable_entity
    end
  end

  def destroy
    @product.destroy
    redirect_to products_path
  end

  private
    def set_product
      @product = Product.find(params[:id])
    end

    def product_params
      params.expect(product: [ :name ])
    end
end
</code></pre>

<p>Bunun Ã§alÄ±ÅŸmasÄ± iÃ§in, <code class="language-plaintext highlighter-rouge">app/views/products/show.html.erb</code> dosyasÄ±na bir â€œDeleteâ€ butonu eklememiz gerekiyor:</p>

<pre><code class="language-erb#5">&lt;h1&gt;&lt;%= @product.name %&gt;&lt;/h1&gt;

&lt;%= link_to "Back", products_path %&gt;
&lt;%= link_to "Edit", edit_product_path(@product) %&gt;
&lt;%= button_to "Delete", @product, method: :delete, data: { turbo_confirm: "Are you sure?" } %&gt;
</code></pre>

<p><code class="language-plaintext highlighter-rouge">button_to</code>, iÃ§inde â€œDeleteâ€ yazÄ±lÄ± bir buton bulunan bir form oluÅŸturur. Bu butona tÄ±klandÄ±ÄŸÄ±nda, controllerâ€™Ä±mÄ±zdaki <code class="language-plaintext highlighter-rouge">destroy</code> actionâ€™Ä±nÄ± tetikleyen <code class="language-plaintext highlighter-rouge">/products/:id</code> adresine <code class="language-plaintext highlighter-rouge">DELETE</code> isteÄŸi oluÅŸturan formu gÃ¶nderir.</p>

<p><code class="language-plaintext highlighter-rouge">turbo_confirm</code> data Ã¶zelliÄŸi, Turbo JavaScript kÃ¼tÃ¼phanesine formu gÃ¶ndermeden Ã¶nce kullanÄ±cÄ±dan onay istemesini sÃ¶yler. Bunu kÄ±sa bir sÃ¼re sonra daha ayrÄ±ntÄ±lÄ± ÅŸekilde inceleyeceÄŸiz.</p>

<h2 id="kimlik-doÄŸrulama-ekleme">Kimlik DoÄŸrulama Ekleme</h2>

<p>Herkes Ã¼rÃ¼nleri dÃ¼zenleyebilir veya silebilir, ki bu gÃ¼venli deÄŸil. ÃœrÃ¼nleri yÃ¶netmek iÃ§in bir kullanÄ±cÄ±nÄ±n kimlik doÄŸrulamasÄ± (authentication) yapmÄ±ÅŸ olmasÄ±nÄ± gerektirerek biraz gÃ¼venlik ekleyelim.</p>

<p>Rails, kullanabileceÄŸimiz bir authentication generator ile birlikte gelir. User ve Session modelleri ile uygulamamÄ±za giriÅŸ yapmak iÃ§in gerekli controllerâ€™larÄ± ve viewâ€™leri oluÅŸturur.</p>

<p>Terminalinize geri dÃ¶nÃ¼n ve aÅŸaÄŸÄ±daki komutu Ã§alÄ±ÅŸtÄ±rÄ±n:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate authentication
</code></pre></div></div>

<p>ArdÄ±ndan veritabanÄ±na User ve Session tablolarÄ±nÄ± eklemek iÃ§in migrate ile deÄŸiÅŸiklikleri uygulayÄ±n.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails db:migrate
</code></pre></div></div>

<p>Bir User oluÅŸturmak iÃ§in Rails konsolunu aÃ§Ä±n.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails console
</code></pre></div></div>

<p>Rails konsolda User oluÅŸturmak iÃ§in <code class="language-plaintext highlighter-rouge">User.create!</code> metodunu kullanÄ±n. Ã–rnek yerine kendi e-posta ve ÅŸifrenizi kullanmaktan Ã§ekinmeyin.</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; User.create! email_address: "you@example.org", password: "s3cr3t", password_confirmation: "s3cr3t"
</span></code></pre></div></div>

<p>Generator tarafÄ±ndan eklenen <code class="language-plaintext highlighter-rouge">bcrypt</code> gemâ€™ini almasÄ± iÃ§in Rails sunucunuzu yeniden baÅŸlatÄ±n. BCrypt, kimlik doÄŸrulamasÄ± iÃ§in ÅŸifreleri gÃ¼venli bir ÅŸekilde hashâ€™lemek iÃ§in kullanÄ±lÄ±r.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails server
</code></pre></div></div>

<p>Herhangi bir sayfayÄ± ziyaret ettiÄŸinizde, Rails kullanÄ±cÄ± adÄ± ve ÅŸifre soracaktÄ±r. User kaydÄ±nÄ± oluÅŸtururken kullandÄ±ÄŸÄ±nÄ±z e-posta ve ÅŸifreyi girin.</p>

<p>http://localhost:3000/products/new adresini ziyaret ederek deneyin.</p>

<p>DoÄŸru kullanÄ±cÄ± adÄ± ve ÅŸifreyi girerseniz, geÃ§iÅŸ yapmanÄ±za izin verecektir. TarayÄ±cÄ±nÄ±z ayrÄ±ca bu kimlik bilgilerini gelecekteki istekler iÃ§in saklayacaktÄ±r, bÃ¶ylece her sayfa gÃ¶rÃ¼ntÃ¼lemesinde yazmanÄ±z gerekmez.</p>

<h3 id="log-out-ekleme">Log Out Ekleme</h3>

<p>Uygulamadan Ã§Ä±kÄ±ÅŸ yapmak iÃ§in <code class="language-plaintext highlighter-rouge">app/views/layouts/application.html.erb</code> dosyasÄ±nÄ±n Ã¼stÃ¼ne bir buton ekleyebiliriz. Bu layout, header veya footer gibi her sayfaya dahil etmek istediÄŸiniz HTMLâ€™i koyduÄŸunuz yerdir.</p>

<p><code class="language-plaintext highlighter-rouge">&lt;body&gt;</code> iÃ§ine â€œHomeâ€a bir link ve â€œLog outâ€ butonu ile kÃ¼Ã§Ã¼k bir <code class="language-plaintext highlighter-rouge">&lt;nav&gt;</code> bÃ¶lÃ¼mÃ¼ ekleyin ve <code class="language-plaintext highlighter-rouge">yield</code>â€˜i <code class="language-plaintext highlighter-rouge">&lt;main&gt;</code> etiketi ile sarÄ±n.</p>

<pre><code class="language-erb#5-8,10,12">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;!-- ... --&gt;
  &lt;body&gt;
    &lt;nav&gt;
      &lt;%= link_to "Home", root_path %&gt;
      &lt;%= button_to "Log out", session_path, method: :delete if authenticated? %&gt;
    &lt;/nav&gt;

    &lt;main&gt;
      &lt;%= yield %&gt;
    &lt;/main&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Bu, yalnÄ±zca kullanÄ±cÄ± kimliÄŸi doÄŸrulanmÄ±ÅŸsa Log out butonunu gÃ¶rÃ¼ntÃ¼leyecektir. TÄ±klandÄ±ÄŸÄ±nda, kullanÄ±cÄ±nÄ±n Ã§Ä±kÄ±ÅŸ yapmasÄ±nÄ± saÄŸlayacak olan session pathâ€™ine DELETE isteÄŸi gÃ¶nderecektir.</p>

<h3 id="doÄŸrulanmamÄ±ÅŸ-eriÅŸime-iÌ‡zin-verme">DoÄŸrulanmamÄ±ÅŸ EriÅŸime Ä°zin Verme</h3>

<p>Ancak store uygulamamÄ±zÄ±n product index ve show sayfalarÄ± herkese eriÅŸilebilir olmalÄ±dÄ±r. VarsayÄ±lan olarak, Rails authentication generator tÃ¼m sayfalarÄ± yalnÄ±zca kimliÄŸi doÄŸrulanan kullanÄ±cÄ±larla sÄ±nÄ±rlandÄ±racaktÄ±r.</p>

<p>Misafirlerin Ã¼rÃ¼nleri gÃ¶rÃ¼ntÃ¼lemesine izin vermek iÃ§in controllerâ€™Ä±mÄ±zda doÄŸrulanmamÄ±ÅŸ eriÅŸime (unauthenticated access) izin verebiliriz.</p>

<pre><code class="language-ruby#2">class ProductsController &lt; ApplicationController
  allow_unauthenticated_access only: %i[ index show ]
  # ...
end
</code></pre>

<p>Ã‡Ä±kÄ±ÅŸ yapÄ±n ve products index ve show sayfalarÄ±nÄ± ziyaret ederek kimlik doÄŸrulamasÄ± olmadan eriÅŸilebilir olduklarÄ±nÄ± gÃ¶rÃ¼n.</p>

<h3 id="linkleri-yalnÄ±zca-doÄŸrulanmÄ±ÅŸ-kullanÄ±cÄ±lar-iÃ§in-gÃ¶sterme">Linkleri YalnÄ±zca DoÄŸrulanmÄ±ÅŸ KullanÄ±cÄ±lar iÃ§in GÃ¶sterme</h3>

<p>YalnÄ±zca giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±lar Ã¼rÃ¼n oluÅŸturabileceÄŸi iÃ§in, <code class="language-plaintext highlighter-rouge">app/views/products/index.html.erb</code> viewâ€™ini yalnÄ±zca kullanÄ±cÄ± doÄŸrulanmÄ±ÅŸ ise yeni Ã¼rÃ¼n linkini gÃ¶rÃ¼ntÃ¼leyecek ÅŸekilde deÄŸiÅŸtirebiliriz.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"New product"</span><span class="p">,</span> <span class="n">new_product_path</span> <span class="k">if</span> <span class="n">authenticated?</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Log out butonuna tÄ±klayÄ±nca New linkinin gizlendiÄŸini gÃ¶receksiniz. http://localhost:3000/session/new adresinde yeniden giriÅŸ yaptÄ±ktan sonra index sayfasÄ±nda New linkini gÃ¶receksiniz.</p>

<p>Ä°steÄŸe baÄŸlÄ± olarak, kullanÄ±cÄ± doÄŸrulamasÄ± yapÄ±lmamÄ±ÅŸsa â€œLoginâ€ linki eklemek iÃ§in navbarâ€™a bu route iÃ§in bir link ekleyebilirsiniz.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Login"</span><span class="p">,</span> <span class="n">new_session_path</span> <span class="k">unless</span> <span class="n">authenticated?</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>AyrÄ±ca <code class="language-plaintext highlighter-rouge">app/views/products/show.html.erb</code> viewâ€™indeki â€œEditâ€ ve â€œDeleteâ€ linklerini yalnÄ±zca doÄŸrulama yapÄ±lmÄ±ÅŸsa gÃ¶rÃ¼ntÃ¼lenecek ÅŸekilde gÃ¼ncelleyebilirsiniz.</p>

<pre><code class="language-erb#4,7">&lt;h1&gt;&lt;%= @product.name %&gt;&lt;/h1&gt;

&lt;%= link_to "Back", products_path %&gt;
&lt;% if authenticated? %&gt;
  &lt;%= link_to "Edit", edit_product_path(@product) %&gt;
  &lt;%= button_to "Delete", @product, method: :delete, data: { turbo_confirm: "Are you sure?" } %&gt;
&lt;% end %&gt;
</code></pre>

<h2 id="Ã¼rÃ¼nleri-Ã¶nbelleÄŸe-alma">ÃœrÃ¼nleri Ã–nbelleÄŸe Alma</h2>

<p>Bazen bir sayfanÄ±n belirli bÃ¶lÃ¼mlerini Ã¶nbelleÄŸe almak (cache) performansÄ± artÄ±rabilir. Rails bu sÃ¼reci, varsayÄ±lan olarak gelen veritabanÄ± destekli bir cache store olan Solid Cache ile basitleÅŸtirir.</p>

<p><code class="language-plaintext highlighter-rouge">cache</code> metodunu kullanarak HTMLâ€™i Ã¶nbellekte saklayabiliriz. <code class="language-plaintext highlighter-rouge">app/views/products/show.html.erb</code> dosyasÄ±ndaki headerâ€™Ä± cacheâ€™leyelim.</p>

<pre><code class="language-erb#1,3">&lt;% cache @product do %&gt;
  &lt;h1&gt;&lt;%= @product.name %&gt;&lt;/h1&gt;
&lt;% end %&gt;
</code></pre>

<p><code class="language-plaintext highlighter-rouge">cache</code>â€˜e <code class="language-plaintext highlighter-rouge">@product</code> geÃ§irerek Rails, Ã¼rÃ¼n iÃ§in benzersiz bir cache anahtarÄ± oluÅŸturur. Active Record nesneleri <code class="language-plaintext highlighter-rouge">"products/1"</code> gibi bir String dÃ¶ndÃ¼ren bir <code class="language-plaintext highlighter-rouge">cache_key</code> metoduna sahiptir. Viewâ€™lerdeki <code class="language-plaintext highlighter-rouge">cache</code> helperâ€™Ä±, bunu template digest (ÅŸablon Ã¶zeti) ile birleÅŸtirerek bu HTML iÃ§in benzersiz bir anahtar oluÅŸturur.</p>

<p>GeliÅŸtirme sÄ±rasÄ±nda Ã¶nbelleÄŸe almayÄ± etkinleÅŸtirmek iÃ§in terminalinizde aÅŸaÄŸÄ±daki komutu Ã§alÄ±ÅŸtÄ±rÄ±n.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails dev:cache
</code></pre></div></div>

<p>Bir Ã¼rÃ¼nÃ¼n show actionâ€™Ä±nÄ± ziyaret ettiÄŸinizde (<code class="language-plaintext highlighter-rouge">/products/2</code> gibi), Rails sunucu loglarÄ±nÄ±zda yeni cache satÄ±rlarÄ±nÄ± gÃ¶receksiniz:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Read fragment views/products/show:a5a585f985894cd27c8b3d49bb81de3a/products/1-20240918154439539125 <span class="o">(</span>1.6ms<span class="o">)</span>
Write fragment views/products/show:a5a585f985894cd27c8b3d49bb81de3a/products/1-20240918154439539125 <span class="o">(</span>4.0ms<span class="o">)</span>
</code></pre></div></div>

<p>Bu sayfayÄ± ilk kez aÃ§tÄ±ÄŸÄ±mÄ±zda, Rails bir cache anahtarÄ± oluÅŸturacak ve cache storeâ€™da var olup olmadÄ±ÄŸÄ±nÄ± soracaktÄ±r. Bu <code class="language-plaintext highlighter-rouge">Read fragment</code> satÄ±rÄ±dÄ±r.</p>

<p>Bu, sayfanÄ±n ilk gÃ¶rÃ¼ntÃ¼lenmesi olduÄŸu iÃ§in cache mevcut deÄŸildir, bu yÃ¼zden HTML oluÅŸturulur ve Ã¶nbelleÄŸe yazÄ±lÄ±r. Bunu loglardaki <code class="language-plaintext highlighter-rouge">Write fragment</code> satÄ±rÄ± olarak gÃ¶rebiliriz.</p>

<p>SayfayÄ± yeniledikten sonra loglarÄ±n artÄ±k <code class="language-plaintext highlighter-rouge">Write fragment</code> iÃ§ermediÄŸini gÃ¶receksiniz.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Read fragment views/products/show:a5a585f985894cd27c8b3d49bb81de3a/products/1-20240918154439539125 <span class="o">(</span>1.3ms<span class="o">)</span>
</code></pre></div></div>

<p>Cache giriÅŸi son istek tarafÄ±ndan yazÄ±ldÄ±ÄŸÄ± iÃ§in Rails, ikinci istekte cache giriÅŸini bulur. Rails ayrÄ±ca, kayÄ±tlar gÃ¼ncellendiÄŸinde cache anahtarÄ±nÄ± deÄŸiÅŸtirir, bÃ¶ylece asla eski cache verisini render etmediÄŸinden emin olur.</p>

<p><a href="../caching_with_rails/">Rails ile Ã–nbelleÄŸe Alma</a> kÄ±lavuzunda daha fazla bilgi edinin.</p>

<h2 id="action-text-ile-zengin-metin-alanlarÄ±">Action Text ile Zengin Metin AlanlarÄ±</h2>

<p>BirÃ§ok uygulama, gÃ¶mÃ¼lÃ¼ Ã¶ÄŸeler (yani multimedya Ã¶ÄŸeleri) iÃ§eren zengin metinlere (rich text) ihtiyaÃ§ duyar ve Rails, Action Text ile bu iÅŸlevselliÄŸi kullanÄ±ma hazÄ±r olarak sunar.</p>

<p>Action Textâ€™i kullanmak iÃ§in Ã¶nce indirin:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails action_text:install
<span class="nv">$ </span>bundle <span class="nb">install</span>
<span class="nv">$ </span>bin/rails db:migrate
</code></pre></div></div>

<p>TÃ¼m yeni Ã¶zeliklerin yÃ¼klendiÄŸinden emin olmak iÃ§in Rails sunucunuzu yeniden baÅŸlatÄ±n.</p>

<p>Åimdi, Ã¼rÃ¼nÃ¼mÃ¼ze rich text aÃ§Ä±klama (description) alanÄ± ekleyelim.</p>

<p>Ä°lk olarak, <code class="language-plaintext highlighter-rouge">Product</code> modeline aÅŸaÄŸÄ±dakini ekleyin:</p>

<pre><code class="language-ruby#2">class Product &lt; ApplicationRecord
  has_rich_text :description
  validates :name, presence: true
end
</code></pre>

<p><code class="language-plaintext highlighter-rouge">app/views/products/_form.html.erb</code> iÃ§indeki submit butonundan Ã¶nce aÃ§Ä±klamayÄ± dÃ¼zenlemek iÃ§in zengin metin alanÄ± iÃ§erecek ÅŸekilde form artÄ±k gÃ¼ncellenebilir.</p>

<pre><code class="language-erb#4-7">&lt;%= form_with model: product do |form| %&gt;
  &lt;%# ... %&gt;
  &lt;div&gt;
    &lt;%= form.label :description, style: "display: block" %&gt;
    &lt;%= form.rich_textarea :description %&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;%= form.submit %&gt;
  &lt;/div&gt;
&lt;% end %&gt;
</code></pre>

<p>Controllerâ€™Ä±mÄ±zÄ±n da form gÃ¶nderildiÄŸinde bu yeni parametreye izin vermesi gerekiyor, bu yÃ¼zden <code class="language-plaintext highlighter-rouge">app/controllers/products_controller.rb</code> iÃ§inde izin verilen parametreleri descriptionâ€™Ä± iÃ§erecek ÅŸekilde gÃ¼ncelleyeceÄŸiz:</p>

<pre><code class="language-ruby#3">    # Sadece gÃ¼venilir parametrelerin listesine izin ver.
    def product_params
      params.expect(product: [ :name, :description ])
    end
</code></pre>

<p>AyrÄ±ca show viewâ€™ini de <code class="language-plaintext highlighter-rouge">app/views/products/show.html.erb</code> iÃ§indeki aÃ§Ä±klamayÄ± gÃ¶rÃ¼ntÃ¼leyecek ÅŸekilde gÃ¼ncellememiz gerekiyor:</p>

<pre><code class="language-erb#3">&lt;% cache @product do %&gt;
  &lt;h1&gt;&lt;%= @product.name %&gt;&lt;/h1&gt;
  &lt;%= @product.description %&gt;
&lt;% end %&gt;
</code></pre>

<p>Rails tarafÄ±ndan oluÅŸturulan cache anahtarÄ±, view deÄŸiÅŸtirildiÄŸinde de deÄŸiÅŸir. Bu, cacheâ€™in view ÅŸablonunun en son sÃ¼rÃ¼mÃ¼yle senkronize kalmasÄ±nÄ± saÄŸlar.</p>

<p>Yeni bir Ã¼rÃ¼n oluÅŸturun ve ona kalÄ±n ve italik metin iÃ§eren bir aÃ§Ä±klama ekleyin. Show sayfasÄ±nÄ±n biÃ§imlendirilmiÅŸ metni gÃ¶sterdiÄŸini ve Ã¼rÃ¼nÃ¼ dÃ¼zenlerken metin alanÄ±nda bu zengin metni koruduÄŸunu gÃ¶receksiniz.</p>

<p>Daha fazla bilgi edinmek iÃ§in <a href="../action_text_overview/">Action Text</a> sayfasÄ±na gÃ¶z atÄ±n.</p>

<h2 id="active-storage-ile-dosya-yÃ¼kleme">Active Storage ile Dosya YÃ¼kleme</h2>

<p>Action Text, Railsâ€™in dosya yÃ¼klemeyi kolaylaÅŸtÄ±ran Active Storage adlÄ± bir baÅŸka Ã¶zelliÄŸi Ã¼zerine inÅŸa edilmiÅŸtir.</p>

<p>Bir Ã¼rÃ¼nÃ¼ dÃ¼zenlemeyi ve bir gÃ¶rseli zengin metin editÃ¶rÃ¼ne sÃ¼rÃ¼klemeyi deneyin, ardÄ±ndan kaydÄ± gÃ¼ncelleyin. Railsâ€™in bu gÃ¶rseli yÃ¼klediÄŸini ve zengin metin editÃ¶rÃ¼ iÃ§inde iÅŸlediÄŸini gÃ¶receksiniz. Harika, deÄŸil mi?!</p>

<p>Active Storageâ€™Ä± doÄŸrudan da kullanabiliriz. <code class="language-plaintext highlighter-rouge">Product</code> modeline Ã¶ne Ã§Ä±kan bir gÃ¶rsel ekleyelim.</p>

<pre><code class="language-ruby#2">class Product &lt; ApplicationRecord
  has_one_attached :featured_image
  has_rich_text :description
  validates :name, presence: true
end
</code></pre>

<p>ArdÄ±ndan, submit butonundan Ã¶nce product formumuza bir dosya yÃ¼kleme alanÄ± ekleyebiliriz:</p>

<pre><code class="language-erb#4-7">&lt;%= form_with model: product do |form| %&gt;
  &lt;%# ... %&gt;
  &lt;div&gt;
    &lt;%= form.label :featured_image, style: "display: block" %&gt;
    &lt;%= form.file_field :featured_image, accept: "image/*" %&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;%= form.submit %&gt;
  &lt;/div&gt;
&lt;% end %&gt;
</code></pre>

<p><code class="language-plaintext highlighter-rouge">app/controllers/products_controller.rb</code> iÃ§inde <code class="language-plaintext highlighter-rouge">:featured_image</code>â€˜i izin verilen parametre olarak ekleyin:</p>

<pre><code class="language-ruby#3">    # Sadece gÃ¼venilir parametrelerin listesine izin ver.
    def product_params
      params.expect(product: [ :name, :description, :featured_image ])
    end
</code></pre>

<p>Son olarak, <code class="language-plaintext highlighter-rouge">app/views/products/show.html.erb</code> iÃ§inde Ã¼rÃ¼nÃ¼mÃ¼z iÃ§in Ã¶ne Ã§Ä±kan gÃ¶rseli gÃ¶rÃ¼ntÃ¼lemek istiyoruz. AÅŸaÄŸÄ±dakini en Ã¼ste ekleyin.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">image_tag</span> <span class="vi">@product</span><span class="p">.</span><span class="nf">featured_image</span> <span class="k">if</span> <span class="vi">@product</span><span class="p">.</span><span class="nf">featured_image</span><span class="p">.</span><span class="nf">attached?</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Bir Ã¼rÃ¼n iÃ§in gÃ¶rsel yÃ¼klemeyi deneyin. Kaydettikten sonra show sayfasÄ±nda gÃ¶rselin gÃ¶rÃ¼ntÃ¼lendiÄŸini gÃ¶receksiniz.</p>

<p>Daha fazla ayrÄ±ntÄ± iÃ§in <a href="../active_storage_overview/">Active Storage</a> sayfasÄ±na gÃ¶z atÄ±n.</p>

<h2 id="uluslararasÄ±laÅŸtÄ±rma-i18n">UluslararasÄ±laÅŸtÄ±rma (I18n)</h2>

<p>Rails, uygulamanÄ±zÄ± diÄŸer dillere Ã§evirmeyi kolaylaÅŸtÄ±rÄ±r.</p>

<p>Viewâ€™lerimizdeki <code class="language-plaintext highlighter-rouge">translate</code> veya <code class="language-plaintext highlighter-rouge">t</code> helperâ€™Ä±, isme gÃ¶re bir Ã§eviri arar ve mevcut locale iÃ§in metni dÃ¶ndÃ¼rÃ¼r.</p>

<p><code class="language-plaintext highlighter-rouge">app/views/products/index.html.erb</code> dosyasÄ±nda, header etiketini bir Ã§eviri kullanacak ÅŸekilde gÃ¼ncelleyelim.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="n">t</span> <span class="s2">"hello"</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>
</code></pre></div></div>

<p>SayfayÄ± yenilediÄŸimizde, header metni olarak <code class="language-plaintext highlighter-rouge">Hello world</code> gÃ¶rÃ¼yoruz. Peki bu nereden geldi?</p>

<p>VarsayÄ±lan dil Ä°ngilizce olduÄŸu iÃ§in Rails, locale altÄ±nda eÅŸleÅŸen bir anahtar iÃ§in <code class="language-plaintext highlighter-rouge">config/locales/en.yml</code> (<code class="language-plaintext highlighter-rouge">rails new</code> sÄ±rasÄ±nda oluÅŸturulan bir dosya) dosyasÄ±na bakar.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">en</span><span class="pi">:</span>
  <span class="na">hello</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Hello</span><span class="nv"> </span><span class="s">world"</span>
</code></pre></div></div>

<p>EditÃ¶rÃ¼mÃ¼zde TÃ¼rkÃ§e iÃ§in yeni bir locale dosyasÄ± oluÅŸturalÄ±m ve <code class="language-plaintext highlighter-rouge">config/locales/tr.yml</code> dosyasÄ±na bir Ã§eviri ekleyelim.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">tr</span><span class="pi">:</span>
  <span class="na">hello</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Merhaba</span><span class="nv"> </span><span class="s">dÃ¼nya"</span>
</code></pre></div></div>

<p>Railsâ€™e hangi localeâ€™i kullanacaÄŸÄ±nÄ± sÃ¶ylememiz gerekiyor. En basit seÃ§enek URLâ€™de bir locale parametresi aramaktÄ±r. Bunu <code class="language-plaintext highlighter-rouge">app/controllers/application_controller.rb</code> dosyasÄ±nda aÅŸaÄŸÄ±daki ÅŸekilde yapabiliriz:</p>

<pre><code class="language-ruby#4,6-9">class ApplicationController &lt; ActionController::Base
  # ...

  around_action :switch_locale

  def switch_locale(&amp;action)
    locale = params[:locale] || I18n.default_locale
    I18n.with_locale(locale, &amp;action)
  end
end
</code></pre>

<p>Bu, her istekte Ã§alÄ±ÅŸacak ve parametrelerde <code class="language-plaintext highlighter-rouge">locale</code> arayacak veya varsayÄ±lan localeâ€™e geri dÃ¶necektir. Ä°stek iÃ§in localeâ€™i ayarlar ve tamamlandÄ±ktan sonra sÄ±fÄ±rlar.</p>

<ul>
  <li>http://localhost:3000/products?locale=en adresini ziyaret edin, Ä°ngilizce Ã§eviriyi gÃ¶receksiniz.</li>
  <li>http://localhost:3000/products?locale=tr adresini ziyaret edin, TÃ¼rkÃ§e Ã§eviriyi gÃ¶receksiniz.</li>
  <li>http://localhost:3000/products adresini locale parametresi olmadan ziyaret edin, Ä°ngilizceâ€™ye geri dÃ¶necektir.</li>
</ul>

<p>Index headerâ€™Ä±nÄ± <code class="language-plaintext highlighter-rouge">"Hello world"</code> yerine gerÃ§ek bir Ã§eviri kullanacak ÅŸekilde gÃ¼ncelleyelim.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="n">t</span> <span class="s2">".title"</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>
</code></pre></div></div>

<div class="guide-alert guide-alert-info">
  <div class="guide-alert-icon">ğŸ’¡</div>
  <div class="guide-alert-content">
    <code>title</code>'Ä±n Ã¶nÃ¼ndeki <code>.</code>'yÄ± fark ettiniz mi? Bu, Rails'e gÃ¶receli (relative) locale aramasÄ± kullanmasÄ±nÄ± sÃ¶yler. GÃ¶receli aramalar, controller ve action'Ä± otomatik olarak anahtara dahil eder, bÃ¶ylece onlarÄ± her seferinde yazmanÄ±za gerek kalmaz. <code>.title</code> iÃ§in Ä°ngilizce locale ile  <code>en.products.index.title</code> aramasÄ± yapacaktÄ±r.
  </div>
</div>

<p><code class="language-plaintext highlighter-rouge">config/locales/en.yml</code> dosyasÄ±nda controller, view ve Ã§eviri adÄ±mÄ±zla eÅŸleÅŸecek ÅŸekilde <code class="language-plaintext highlighter-rouge">products</code> ve <code class="language-plaintext highlighter-rouge">index</code> altÄ±na <code class="language-plaintext highlighter-rouge">title</code> anahtarÄ±nÄ± eklemek istiyoruz.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">en</span><span class="pi">:</span>
  <span class="na">hello</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Hello</span><span class="nv"> </span><span class="s">world"</span>
  <span class="na">products</span><span class="pi">:</span>
    <span class="na">index</span><span class="pi">:</span>
      <span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Products"</span>
</code></pre></div></div>

<p>TÃ¼rkÃ§e locales dosyasÄ±nda da aynÄ± ÅŸeyi yapabiliriz:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">tr</span><span class="pi">:</span>
  <span class="na">hello</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Merhaba</span><span class="nv"> </span><span class="s">dÃ¼nya"</span>
  <span class="na">products</span><span class="pi">:</span>
    <span class="na">index</span><span class="pi">:</span>
      <span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ÃœrÃ¼nler"</span>
</code></pre></div></div>

<p>ArtÄ±k Ä°ngilizce localeâ€™i gÃ¶rÃ¼ntÃ¼lerken â€œProductsâ€, TÃ¼rkÃ§e localeâ€™i gÃ¶rÃ¼ntÃ¼lerken â€œÃœrÃ¼nlerâ€ gÃ¶receksiniz.</p>

<p><a href="../i18n/">Rails UluslararasÄ±laÅŸtÄ±rma (I18n) API</a> hakkÄ±nda daha fazla bilgi edinin.</p>

<h2 id="stok-bildirimleri-ekleme">Stok Bildirimleri Ekleme</h2>

<p>E-ticaret maÄŸazalarÄ±nÄ±n yaygÄ±n bir Ã¶zelliÄŸi, bir Ã¼rÃ¼n tekrar stokta olduÄŸunda bildirim almak iÃ§in e-posta aboneliÄŸidir. Railsâ€™in temellerini gÃ¶rdÃ¼ÄŸÃ¼mÃ¼ze gÃ¶re, bu Ã¶zelliÄŸi maÄŸazamÄ±za ekleyelim.</p>

<h3 id="temel-envanter-takibi">Temel Envanter Takibi</h3>

<p>Ä°lk olarak, stoÄŸu takip edebilmek iÃ§in Product modeline bir envanter sayÄ±sÄ± ekleyelim. Bu migrationâ€™Ä± aÅŸaÄŸÄ±daki komutla oluÅŸturabiliriz:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate migration AddInventoryCountToProducts inventory_count:integer
</code></pre></div></div>

<p>ArdÄ±ndan migrationâ€™Ä± Ã§alÄ±ÅŸtÄ±ralÄ±m.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails db:migrate
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">app/views/products/_form.html.erb</code> dosyasÄ±ndaki product formuna envanter sayÄ±sÄ±nÄ± eklememiz gerekecek.</p>

<pre><code class="language-erb#4-7">&lt;%= form_with model: product do |form| %&gt;
  &lt;%# ... %&gt;

  &lt;div&gt;
    &lt;%= form.label :inventory_count, style: "display: block" %&gt;
    &lt;%= form.number_field :inventory_count %&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;%= form.submit %&gt;
  &lt;/div&gt;
&lt;% end %&gt;
</code></pre>

<p>AyrÄ±ca controllerâ€™da  izin verilen parametrelere <code class="language-plaintext highlighter-rouge">:inventory_count</code>â€˜un eklenmesi gerekiyor.</p>

<pre><code class="language-ruby#2">    def product_params
      params.expect(product: [ :name, :description, :featured_image, :inventory_count ])
    end
</code></pre>

<p>Envanter sayÄ±mÄ±zÄ±n asla negatif bir sayÄ± olmamasÄ±nÄ± doÄŸrulamak da yararlÄ± olacaktÄ±r, bu yÃ¼zden modelimize bunun iÃ§in bir validation da ekleyelim.</p>

<pre><code class="language-ruby#6">class Product &lt; ApplicationRecord
  has_one_attached :featured_image
  has_rich_text :description

  validates :name, presence: true
  validates :inventory_count, numericality: { greater_than_or_equal_to: 0 }
end
</code></pre>

<p>Bu deÄŸiÅŸikliklerle artÄ±k maÄŸazamÄ±zdaki Ã¼rÃ¼nlerin envanter sayÄ±sÄ±nÄ± gÃ¼ncelleyebiliriz.</p>

<h3 id="Ã¼rÃ¼nlere-abone-ekleme">ÃœrÃ¼nlere Abone Ekleme</h3>

<p>KullanÄ±cÄ±lara bir Ã¼rÃ¼nÃ¼n tekrar stokta olduÄŸunu bildirmek iÃ§in, bu aboneleri takip etmemiz gerekiyor.</p>

<p>Bu e-posta adreslerini saklamak ve bunlarÄ± ilgili Ã¼rÃ¼nle iliÅŸkilendirmek iÃ§in Subscriber adlÄ± bir model oluÅŸturalÄ±m.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate model Subscriber product:belongs_to email
</code></pre></div></div>

<p>ArdÄ±ndan yeni migrationâ€™Ä± Ã§alÄ±ÅŸtÄ±rÄ±n:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails db:migrate
</code></pre></div></div>

<p>YukarÄ±da <code class="language-plaintext highlighter-rouge">product:belongs_to</code> ekleyerek Railsâ€™e aboneler ve Ã¼rÃ¼nlerin bire-Ã§ok iliÅŸkisi olduÄŸunu sÃ¶yledik, yani bir Subscriber tek bir Product instanceâ€™Ä±na â€œaitâ€.</p>

<p>Ancak bir Product birÃ§ok aboneye sahip olabilir, bu yÃ¼zden Product modelimize <code class="language-plaintext highlighter-rouge">has_many :subscribers, dependent: :destroy</code> ekleyerek bu iki model arasÄ±ndaki iliÅŸkinin ikinci kÄ±smÄ±nÄ± ekliyoruz. Bu, Railsâ€™e iki veritabanÄ± tablosu arasÄ±ndaki sorgularÄ± nasÄ±l birleÅŸtireceÄŸini sÃ¶yler.</p>

<pre><code class="language-ruby#2">class Product &lt; ApplicationRecord
  has_many :subscribers, dependent: :destroy
  has_one_attached :featured_image
  has_rich_text :description

  validates :name, presence: true
  validates :inventory_count, numericality: { greater_than_or_equal_to: 0 }
end
</code></pre>

<p>Åimdi bu aboneleri oluÅŸturmak iÃ§in bir controllerâ€™a ihtiyacÄ±mÄ±z var. Bunu <code class="language-plaintext highlighter-rouge">app/controllers/subscribers_controller.rb</code> dosyasÄ±nda aÅŸaÄŸÄ±daki kodla oluÅŸturalÄ±m:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">SubscribersController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="n">allow_unauthenticated_access</span>
  <span class="n">before_action</span> <span class="ss">:set_product</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@product</span><span class="p">.</span><span class="nf">subscribers</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="n">subscriber_params</span><span class="p">).</span><span class="nf">first_or_create</span>
    <span class="n">redirect_to</span> <span class="vi">@product</span><span class="p">,</span> <span class="ss">notice: </span><span class="s2">"You are now subscribed."</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">set_product</span>
    <span class="vi">@product</span> <span class="o">=</span> <span class="no">Product</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:product_id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">subscriber_params</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">expect</span><span class="p">(</span><span class="ss">subscriber: </span><span class="p">[</span> <span class="ss">:email</span> <span class="p">])</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>YÃ¶nlendirmemiz Rails flashâ€™inde bir notice ayarlar. Flash, bir sonraki sayfada gÃ¶sterilecek mesajlarÄ± saklamak iÃ§in kullanÄ±lÄ±r.</p>

<p>Flash mesajÄ±nÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in noticeâ€™i <code class="language-plaintext highlighter-rouge">app/views/layouts/application.html.erb</code> dosyasÄ±nda body iÃ§ine ekleyelim:</p>

<pre><code class="language-erb#4">&lt;html&gt;
  &lt;!-- ... --&gt;
  &lt;body&gt;
    &lt;div class="notice"&gt;&lt;%= notice %&gt;&lt;/div&gt;
    &lt;!-- ... --&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>KullanÄ±cÄ±larÄ±n belirli bir Ã¼rÃ¼ne abone olmasÄ± iÃ§in, iÃ§ iÃ§e route kullanacaÄŸÄ±z. BÃ¶ylece abonenin hangi Ã¼rÃ¼ne ait olduÄŸunu biliyor olacaÄŸÄ±z. <code class="language-plaintext highlighter-rouge">config/routes.rb</code> dosyasÄ±nda <code class="language-plaintext highlighter-rouge">resources :products</code>â€˜Ä± aÅŸaÄŸÄ±daki ÅŸekilde deÄŸiÅŸtirin:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">resources</span> <span class="ss">:products</span> <span class="k">do</span>
    <span class="n">resources</span> <span class="ss">:subscribers</span><span class="p">,</span> <span class="ss">only: </span><span class="p">[</span> <span class="ss">:create</span> <span class="p">]</span>
  <span class="k">end</span>
</code></pre></div></div>

<p>Product show sayfasÄ±nda envanter olup olmadÄ±ÄŸÄ±nÄ± kontrol edebilir ve stok miktarÄ±nÄ± gÃ¶rÃ¼ntÃ¼leyebiliriz. Bunun dÄ±ÅŸÄ±nda, tekrar stokta olduÄŸunda bildirim almak iÃ§in abone olma formuyla birlikte stokta yok mesajÄ± gÃ¶rÃ¼ntÃ¼leyebiliriz.</p>

<p><code class="language-plaintext highlighter-rouge">app/views/products/_inventory.html.erb</code> adresinde yeni bir partial oluÅŸturun ve aÅŸaÄŸÄ±dakini ekleyin:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">product</span><span class="p">.</span><span class="nf">inventory_count?</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">product</span><span class="p">.</span><span class="nf">inventory_count</span> <span class="cp">%&gt;</span> in stock<span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">else</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>Out of stock<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>Email me when available.<span class="nt">&lt;/p&gt;</span>

  <span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="p">[</span><span class="n">product</span><span class="p">,</span> <span class="no">Subscriber</span><span class="p">.</span><span class="nf">new</span><span class="p">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">email_field</span> <span class="ss">:email</span><span class="p">,</span> <span class="ss">placeholder: </span><span class="s2">"you@example.com"</span><span class="p">,</span> <span class="ss">required: </span><span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="s2">"Submit"</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>ArdÄ±ndan <code class="language-plaintext highlighter-rouge">app/views/products/show.html.erb</code> dosyasÄ±nÄ± <code class="language-plaintext highlighter-rouge">cache</code> bloÄŸundan sonra bu partialâ€™Ä± render edecek ÅŸekilde gÃ¼ncelleyin.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"inventory"</span><span class="p">,</span> <span class="ss">product: </span><span class="vi">@product</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<h3 id="stok-e-posta-bildirimleri">Stok E-posta Bildirimleri</h3>

<p>Action Mailer, Railsâ€™in e-posta gÃ¶ndermenizi saÄŸlayan bir Ã¶zelliÄŸidir. Bir Ã¼rÃ¼n tekrar stokta olduÄŸunda aboneleri bilgilendirmek iÃ§in kullanacaÄŸÄ±z.</p>

<p>AÅŸaÄŸÄ±daki komutla bir mailer oluÅŸturabiliriz:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails g mailer Product in_stock
</code></pre></div></div>

<p>Bu, bir <code class="language-plaintext highlighter-rouge">in_stock</code> metoduyla <code class="language-plaintext highlighter-rouge">app/mailers/product_mailer.rb</code> adresinde bir sÄ±nÄ±f oluÅŸturur.</p>

<p>Bu metodu bir abonenin e-posta adresine posta gÃ¶ndermek iÃ§in gÃ¼ncelleyin.</p>

<pre><code class="language-ruby#7-10">class ProductMailer &lt; ApplicationMailer
  # .subject, config/locales/en.yml adresindeki I18n dosyanÄ±zda
  # aÅŸaÄŸÄ±daki arama ile ayarlanabilir:
  #
  #   en.product_mailer.in_stock.subject
  #
  def in_stock
    @product = params[:product]
    mail to: params[:subscriber].email
  end
end
</code></pre>

<p>Mailer generator ayrÄ±ca views klasÃ¶rÃ¼mÃ¼zde iki e-posta ÅŸablonu oluÅŸturur: Biri HTML iÃ§in, diÄŸeri Text iÃ§in. BunlarÄ± Ã¼rÃ¼ne bir mesaj ve baÄŸlantÄ± iÃ§erecek ÅŸekilde gÃ¼ncelleyebiliriz.</p>

<p><code class="language-plaintext highlighter-rouge">app/views/product_mailer/in_stock.html.erb</code> dosyasÄ±nÄ± ÅŸu ÅŸekilde deÄŸiÅŸtirin:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Good news!<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="vi">@product</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span> <span class="n">product_url</span><span class="p">(</span><span class="vi">@product</span><span class="p">)</span> <span class="cp">%&gt;</span> is back in stock.<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<p>Ve <code class="language-plaintext highlighter-rouge">app/views/product_mailer/in_stock.text.erb</code> dosyasÄ±nÄ± da:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Good news!

<span class="cp">&lt;%=</span> <span class="vi">@product</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span> is back in stock.
<span class="cp">&lt;%=</span> <span class="n">product_url</span><span class="p">(</span><span class="vi">@product</span><span class="p">)</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Mailerâ€™larda <code class="language-plaintext highlighter-rouge">product_path</code> yerine <code class="language-plaintext highlighter-rouge">product_url</code> kullanÄ±yoruz Ã§Ã¼nkÃ¼ e-posta istemcilerinin baÄŸlantÄ±ya tÄ±klandÄ±ÄŸÄ±nda tarayÄ±cÄ±da aÃ§mak iÃ§in tam URLâ€™i bilmesi gerekiyor.</p>

<p>Rails konsolunu aÃ§Ä±p gÃ¶ndereceÄŸimiz bir Ã¼rÃ¼n ve aboneyi yÃ¼kleyerek bir e-postayÄ± test edebiliriz:</p>

<div class="language-irb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">store(dev)&gt; product = Product.first
store(dev)&gt; subscriber = product.subscribers.find_or_create_by(email: "subscriber@example.org")
store(dev)&gt; ProductMailer.with(product: product, subscriber: subscriber).in_stock.deliver_later
</span></code></pre></div></div>

<p>Loglarda bir e-posta yazdÄ±rdÄ±ÄŸÄ±nÄ± gÃ¶receksiniz.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ProductMailer#in_stock: processed outbound mail in 63.0ms
Delivered mail 66a3a9afd5d4a_108b04a4c41443@local.mail (33.1ms)
Date: Fri, 26 Jul 2024 08:50:39 -0500
From: from@example.com
To: subscriber@example.com
Message-ID: &lt;66a3a9afd5d4a_108b04a4c41443@local.mail&gt;
Subject: In stock
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_66a3a9afd235e_108b04a4c4136f";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_66a3a9afd235e_108b04a4c4136f
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Good news!

T-Shirt is back in stock.
http://localhost:3000/products/1


----==_mimepart_66a3a9afd235e_108b04a4c4136f
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

&lt;!-- BEGIN app/views/layouts/mailer.html.erb --&gt;&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
    &lt;style&gt;
      /* Email styles need to be inline */
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;!-- BEGIN app/views/product_mailer/in_stock.html.erb --&gt;&lt;h1&gt;Good news!&lt;/h1&gt;

&lt;p&gt;&lt;a href="http://localhost:3000/products/1"&gt;T-Shirt&lt;/a&gt; is back in stock.&lt;/p&gt;
&lt;!-- END app/views/product_mailer/in_stock.html.erb --&gt;
  &lt;/body&gt;
&lt;/html&gt;
&lt;!-- END app/views/layouts/mailer.html.erb --&gt;
----==_mimepart_66a3a9afd235e_108b04a4c4136f--

Performed ActionMailer::MailDeliveryJob (Job ID: 5e2bd5f2-f54f-4088-ace3-3f6eb15aaf46) from Async(default) in 111.34ms
</code></pre></div></div>

<p>Bu e-postalarÄ± tetiklemek iÃ§in Product modelinde envanter sayÄ±sÄ± 0â€™dan pozitif bir sayÄ±ya deÄŸiÅŸtiÄŸinde e-posta gÃ¶ndermek iÃ§in bir callback kullanabiliriz.</p>

<pre><code class="language-ruby#9-19">class Product &lt; ApplicationRecord
  has_many :subscribers, dependent: :destroy
  has_one_attached :featured_image
  has_rich_text :description

  validates :name, presence: true
  validates :inventory_count, numericality: { greater_than_or_equal_to: 0 }

  after_update_commit :notify_subscribers, if: :back_in_stock?

  def back_in_stock?
    inventory_count_previously_was.zero? &amp;&amp; inventory_count &gt; 0
  end

  def notify_subscribers
    subscribers.each do |subscriber|
      ProductMailer.with(product: self, subscriber: subscriber).in_stock.deliver_later
    end
  end
end
</code></pre>

<p><code class="language-plaintext highlighter-rouge">after_update_commit</code>, deÄŸiÅŸiklikler veritabanÄ±na kaydedildikten sonra tetiklenen bir Active Record callbackâ€™idir. <code class="language-plaintext highlighter-rouge">if: :back_in_stock?</code>, callbackâ€™e yalnÄ±zca <code class="language-plaintext highlighter-rouge">back_in_stock?</code> metodu true dÃ¶ndÃ¼rÃ¼rse Ã§alÄ±ÅŸmasÄ±nÄ± sÃ¶yler.</p>

<p>Active Record, Ã¶zniteliklerdeki deÄŸiÅŸiklikleri takip eder, bu yÃ¼zden <code class="language-plaintext highlighter-rouge">back_in_stock?</code>, <code class="language-plaintext highlighter-rouge">inventory_count_previously_was</code> kullanarak <code class="language-plaintext highlighter-rouge">inventory_count</code>â€˜un Ã¶nceki deÄŸerini kontrol eder. ArdÄ±ndan bunu mevcut envanter sayÄ±sÄ±yla karÅŸÄ±laÅŸtÄ±rarak Ã¼rÃ¼nÃ¼n tekrar stokta olup olmadÄ±ÄŸÄ±nÄ± belirleyebiliriz.</p>

<p><code class="language-plaintext highlighter-rouge">notify_subscribers</code>, bu belirli Ã¼rÃ¼n iÃ§in tÃ¼m aboneler iÃ§in <code class="language-plaintext highlighter-rouge">subscribers</code> tablosunu sorgulamak Ã¼zere Active Record iliÅŸkisini kullanÄ±r ve ardÄ±ndan her birine gÃ¶nderilecek <code class="language-plaintext highlighter-rouge">in_stock</code> e-postasÄ±nÄ± kuyruÄŸa alÄ±r.</p>

<h3 id="bir-concern-Ã§Ä±karma">Bir Concern Ã‡Ä±karma</h3>

<p>Product modeli artÄ±k bildirimleri iÅŸlemek iÃ§in makul miktarda koda sahip. Kodumuzu daha iyi organize etmek iÃ§in bunu bir <code class="language-plaintext highlighter-rouge">ActiveSupport::Concern</code>â€˜e Ã§Ä±karabiliriz. Bir Concern, bunlarÄ± kullanmayÄ± kolaylaÅŸtÄ±rmak iÃ§in bazÄ± syntactic sugar iÃ§eren bir Ruby modÃ¼lÃ¼dÃ¼r. (Not: Syntactic sugar; bir programlama dilinde belirli iÅŸlevleri daha okunabilir ve kullanÄ±cÄ± dostu hale getirmek iÃ§in eklenen sÃ¶zdizimi Ã¶ÄŸeleridir.)</p>

<p>Ä°lk olarak Notifications modÃ¼lÃ¼nÃ¼ oluÅŸturalÄ±m.</p>

<p><code class="language-plaintext highlighter-rouge">app/models/product/notifications.rb</code> adresinde aÅŸaÄŸÄ±daki iÃ§erikle bir dosya oluÅŸturun:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">Product::Notifications</span>
  <span class="kp">extend</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Concern</span>

  <span class="n">included</span> <span class="k">do</span>
    <span class="n">has_many</span> <span class="ss">:subscribers</span><span class="p">,</span> <span class="ss">dependent: :destroy</span>
    <span class="n">after_update_commit</span> <span class="ss">:notify_subscribers</span><span class="p">,</span> <span class="ss">if: :back_in_stock?</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">back_in_stock?</span>
    <span class="n">inventory_count_previously_was</span><span class="p">.</span><span class="nf">zero?</span> <span class="o">&amp;&amp;</span> <span class="n">inventory_count</span> <span class="o">&gt;</span> <span class="mi">0</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">notify_subscribers</span>
    <span class="n">subscribers</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">subscriber</span><span class="o">|</span>
      <span class="no">ProductMailer</span><span class="p">.</span><span class="nf">with</span><span class="p">(</span><span class="ss">product: </span><span class="nb">self</span><span class="p">,</span> <span class="ss">subscriber: </span><span class="n">subscriber</span><span class="p">).</span><span class="nf">in_stock</span><span class="p">.</span><span class="nf">deliver_later</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Bir sÄ±nÄ±fa bir modÃ¼l dahil ettiÄŸinizde, <code class="language-plaintext highlighter-rouge">included</code> bloÄŸunun iÃ§indeki herhangi bir kod o sÄ±nÄ±fÄ±n parÃ§asÄ±ymÄ±ÅŸ gibi Ã§alÄ±ÅŸÄ±r. AynÄ± zamanda, modÃ¼lde tanÄ±mlanan metotlar o sÄ±nÄ±fÄ±n nesnelerinde (instanceâ€™larÄ±nda) Ã§aÄŸÄ±rabileceÄŸiniz normal metotlar haline gelir.</p>

<p>Bildirim tetikleyen kod Notification modÃ¼lÃ¼ne Ã§Ä±karÄ±ldÄ±ÄŸÄ±na gÃ¶re, Product modeli Notifications modÃ¼lÃ¼nÃ¼ dahil edecek ÅŸekilde basitleÅŸtirilebilir.</p>

<pre><code class="language-ruby#2">class Product &lt; ApplicationRecord
  include Notifications

  has_one_attached :featured_image
  has_rich_text :description

  validates :name, presence: true
  validates :inventory_count, numericality: { greater_than_or_equal_to: 0 }
end
</code></pre>

<p>Concernâ€™ler Rails uygulamanÄ±zÄ±n Ã¶zelliklerini dÃ¼zenlemenin harika bir yoludur. Productâ€™a daha fazla Ã¶zellik ekledikÃ§e, sÄ±nÄ±f karÄ±ÅŸÄ±k hale gelecektir. Bunun yerine, aboneleri iÅŸleme ve bildirimlerin nasÄ±l gÃ¶nderildiÄŸine dair tÃ¼m iÅŸlevselliÄŸi iÃ§eren <code class="language-plaintext highlighter-rouge">Product::Notifications</code> gibi baÄŸÄ±msÄ±z bir modÃ¼le her Ã¶zelliÄŸi Ã§Ä±karmak iÃ§in Concernâ€™leri kullanabiliriz.</p>

<p>Kodu concernâ€™lere Ã§Ä±karmak ayrÄ±ca Ã¶zellikleri yeniden kullanÄ±labilir hale getirmeye yardÄ±mcÄ± olur. Ã–rneÄŸin, abone bildirimlerine ihtiyaÃ§ duyan yeni bir model tanÄ±tabiliriz. Bu modÃ¼l aynÄ± iÅŸlevselliÄŸi saÄŸlamak iÃ§in birden fazla modelde kullanÄ±labilir.</p>

<h3 id="abonelik-iÌ‡ptal-baÄŸlantÄ±larÄ±">Abonelik Ä°ptal BaÄŸlantÄ±larÄ±</h3>

<p>Bir abone bir noktada aboneliÄŸini iptal etmek isteyebilir, bu yÃ¼zden bunu sonraki adÄ±mda oluÅŸturalÄ±m.</p>

<p>Ã–ncelikle, e-postalara dahil edeceÄŸimiz URLâ€™de abonelik iptali iÃ§in bir routeâ€™a ihtiyacÄ±mÄ±z var.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">resource</span> <span class="ss">:unsubscribe</span><span class="p">,</span> <span class="ss">only: </span><span class="p">[</span> <span class="ss">:show</span> <span class="p">]</span>
</code></pre></div></div>

<p>Active Recordâ€™un farklÄ± amaÃ§lar iÃ§in veritabanÄ± kayÄ±tlarÄ±nÄ± bulmak Ã¼zere benzersiz tokenâ€™lar oluÅŸturabilen <code class="language-plaintext highlighter-rouge">generates_token_for</code> adlÄ± bir Ã¶zelliÄŸi vardÄ±r. Bunu e-postanÄ±n abonelik iptal URLâ€™inde kullanmak Ã¼zere benzersiz bir abonelik iptal tokenâ€™Ä± oluÅŸturmak iÃ§in kullanabiliriz.</p>

<pre><code class="language-ruby#3">class Subscriber &lt; ApplicationRecord
  belongs_to :product
  generates_token_for :unsubscribe
end
</code></pre>

<p>Controllerâ€™Ä±mÄ±z Ã¶nce URLâ€™deki tokenâ€™dan Subscriber kaydÄ±nÄ± arayacaktÄ±r. Abone bulunduÄŸunda, kaydÄ± yok edecek ve ana sayfaya yÃ¶nlendirecektir. <code class="language-plaintext highlighter-rouge">app/controllers/unsubscribes_controller.rb</code> oluÅŸturun ve aÅŸaÄŸÄ±daki kodu ekleyin:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UnsubscribesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="n">allow_unauthenticated_access</span>
  <span class="n">before_action</span> <span class="ss">:set_subscriber</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@subscriber</span><span class="o">&amp;</span><span class="p">.</span><span class="nf">destroy</span>
    <span class="n">redirect_to</span> <span class="n">root_path</span><span class="p">,</span> <span class="ss">notice: </span><span class="s2">"Unsubscribed successfully."</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">set_subscriber</span>
    <span class="vi">@subscriber</span> <span class="o">=</span> <span class="no">Subscriber</span><span class="p">.</span><span class="nf">find_by_token_for</span><span class="p">(</span><span class="ss">:unsubscribe</span><span class="p">,</span> <span class="n">params</span><span class="p">[</span><span class="ss">:token</span><span class="p">])</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Son olarak, e-posta ÅŸablonlarÄ±mÄ±za abonelik iptal baÄŸlantÄ±sÄ±nÄ± ekleyelim.</p>

<p><code class="language-plaintext highlighter-rouge">app/views/product_mailer/in_stock.html.erb</code> dosyasÄ±na bir <code class="language-plaintext highlighter-rouge">link_to</code> ekleyin:</p>

<pre><code class="language-erb#5">&lt;h1&gt;Good news!&lt;/h1&gt;

&lt;p&gt;&lt;%= link_to @product.name, product_url(@product) %&gt; is back in stock.&lt;/p&gt;

&lt;%= link_to "Unsubscribe", unsubscribe_url(token: params[:subscriber].generate_token_for(:unsubscribe)) %&gt;
</code></pre>

<p><code class="language-plaintext highlighter-rouge">app/views/product_mailer/in_stock.text.erb</code> dosyasÄ±na URLâ€™i dÃ¼z metin olarak ekleyin:</p>

<pre><code class="language-erb#6">Good news!

&lt;%= @product.name %&gt; is back in stock.
&lt;%= product_url(@product) %&gt;

Unsubscribe: &lt;%= unsubscribe_url(token: params[:subscriber].generate_token_for(:unsubscribe)) %&gt;
</code></pre>

<p>Abonelik iptal baÄŸlantÄ±sÄ±na tÄ±klandÄ±ÄŸÄ±nda, abone kaydÄ± veritabanÄ±ndan silinecektir. Controller ayrÄ±ca geÃ§ersiz veya sÃ¼resi dolmuÅŸ tokenâ€™larÄ± herhangi bir hata vermeden gÃ¼venli bir ÅŸekilde iÅŸler.</p>

<p>BaÅŸka bir e-posta gÃ¶ndermek ve loglardaki abonelik iptal baÄŸlantÄ±sÄ±nÄ± test etmek iÃ§in Rails konsolunu kullanÄ±n.</p>

<h2 id="css-ve-javascript-ekleme">CSS ve JavaScript Ekleme</h2>

<p>CSS ve JavaScript, web uygulamalarÄ± geliÅŸtirmenin temelini oluÅŸturur, bu yÃ¼zden bunlarÄ± Rails ile nasÄ±l kullanacaÄŸÄ±mÄ±zÄ± Ã¶ÄŸrenelim.</p>

<h3 id="propshaft">Propshaft</h3>

<p>Railsâ€™in asset piplineâ€™Ä± Propshaft olarak adlandÄ±rÄ±lÄ±r. CSS, JavaScript, gÃ¶rseller ve diÄŸer assetâ€™leri alÄ±r ve tarayÄ±cÄ±nÄ±za sunar. Ãœretim ortamÄ±nda, Propshaft sayfalarÄ±nÄ±zÄ± daha hÄ±zlÄ± hale getirmek iÃ§in Ã¶nbelleklenebilmeleri adÄ±na assetâ€™lerinizin her sÃ¼rÃ¼mÃ¼nÃ¼ takip eder. Bunun nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ± hakkÄ±nda daha fazla bilgi edinmek iÃ§in <a href="../asset_pipeline/">Asset Pipeline</a> kÄ±lavuzuna gÃ¶z atÄ±n.</p>

<p><code class="language-plaintext highlighter-rouge">app/assets/stylesheets/application.css</code> dosyasÄ±nÄ± deÄŸiÅŸtirip fontmuzu sans-serif olarak deÄŸiÅŸtirelim.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">body</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="n">Arial</span><span class="p">,</span> <span class="n">Helvetica</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="p">{</span>
  <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">flex-end</span><span class="p">;</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">flex</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">0.875em</span><span class="p">;</span>
  <span class="nl">gap</span><span class="p">:</span> <span class="m">0.5rem</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">1024px</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">nav</span> <span class="nt">a</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">inline-block</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">main</span> <span class="p">{</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">1024px</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.notice</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="nx">green</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">section</span><span class="nc">.product</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">flex</span><span class="p">;</span>
  <span class="nl">gap</span><span class="p">:</span> <span class="m">1rem</span><span class="p">;</span>
  <span class="nl">flex-direction</span><span class="p">:</span> <span class="nb">row</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">section</span><span class="nc">.product</span> <span class="nt">img</span> <span class="p">{</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">8px</span><span class="p">;</span>
  <span class="nl">flex-basis</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ArdÄ±ndan bu yeni stilleri kullanmak iÃ§in <code class="language-plaintext highlighter-rouge">app/views/products/show.html.erb</code> dosyasÄ±nÄ± gÃ¼ncelleyeceÄŸiz.</p>

<pre><code class="language-erb#1,3,6,18-19">&lt;p&gt;&lt;%= link_to "Back", products_path %&gt;&lt;/p&gt;

&lt;section class="product"&gt;
  &lt;%= image_tag @product.featured_image if @product.featured_image.attached? %&gt;

  &lt;section class="product-info"&gt;
    &lt;% cache @product do %&gt;
      &lt;h1&gt;&lt;%= @product.name %&gt;&lt;/h1&gt;
      &lt;%= @product.description %&gt;
    &lt;% end %&gt;

    &lt;%= render "inventory", product: @product %&gt;

    &lt;% if authenticated? %&gt;
      &lt;%= link_to "Edit", edit_product_path(@product) %&gt;
      &lt;%= button_to "Delete", @product, method: :delete, data: { turbo_confirm: "Are you sure?" } %&gt;
    &lt;% end %&gt;
  &lt;/section&gt;
&lt;/section&gt;
</code></pre>

<p>SayfanÄ±zÄ± yenileyin. CSSâ€™in uygulandÄ±ÄŸÄ±nÄ± gÃ¶receksiniz.</p>

<h3 id="import-mapler">Import Mapâ€™ler</h3>

<p>Rails varsayÄ±lan olarak JavaScript iÃ§in import haritalarÄ±nÄ± kullanÄ±r. Bu, hiÃ§bir derleme adÄ±mÄ± olmadan modern JavaScript modÃ¼lleri yazmanÄ±za olanak tanÄ±r.</p>

<p>JavaScript pinlerini <code class="language-plaintext highlighter-rouge">config/importmap.rb</code> dosyasÄ±nda bulabilirsiniz. Bu dosya, tarayÄ±cÄ±da importmap etiketini oluÅŸturmak iÃ§in kullanÄ±lan JavaScript paket adlarÄ±nÄ± kaynak dosyayla eÅŸleÅŸtirir.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ./bin/importmap Ã§alÄ±ÅŸtÄ±rarak npm paketlerini pinleyin</span>

<span class="n">pin</span> <span class="s2">"application"</span>
<span class="n">pin</span> <span class="s2">"@hotwired/turbo-rails"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"turbo.min.js"</span>
<span class="n">pin</span> <span class="s2">"@hotwired/stimulus"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"stimulus.min.js"</span>
<span class="n">pin</span> <span class="s2">"@hotwired/stimulus-loading"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"stimulus-loading.js"</span>
<span class="n">pin_all_from</span> <span class="s2">"app/javascript/controllers"</span><span class="p">,</span> <span class="ss">under: </span><span class="s2">"controllers"</span>
<span class="n">pin</span> <span class="s2">"trix"</span>
<span class="n">pin</span> <span class="s2">"@rails/actiontext"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"actiontext.esm.js"</span>
</code></pre></div></div>

<div class="guide-alert guide-alert-info">
  <div class="guide-alert-icon">ğŸ’¡</div>
  <div class="guide-alert-content">
    Her pin, bir JavaScript paket adÄ±nÄ± (Ã¶rn. <code>"@hotwired/turbo-rails"</code>) belirli bir dosya veya URL'e (Ã¶rn. <code>"turbo.min.js"</code>) eÅŸleÅŸtirir. <code>pin_all_from</code> bir dizindeki tÃ¼m dosyalarÄ± (Ã¶rn. <code>app/javascript/controllers</code>) bir ad alanÄ±na (Ã¶rn. <code>"controllers"</code>) eÅŸleÅŸtirir.
  </div>
</div>

<p>Import mapâ€™ler, modern JavaScript Ã¶zelliklerini desteklerken kurulumu temiz ve minimal tutar.</p>

<p>Peki, import mapâ€™imizde zaten bulunan bu JavaScript dosyalarÄ± nelerdir? Bunlar, Railsâ€™in varsayÄ±lan olarak kullandÄ±ÄŸÄ± Hotwire adlÄ± bir frontend frameworkâ€™Ã¼dÃ¼r.</p>

<h3 id="hotwire">Hotwire</h3>

<p>Hotwire, sunucu tarafÄ±nda oluÅŸturulan HTMLâ€™den tam olarak yararlanmak iÃ§in tasarlanmÄ±ÅŸ bir JavaScript frameworkâ€™Ã¼dÃ¼r. 3 temel bileÅŸenden oluÅŸur:</p>

<ol>
  <li><a href="https://turbo.hotwired.dev/"><strong>Turbo</strong></a> navigation, form gÃ¶nderimleri,
sayfa bileÅŸenleri ve herhangi bir Ã¶zel JavaScript yazmadan gÃ¼ncellemeleri yÃ¶netir.</li>
  <li><a href="https://stimulus.hotwired.dev/"><strong>Stimulus</strong></a> sayfaya iÅŸlevsellik eklemek
iÃ§in kendi Ã¶zel JavaScriptâ€™inize ihtiyaÃ§ duyduÄŸunuzda bir framework saÄŸlar.</li>
  <li><a href="https://native.hotwired.dev/"><strong>Native</strong></a> web uygulamanÄ±zÄ± gÃ¶mÃ¼p
onu yerel mobil Ã¶zelliklerle aÅŸamalÄ± olarak geliÅŸtirerek hibrit mobil uygulamalar yapmanÄ±za olanak tanÄ±r.</li>
</ol>

<p>HenÃ¼z herhangi bir JavaScript yazmadÄ±k, ancak frontendâ€™de Hotwire kullanÄ±yorduk. Ã–rneÄŸin, Ã¼rÃ¼n eklemek ve dÃ¼zenlemek iÃ§in oluÅŸturduÄŸunuz form Turbo tarafÄ±ndan destekleniyordu.</p>

<p><a href="../asset_pipeline/">Asset Pipeline</a> ve <a href="../working_with_javascript_in_rails/">Railsâ€™te JavaScript ile Ã‡alÄ±ÅŸma</a> kÄ±lavuzlarÄ±nda daha fazla bilgi edinin.</p>

<h2 id="test">Test</h2>

<p>Rails gÃ¼Ã§lÃ¼ bir test paketi ile gelir. Bir Ã¼rÃ¼n stokta olduÄŸunda doÄŸru sayÄ±da e-posta gÃ¶nderildiÄŸinden emin olmak iÃ§in bir test yazalÄ±m.</p>

<h3 id="fixture">Fixture</h3>

<p>Rails kullanarak bir model oluÅŸturduÄŸunuzda, <code class="language-plaintext highlighter-rouge">test/fixtures</code> dizinine karÅŸÄ±lÄ±k gelen bir fixture dosyasÄ±nÄ± otomatik olarak oluÅŸturur.</p>

<p>Fixtureâ€™ler, testler Ã§alÄ±ÅŸtÄ±rÄ±lmadan Ã¶nce test veritabanÄ±nÄ±zÄ± dolduran Ã¶nceden tanÄ±mlanmÄ±ÅŸ veri kÃ¼meleridÄ±r. KayÄ±tlarÄ±, hatÄ±rlamasÄ± kolay isimlerle tanÄ±mlamanÄ±za olanak tanÄ±r ve testlerinizde bunlara eriÅŸimi kolaylaÅŸtÄ±rÄ±r.</p>

<p>Bu dosya varsayÄ±lan olarak boÅŸ olacaktÄ±r - testleriniz iÃ§in fixtureâ€™lerle doldurmanÄ±z gerek.</p>

<p>AÅŸaÄŸÄ±dakilerle <code class="language-plaintext highlighter-rouge">test/fixtures/products.yml</code> konumundaki product fixture dosyasÄ±nÄ± gÃ¼ncelleyelim:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">tshirt</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">T-Shirt</span>
  <span class="na">inventory_count</span><span class="pi">:</span> <span class="m">15</span>
</code></pre></div></div>

<p>Ve aboneler iÃ§in, <code class="language-plaintext highlighter-rouge">test/fixtures/subscribers.yml</code> dosyasÄ±na ÅŸu iki fixtureâ€™Ã¼ ekleyelim:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">david</span><span class="pi">:</span>
  <span class="na">product</span><span class="pi">:</span> <span class="s">tshirt</span>
  <span class="na">email</span><span class="pi">:</span> <span class="s">david@example.org</span>

<span class="na">chris</span><span class="pi">:</span>
  <span class="na">product</span><span class="pi">:</span> <span class="s">tshirt</span>
  <span class="na">email</span><span class="pi">:</span> <span class="s">chris@example.org</span>
</code></pre></div></div>

<p>Burada <code class="language-plaintext highlighter-rouge">Product</code> fixtureâ€™Ã¼ne name ile baÅŸvurabildiÄŸimizi fark edeceksiniz. Rails bunu bizim iÃ§in veritabanÄ±nda otomatik olarak iliÅŸkilendirir, bÃ¶ylece testlerde kayÄ±t IDâ€™leri ve iliÅŸkileri yÃ¶netmek zorunda kalmayÄ±z.</p>

<p>Bu fixtureâ€™ler test paketimizi Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±mÄ±zda otomatik olarak veritabanÄ±na eklenecektir.</p>

<h3 id="e-postalarÄ±-test-etme">E-postalarÄ± Test Etme</h3>

<p><code class="language-plaintext highlighter-rouge">test/models/product_test.rb</code> dosyasÄ±na bir test ekleyelim:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s2">"test_helper"</span>

<span class="k">class</span> <span class="nc">ProductTest</span> <span class="o">&lt;</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">TestCase</span>
  <span class="kp">include</span> <span class="no">ActionMailer</span><span class="o">::</span><span class="no">TestHelper</span>

  <span class="nb">test</span> <span class="s2">"sends email notifications when back in stock"</span> <span class="k">do</span>
    <span class="n">product</span> <span class="o">=</span> <span class="n">products</span><span class="p">(</span><span class="ss">:tshirt</span><span class="p">)</span>

    <span class="c1"># Set product out of stock</span>
    <span class="n">product</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="ss">inventory_count: </span><span class="mi">0</span><span class="p">)</span>

    <span class="n">assert_emails</span> <span class="mi">2</span> <span class="k">do</span>
      <span class="n">product</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="ss">inventory_count: </span><span class="mi">99</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Bu testin ne yaptÄ±ÄŸÄ±nÄ± aÃ§Ä±klayalÄ±m.</p>

<p>Ä°lk olarak, test sÄ±rasÄ±nda gÃ¶nderilen e-postalarÄ± izleyebilmek iÃ§in Action Mailer test helperâ€™larÄ± dahil ediyoruz.</p>

<p><code class="language-plaintext highlighter-rouge">tshirt</code> fixtureâ€™Ã¼ <code class="language-plaintext highlighter-rouge">products()</code> fixture helperâ€™Ä± kullanÄ±larak yÃ¼klenir ve bu kayÄ±t iÃ§in Active Record nesnesini dÃ¶ndÃ¼rÃ¼r. Her fixture, her Ã§alÄ±ÅŸmada veritabanÄ± IDâ€™leri farklÄ± olabileceÄŸinden fixtureâ€™lere name ile baÅŸvurmayÄ± kolaylaÅŸtÄ±rmak iÃ§in test paketinde bir helper oluÅŸturur.</p>

<p>ArdÄ±ndan tiÅŸÃ¶rtÃ¼n stokta olmadÄ±ÄŸÄ±ndan emin olmak iÃ§in envanterini 0â€™a gÃ¼ncelleriz.</p>

<p>Sonra, blok iÃ§indeki kod tarafÄ±ndan 2 e-posta oluÅŸturulduÄŸundan emin olmak iÃ§in <code class="language-plaintext highlighter-rouge">assert_emails</code> kullanÄ±rÄ±z. E-postalarÄ± tetiklemek iÃ§in, blok iÃ§inde Ã¼rÃ¼nÃ¼n envanter sayÄ±sÄ±nÄ± gÃ¼ncelleriz. Bu, Product modelindeki <code class="language-plaintext highlighter-rouge">notify_subscribers</code> callbackâ€™ini tetikleyerek e-posta gÃ¶nderir. Bu iÅŸlem tamamlandÄ±ÄŸÄ±nda, <code class="language-plaintext highlighter-rouge">assert_emails</code> e-postalarÄ± sayar ve beklenen sayÄ±yla eÅŸleÅŸtiÄŸinden emin olur.</p>

<p>Test paketini <code class="language-plaintext highlighter-rouge">bin/rails test</code> ile veya dosya adÄ±nÄ± geÃ§erek tek bir test dosyasÄ±nÄ± Ã§alÄ±ÅŸtÄ±rabiliriz.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails <span class="nb">test test</span>/models/product_test.rb
Running 1 tests <span class="k">in </span>a single process <span class="o">(</span>parallelization threshold is 50<span class="o">)</span>
Run options: <span class="nt">--seed</span> 3556

<span class="c"># Running:</span>

<span class="nb">.</span>

Finished <span class="k">in </span>0.343842s, 2.9083 runs/s, 5.8166 assertions/s.
1 runs, 2 assertions, 0 failures, 0 errors, 0 skips
</code></pre></div></div>

<p>Testimiz geÃ§ti!</p>

<p>Rails ayrÄ±ca <code class="language-plaintext highlighter-rouge">test/mailers/product_mailer_test.rb</code> dosyasÄ±nda <code class="language-plaintext highlighter-rouge">ProductMailer</code> iÃ§in Ã¶rnek bir test oluÅŸturdu. Onun da testi geÃ§mesi iÃ§in gÃ¼ncelleyelim.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s2">"test_helper"</span>

<span class="k">class</span> <span class="nc">ProductMailerTest</span> <span class="o">&lt;</span> <span class="no">ActionMailer</span><span class="o">::</span><span class="no">TestCase</span>
  <span class="nb">test</span> <span class="s2">"in_stock"</span> <span class="k">do</span>
    <span class="n">mail</span> <span class="o">=</span> <span class="no">ProductMailer</span><span class="p">.</span><span class="nf">with</span><span class="p">(</span><span class="ss">product: </span><span class="n">products</span><span class="p">(</span><span class="ss">:tshirt</span><span class="p">),</span> <span class="ss">subscriber: </span><span class="n">subscribers</span><span class="p">(</span><span class="ss">:david</span><span class="p">)).</span><span class="nf">in_stock</span>
    <span class="n">assert_equal</span> <span class="s2">"In stock"</span><span class="p">,</span> <span class="n">mail</span><span class="p">.</span><span class="nf">subject</span>
    <span class="n">assert_equal</span> <span class="p">[</span> <span class="s2">"david@example.org"</span> <span class="p">],</span> <span class="n">mail</span><span class="p">.</span><span class="nf">to</span>
    <span class="n">assert_equal</span> <span class="p">[</span> <span class="s2">"from@example.com"</span> <span class="p">],</span> <span class="n">mail</span><span class="p">.</span><span class="nf">from</span>
    <span class="n">assert_match</span> <span class="s2">"Good news!"</span><span class="p">,</span> <span class="n">mail</span><span class="p">.</span><span class="nf">body</span><span class="p">.</span><span class="nf">encoded</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Åimdi tÃ¼m test paketini Ã§alÄ±ÅŸtÄ±ralÄ±m ve tÃ¼m testlerin geÃ§tiÄŸinden emin olalÄ±m.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails <span class="nb">test
</span>Running 2 tests <span class="k">in </span>a single process <span class="o">(</span>parallelization threshold is 50<span class="o">)</span>
Run options: <span class="nt">--seed</span> 16302

<span class="c"># Running:</span>

..

Finished <span class="k">in </span>0.665856s, 3.0037 runs/s, 10.5128 assertions/s.
2 runs, 7 assertions, 0 failures, 0 errors, 0 skips
</code></pre></div></div>

<p>Bunu, uygulama Ã¶zelliklerinin tam kapsamÄ±nÄ± iÃ§eren bir test paketi oluÅŸturmaya devam etmek iÃ§in baÅŸlangÄ±Ã§ noktasÄ± olarak kullanabilirsiniz.</p>

<p><a href="../testing/">Rails UygulamalarÄ±nÄ± Test Etme</a> hakkÄ±nda daha fazla bilgi edinin.</p>

<h2 id="rubocop-ile-tutarlÄ±-biÃ§imlendirilmiÅŸ-kod">RuboCop ile TutarlÄ± BiÃ§imlendirilmiÅŸ Kod</h2>

<p>Kod yazarken bazen tutarsÄ±z biÃ§imlendirme kullanabiliriz. Rails, kodumuzun tutarlÄ± biÃ§imde formatlanmasÄ±na yardÄ±mcÄ± olan RuboCop adlÄ± bir linter ile gelir.</p>

<p>Kodumuzun tutarlÄ±lÄ±ÄŸÄ±nÄ± kontrol etmek iÃ§in ÅŸunu Ã§alÄ±ÅŸtÄ±rabiliriz:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rubocop
</code></pre></div></div>

<p>Bu, herhangi bir ihlali yazdÄ±racak ve ne olduklarÄ±nÄ± sÃ¶yleyecektir.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Inspecting 53 files
.....................................................

53 files inspected, no offenses detected
</code></pre></div></div>

<p>RuboCop, <code class="language-plaintext highlighter-rouge">--autocorrect</code> flagâ€™ini (veya kÄ±sa versiyonu <code class="language-plaintext highlighter-rouge">-a</code>) kullanarak ihlalleri otomatik olarak dÃ¼zeltebilir.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bin/rubocop -a
</code></pre></div></div>

<h2 id="gÃ¼venlik">GÃ¼venlik</h2>

<p>Rails, uygulamanÄ±zla ilgili gÃ¼venlik sorunlarÄ±nÄ± kontrol etmek iÃ§in Brakeman gemâ€™ini iÃ§erir - oturum ele geÃ§irme, oturum sabitleme veya yeniden yÃ¶nlendirme gibi saldÄ±rÄ±lara yol aÃ§abilecek gÃ¼venlik aÃ§Ä±klarÄ±.</p>

<p>Terminalinize <code class="language-plaintext highlighter-rouge">bin/brakeman</code> yazarak Ã§alÄ±ÅŸtÄ±rÄ±n. Bu, uygulamanÄ±zÄ± analiz edip bir rapor Ã§Ä±karacaktÄ±r.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/brakeman
Loading scanner...
...

<span class="o">==</span> Overview <span class="o">==</span>

Controllers: 6
Models: 6
Templates: 15
Errors: 0
Security Warnings: 0

<span class="o">==</span> Warning Types <span class="o">==</span>


No warnings found
</code></pre></div></div>

<p><a href="../security/">Rails UygulamalarÄ±nÄ±n GÃ¼venliÄŸi</a> hakkÄ±nda daha fazla bilgi edinin.</p>

<h2 id="github-actions-ile-sÃ¼rekli-entegrasyon">GitHub Actions ile SÃ¼rekli Entegrasyon</h2>

<p>Rails uygulamalarÄ±; rubocop, brakeman ve test paketimizi Ã§alÄ±ÅŸtÄ±ran Ã¶nceden yazÄ±lmÄ±ÅŸ bir GitHub Actions yapÄ±landÄ±rmasÄ± iÃ§eren bir <code class="language-plaintext highlighter-rouge">.github</code> klasÃ¶rÃ¼ oluÅŸturur.</p>

<p>Kodumuzu GitHub Actionsâ€™Ä±n etkin olduÄŸu bir GitHub deposuna push ettiÄŸimizde, otomatik olarak bu adÄ±mlarÄ± Ã§alÄ±ÅŸtÄ±racak ve her biri iÃ§in baÅŸarÄ± veya baÅŸarÄ±sÄ±zlÄ±k durumlarÄ±nÄ± rapor edecektir. Bu, kod deÄŸiÅŸikliklerimizi kusurlar ve sorunlar aÃ§Ä±sÄ±ndan izlememize ve Ã§alÄ±ÅŸmamÄ±z iÃ§in tutarlÄ± kalite saÄŸlamamÄ±za olanak tanÄ±r.</p>

<h2 id="Ã¼retim-ortamÄ±na-daÄŸÄ±tÄ±m">Ãœretim OrtamÄ±na DaÄŸÄ±tÄ±m</h2>

<p>Ve ÅŸimdi eÄŸlenceli kÄ±sma geldik: UygulamanÄ±zÄ± daÄŸÄ±tÄ±ma (deploy) Ã§Ä±karalÄ±m.</p>

<p>Rails, uygulamamÄ±zÄ± doÄŸrudan bir sunucuya daÄŸÄ±tmak iÃ§in kullanabileceÄŸimiz <a href="https://kamal-deploy.org">Kamal</a> adlÄ± bir daÄŸÄ±tÄ±m aracÄ± ile gelir. Kamal, uygulamanÄ±zÄ± Ã§alÄ±ÅŸtÄ±rmak ve sÄ±fÄ±r kesinti ile daÄŸÄ±tmak iÃ§in Docker konteynerlerini kullanÄ±r.</p>

<p>Rails varsayÄ±lan olarak, Kamalâ€™Ä±n Docker image derlemek iÃ§in kullanacaÄŸÄ± Ã¼retime hazÄ±r bir Dockerfile ile gelir ve tÃ¼m baÄŸÄ±mlÄ±lÄ±klarÄ± ve yapÄ±landÄ±rmalarÄ±yla uygulamanÄ±zÄ±n konteynerleÅŸtirilmiÅŸ bir sÃ¼rÃ¼mÃ¼nÃ¼ oluÅŸturur. Bu Dockerfile, Ã¼retim ortamÄ±nda assetâ€™leri verimli bir ÅŸekilde sÄ±kÄ±ÅŸtÄ±rmak ve sunmak iÃ§in <a href="https://github.com/basecamp/thruster">Thruster</a> kullanÄ±r.</p>

<p>Kamal ile daÄŸÄ±tÄ±ma Ã§Ä±kmak iÃ§in ÅŸunlara ihtiyacÄ±mÄ±z var:</p>

<ul>
  <li>1GB veya daha fazla RAMâ€™e sahip Ubuntu LTS Ã§alÄ±ÅŸtÄ±ran bir sunucu. Sunucu
dÃ¼zenli gÃ¼venlik ve hata dÃ¼zeltmeleri alabilmesi iÃ§in Uzun Vadeli Destek (Long-Term Support - LTS) sÃ¼rÃ¼mÃ¼ne sahip Ubuntu iÅŸletim sistemini Ã§alÄ±ÅŸtÄ±rmalÄ±dÄ±r. Hetzner, DigitalOcean ve diÄŸer hosting hizmetleri baÅŸlamak iÃ§in sunucular saÄŸlar.</li>
  <li>Bir <a href="https://hub.docker.com">Docker Hub</a> hesabÄ± ve eriÅŸim tokenâ€™Ä±. Docker Hub,
sunucuda indirilebilmesi ve Ã§alÄ±ÅŸtÄ±rÄ±labilmesi iÃ§in uygulamanÄ±n imageâ€™ini saklar.</li>
</ul>

<p>Docker Hubâ€™da, uygulama imageâ€™iniz iÃ§in bir <a href="https://hub.docker.com/repository/create">Depo oluÅŸturun</a>. Depo adÄ± olarak â€œstoreâ€ kullanÄ±n.</p>

<p><code class="language-plaintext highlighter-rouge">config/deploy.yml</code> dosyasÄ±nÄ± aÃ§Ä±n. <code class="language-plaintext highlighter-rouge">192.168.0.1</code>â€˜i sunucunuzun IP adresi, <code class="language-plaintext highlighter-rouge">your-user</code>â€˜Ä± ise Docker Hub kullanÄ±cÄ± adÄ±nÄ±zla deÄŸiÅŸtirin.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># UygulamanÄ±zÄ±n adÄ±. Konteynerleri benzersiz ÅŸekilde yapÄ±landÄ±rmak iÃ§in kullanÄ±lÄ±r.</span>
<span class="na">service</span><span class="pi">:</span> <span class="s">store</span>

<span class="c1"># Konteyner image'in adÄ±.</span>
<span class="na">image</span><span class="pi">:</span> <span class="s">your-user/store</span>

<span class="c1"># Bu sunuculara daÄŸÄ±t.</span>
<span class="na">servers</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">192.168.0.1</span>

<span class="c1"># Image host iÃ§in kimlik bilgileri.</span>
<span class="na">registry</span><span class="pi">:</span>
  <span class="c1"># Docker Hub kullanmÄ±yorsanÄ±z kayÄ±t sunucusunu belirtin.</span>
  <span class="c1"># server: registry.digitalocean.com / ghcr.io / ...</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">your-user</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">proxy:</code> bÃ¶lÃ¼mÃ¼ altÄ±nda, uygulamanÄ±z iÃ§in SSLâ€™i etkinleÅŸtirmek Ã¼zere bir alan adÄ± (domain) ekleyebilirsiniz. DNS kaydÄ±nÄ±zÄ±n sunucuya iÅŸaret ettiÄŸinden emin olun. Kamal, alan adÄ± iÃ§in SSL sertifikasÄ± vermek Ã¼zere LetsEncrypt kullanacaktÄ±r.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">proxy</span><span class="pi">:</span>
  <span class="na">ssl</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">app.example.com</span>
</code></pre></div></div>

<p>Kamalâ€™Ä±n uygulamanÄ±z iÃ§in Docker image push edebilmesi iÃ§in Dockerâ€™Ä±n web sitesinde Read &amp; Write izinleri olan <a href="https://app.docker.com/settings/personal-access-tokens/create">bir eriÅŸim tokenâ€™Ä± oluÅŸturun</a>.</p>

<p>ArdÄ±ndan Kamalâ€™Ä±n bulabilmesi iÃ§in terminalde eriÅŸim tokenâ€™Ä±nÄ± dÄ±ÅŸa aktarÄ±n.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">KAMAL_REGISTRY_PASSWORD</span><span class="o">=</span>your-access-token
</code></pre></div></div>

<p>Sunucunuzu kurmak ve uygulamanÄ±zÄ± ilk kez daÄŸÄ±tÄ±ma Ã§Ä±karmak iÃ§in aÅŸaÄŸÄ±daki komutu Ã§alÄ±ÅŸtÄ±rÄ±n.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/kamal setup
</code></pre></div></div>

<p>Tebrikler! Yeni Rails uygulamanÄ±z artÄ±k canlÄ±da/Ã¼retim ortamÄ±nda!</p>

<p>Yeni Rails uygulamanÄ±zÄ± Ã§alÄ±ÅŸÄ±rken gÃ¶rmek iÃ§in tarayÄ±cÄ±nÄ±zÄ± aÃ§Ä±n ve sunucunuzun IP adresini girin. Store projenizin Ã§alÄ±ÅŸÄ±r durumda olduÄŸunu gÃ¶rmelisiniz.</p>

<p>Bundan sonra, uygulamanÄ±zda deÄŸiÅŸiklik yapÄ±p bunlarÄ± Ã¼retime Ã§Ä±karmak istediÄŸinizde, ÅŸunu Ã§alÄ±ÅŸtÄ±rabilirsiniz:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/kamal deploy
</code></pre></div></div>

<h3 id="Ã¼retim-ortamÄ±na-kullanÄ±cÄ±-ekleme">Ãœretim OrtamÄ±na KullanÄ±cÄ± Ekleme</h3>

<p>Ãœretim ortamÄ±nda Ã¼rÃ¼n oluÅŸturmak ve dÃ¼zenlemek iÃ§in Ã¼retim veritabanÄ±nda bir User kaydÄ±na ihtiyacÄ±mÄ±z var.</p>

<p>Rails konsolunda bir Ã¼retim ortamÄ± aÃ§mak iÃ§in Kamalâ€™Ä± kullanabilirsiniz.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/kamal console
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">store</span><span class="p">(</span><span class="n">prod</span><span class="p">)</span><span class="o">&gt;</span> <span class="no">User</span><span class="p">.</span><span class="nf">create!</span><span class="p">(</span><span class="ss">email_address: </span><span class="s2">"you@example.org"</span><span class="p">,</span> <span class="ss">password: </span><span class="s2">"s3cr3t"</span><span class="p">,</span> <span class="ss">password_confirmation: </span><span class="s2">"s3cr3t"</span><span class="p">)</span>
</code></pre></div></div>

<p>ArtÄ±k bu e-posta ve ÅŸifre ile Ã¼retim ortamÄ±na giriÅŸ yapabilir ve Ã¼rÃ¼nleri yÃ¶netebilirsiniz.</p>

<h3 id="solid-queue-ile-arka-plan-iÌ‡ÅŸleri">Solid Queue ile Arka Plan Ä°ÅŸleri</h3>

<p>Arka plan iÅŸleri, gÃ¶revleri kullanÄ±cÄ± deneyimini kesintiye uÄŸratmadan ayrÄ± bir sÃ¼reÃ§te arka planda asenkronize olarak Ã§alÄ±ÅŸtÄ±rmanÄ±za olanak tanÄ±r. 10.000 alÄ±cÄ±ya stok e-postalarÄ± gÃ¶nderdiÄŸinizi hayal edin. Bu biraz zaman alabilir, bu yÃ¼zden Rails uygulamasÄ±nÄ± responsive (duyarlÄ±) tutmak iÃ§in bu gÃ¶revi bir arka plan iÅŸine yÃ¼kleyebiliriz.</p>

<p>GeliÅŸtirme ortamÄ±nda Rails, ActiveJob ile arka plan iÅŸlerini iÅŸlemek iÃ§in <code class="language-plaintext highlighter-rouge">:async</code> kuyruk adaptÃ¶rÃ¼nÃ¼ kullanÄ±r. Async, bekleyen iÅŸleri bellekte depolar ancak yeniden baÅŸlatÄ±ldÄ±ÄŸÄ±nda bekleyen iÅŸleri kaybeder. Bu, geliÅŸtirme ortamÄ± iÃ§in harikadÄ±r ancak Ã¼retim ortamÄ± iÃ§in deÄŸil.</p>

<p>Arka plan iÅŸlerini daha saÄŸlam hale getirmek iÃ§in Rails, Ã¼retim ortamlarÄ± iÃ§in <code class="language-plaintext highlighter-rouge">solid_queue</code> kullanÄ±r. Solid Queue iÅŸleri veritabanÄ±nda saklar ve bunlarÄ± ayrÄ± bir sÃ¼reÃ§te yÃ¼rÃ¼tÃ¼r.</p>

<p>Solid Queue, <code class="language-plaintext highlighter-rouge">config/deploy.yml</code> dosyasÄ±na <code class="language-plaintext highlighter-rouge">SOLID_QUEUE_IN_PUMA: true</code> ortam deÄŸiÅŸkeni kullanÄ±larak Ã¼retim Kamal daÄŸÄ±tÄ±mÄ±mÄ±z iÃ§in etkinleÅŸtirilmiÅŸtir. Bu, web sunucumuz Pumaâ€™ya Solid Queue sÃ¼recini otomatik olarak baÅŸlatÄ±p durdurmasÄ±nÄ± sÃ¶yler.</p>

<p>E-postalar Action Mailerâ€™Ä±n <code class="language-plaintext highlighter-rouge">deliver_later</code> metoduyla gÃ¶nderildiÄŸinde, bu e-postalar HTTP isteÄŸini geciktirmemek iÃ§in arka planda gÃ¶nderilmek Ã¼zere Active Jobâ€™a gÃ¶nderilecektir. Ãœretim ortamÄ±nda Solid Queue ile e-postalar arka planda gÃ¶nderilecek, gÃ¶nderilmezse otomatik olarak yeniden denenecek ve yeniden baÅŸlatmalar sÄ±rasÄ±nda iÅŸler veritabanÄ±nda gÃ¼venli tutulacaktÄ±r.</p>

<picture class="flowdiagram">
  <source srcset="/assets/images/rails/getting_started/background_jobs_dark.jpg" media="(prefers-color-scheme:dark)" />
  <img src="/assets/images/rails/getting_started/background_jobs_light.jpg" />
</picture>

<h2 id="sÄ±rada-ne-var">SÄ±rada Ne Var?</h2>

<p>Ä°lk Rails uygulamanÄ±zÄ± oluÅŸturup daÄŸÄ±tÄ±ma Ã§Ä±kardÄ±ÄŸÄ±nÄ±z iÃ§in tebrikler!</p>

<p>Ã–ÄŸrenmeye devam etmek iÃ§in Ã¶zellik eklemeye ve gÃ¼ncellemeleri daÄŸÄ±tÄ±ma Ã§Ä±karmaya devam etmenizi Ã¶neririz. Ä°ÅŸte bazÄ± fikirler:</p>

<ul>
  <li>CSS ile tasarÄ±mÄ± geliÅŸtirin</li>
  <li>ÃœrÃ¼n DeÄŸerlendirmeleri ekleyin</li>
  <li>UygulamayÄ± baÅŸka bir dile Ã§evirmeyi tamamlayÄ±n</li>
  <li>Ã–demeler iÃ§in bir Ã¶deme akÄ±ÅŸÄ± ekleyin</li>
  <li>KullanÄ±cÄ±larÄ±n Ã¼rÃ¼nleri kaydetmesi iÃ§in istek listeleri ekleyin</li>
  <li>ÃœrÃ¼n gÃ¶rselleri iÃ§in bir carousel ekleyin</li>
</ul>

<p>AyrÄ±ca diÄŸer Ruby on Rails KÄ±lavuzlarÄ±nÄ± okuyarak daha fazlasÄ±nÄ± Ã¶ÄŸrenmenizi Ã¶neririz:</p>

<ul>
  <li><a href="../active_record_basics/">Active Record Temelleri</a></li>
  <li><a href="../layouts_and_rendering/">Railsâ€™te Layout ve Render</a></li>
  <li><a href="../testing/">Rails UygulamalarÄ±nÄ± Test Etme</a></li>
  <li><a href="../debugging_rails_applications/">Rails UygulamalarÄ±nda Hata AyÄ±klama</a></li>
  <li><a href="../security/">Rails UygulamalarÄ±nÄ±n GÃ¼venliÄŸi</a></li>
</ul>

<p>Mutlu geliÅŸtirmeler!</p>
</div>
  </article>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toc = document.getElementById("toc");
    const headings = document.querySelectorAll(
      ".guide-content h2, .guide-content h3, .guide-content h4"
    );

    if (headings.length > 0) {
      const tocList = document.createElement("ul");
      const headingMap = new Map();

      // TÃ¼rkÃ§e karakterleri URL-dostu hale getiren fonksiyon
      function turkishToSlug(text) {
        const turkishChars = {
          'Ã§': 'c', 'Ã‡': 'c',
          'ÄŸ': 'g', 'Ä': 'g',
          'Ä±': 'i', 'I': 'i',
          'Ä°': 'i', 'i': 'i',
          'Ã¶': 'o', 'Ã–': 'o',
          'ÅŸ': 's', 'Å': 's',
          'Ã¼': 'u', 'Ãœ': 'u'
        };
        
        return text
          .split('')
          .map(char => turkishChars[char] || char)
          .join('')
          .toLowerCase()
          .replace(/[^a-z0-9]+/g, '-')
          .replace(/^-+|-+$/g, '');
      }

      // AynÄ± ID'nin tekrarlanmasÄ±nÄ± Ã¶nlemek iÃ§in sayaÃ§
      const idCounts = new Map();

      headings.forEach(function (heading, index) {
        // BaÅŸlÄ±k metninden anlamlÄ± ID oluÅŸtur
        const headingText = heading.textContent.trim();
        let baseId = turkishToSlug(headingText);
        
        // BoÅŸ ID kontrolÃ¼
        if (!baseId) {
          baseId = "heading-" + index;
        }
        
        // Tekrarlanan ID'leri Ã¶nle
        let finalId = baseId;
        if (idCounts.has(baseId)) {
          const count = idCounts.get(baseId) + 1;
          idCounts.set(baseId, count);
          finalId = baseId + "-" + count;
        } else {
          idCounts.set(baseId, 1);
        }
        
        heading.id = finalId;

        const li = document.createElement("li");
        const a = document.createElement("a");
        a.href = "#" + finalId;
        a.textContent = headingText;
        a.className = "toc-" + heading.tagName.toLowerCase();

        li.appendChild(a);
        tocList.appendChild(li);

        headingMap.set(finalId, a);
      });

      toc.appendChild(tocList);

      // BaÅŸlÄ±klarÄ±n gÃ¶rÃ¼nÃ¼rlÃ¼k oranlarÄ±nÄ± takip et
      const visibilityMap = new Map();

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            const id = entry.target.getAttribute("id");
            visibilityMap.set(id, entry.intersectionRatio);
          });

          // En Ã§ok gÃ¶rÃ¼nÃ¼r olan baÅŸlÄ±ÄŸÄ± bul
          let mostVisibleId = null;
          let maxRatio = 0;

          visibilityMap.forEach((ratio, id) => {
            if (ratio > maxRatio) {
              mostVisibleId = id;
              maxRatio = ratio;
            }
          });

          if (mostVisibleId) {
            headingMap.forEach((linkEl) => linkEl.classList.remove("active"));
            const activeLink = headingMap.get(mostVisibleId);
            if (activeLink) {
              activeLink.classList.add("active");

              // Ortalamak iÃ§in:
              const linkTop = activeLink.offsetTop;
              const linkHeight = activeLink.offsetHeight;
              const tocScrollParent = toc;
              const tocHeight = tocScrollParent.offsetHeight;

              tocScrollParent.scrollTo({
                top: linkTop - tocHeight / 2 + linkHeight / 2,
                behavior: "smooth",
              });
            }
          }
        },
        {
          threshold: [0, 0.25, 0.5, 0.75, 1.0],
        }
      );

      headings.forEach((heading) => {
        observer.observe(heading);
      });

      const toggleBtn = document.getElementById("toc-toggle");
      const sidebar = document.querySelector(".guide-sidebar");

      toggleBtn.addEventListener("click", function () {
        sidebar.classList.toggle("open");
      });
      const closeBtn = document.querySelector(".toc-close");

      closeBtn?.addEventListener("click", function () {
        sidebar.classList.remove("open");
      });
    }
  });
</script>
        <!-- <footer class="guide-footer"> -->
        <div class="feedback">
          <h3>Geri Bildirim</h3>
          <p>
            Bu rehberin kalitesinin iyileÅŸtirilmesine yardÄ±mcÄ± olmanÄ±zÄ±
            Ã¶neririz.
          </p>
          <p>
            Herhangi bir yazÄ±m hatasÄ± veya olgusal hata gÃ¶rÃ¼rseniz lÃ¼tfen
            katkÄ±da bulunun. BaÅŸlamak iÃ§in,
            <a
              href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation"
              >dokÃ¼mantasyon katkÄ±larÄ±</a
            >
            bÃ¶lÃ¼mÃ¼nÃ¼ okuyabilirsiniz.
          </p>
          <p>
            AyrÄ±ca eksik veya gÃ¼ncel olmayan iÃ§erik de bulabilirsiniz. LÃ¼tfen
            main iÃ§in eksik olan belgeleri ekleyin. SorunlarÄ±n main dalda zaten
            dÃ¼zeltilip dÃ¼zeltilmediÄŸini doÄŸrulamak iÃ§in Ã¶nce
            <a href="https://edgeguides.rubyonrails.org/">Edge Guides</a>'Ä±
            kontrol ettiÄŸinizden emin olun. Stil ve kurallar iÃ§in
            <a
              href="https://guides.rubyonrails.org/v8.0/ruby_on_rails_guides_guidelines.html"
              >Ruby on Rails Guides Guidelines</a
            >'Ä± kontrol edin.
          </p>
          <p>
            Herhangi bir sebepten dolayÄ± dÃ¼zeltebileceÄŸiniz bir ÅŸey bulursanÄ±z
            ancak kendiniz patch yapamÄ±yorsanÄ±z lÃ¼tfen bir
            <a href="https://github.com/rails/rails/issues">issue</a> aÃ§Ä±n.
          </p>
          <p>
            Ve son olarak, Ruby on Rails dokÃ¼mantasyonu ile ilgili her tÃ¼rlÃ¼
            tartÄ±ÅŸma resmi
            <a href="https://discuss.rubyonrails.org/c/rubyonrails-docs/6"
              >Ruby on Rails Forum</a
            >'unda memnuniyetle karÅŸÄ±lanacaktÄ±r.
          </p>
        </div>
      </div>
    </main>

    <button id="scrollToTop" class="scroll-to-top" aria-label="YukarÄ± Ã§Ä±k">
      <svg
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <polyline points="18,15 12,9 6,15"></polyline>
      </svg>
    </button>

    <footer class="footer">
      <div class="container">
        <p>
          Bu Ã§alÄ±ÅŸma <a href=" Creative Commons Attribution-ShareAlike 4.0 International">Creative Commons Attribution-ShareAlike 4.0 International</a> LisansÄ± kapsamÄ±nda lisanslanmÄ±ÅŸtÄ±r.
          </p>
        <p>
          "Rails", "Ruby on Rails" ve Rails logosu David Heinemeier Hansson'un ticari markalarÄ±dÄ±r. TÃ¼m haklarÄ± saklÄ±dÄ±r.
        </p><br/>
        <p>
          &copy; 2025 Rails KÄ±lavuzlarÄ± TÃ¼rkÃ§e Ã‡evirisi.
          <a href="https://github.com/DilanKaya127">Dilan Kaya</a> tarafÄ±ndan
          hazÄ±rlanmÄ±ÅŸtÄ±r.
          Orijinal dokÃ¼mantasyon
          <a href="https://guides.rubyonrails.org">Ruby on Rails</a> ekibine
          aittir.
        </p>
        

      </div>
    </footer>

    <script>
      hljs.highlightAll();
      // YukarÄ± Ã§Ä±k butonu iÅŸlevselliÄŸi
      const scrollToTopBtn = document.getElementById("scrollToTop");

      // Scroll pozisyonunu kontrol et
      window.addEventListener("scroll", function () {
        if (window.pageYOffset > 500) {
          scrollToTopBtn.classList.add("visible");
        } else {
          scrollToTopBtn.classList.remove("visible");
        }
      });

      // Butona tÄ±klandÄ±ÄŸÄ±nda yukarÄ± Ã§Ä±k
      scrollToTopBtn.addEventListener("click", function () {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      });
    </script>
  </body>
</html>
