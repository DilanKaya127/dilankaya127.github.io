<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Action View Overview - Rails Dokümantasyonu - Türkçe
    </title>
    <link
      rel="stylesheet"
      href="/assets/css/rails.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css"
    />

    <link
      rel="icon"
      type="image/svg"
      href="/assets/images/logo_rails-circle.svg"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-Y6Q8S53SSQ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-Y6Q8S53SSQ");
    </script>
  </head>
  <body>
    <header class="header">
      <div class="container">
        <div class="header-content">
          <h1 class="logo">
            <a href="/rails/">
              <img
                src="/assets/images/logo_rails-circle.svg"
                alt="Rails Logo"
                class="logo-image"
              />
            </a>
          </h1>
          <nav class="nav">
            <a href="/">Ana Sayfa</a>
            <!-- <a href="https://dilankaya127.github.io">Portföy</a> -->

            <div class="dropdown">
              <a class="dropbtn">Kılavuzlar</a>
              <div class="dropdown-content multi-column">
                 
                <div class="dropdown-column">
                  <h4>Buradan Başlayın</h4>
                  
                  <a href="/rails/guides/tr/getting_started">Rails ile Başlarken</a>
                  
                  <a href="/rails/guides/tr/install_ruby_on_rails">Ruby on Rails İndirme Kılavuzu</a>
                  
                </div>
                      
                <div class="dropdown-column">
                  <h4>Controllers</h4>
                  
                  <a href="/rails/guides/tr/action_controller_overview">Action Controller</a>
                  
                </div>
                  
                <div class="dropdown-column">
                  <h4>Diğer Bileşenler</h4>
                  
                  <a href="/rails/guides/tr/action_cable_overview">Action Cable</a>
                  
                </div>
                               
              </div>
            </div>
            <a href="https://github.com/dilankaya127/rails-tr-TR">GitHub</a>
          </nav>
        </div>
      </div>
    </header>

    <main class="main">
      <div class="container">
        <div class="guide-container">
  <button id="toc-toggle" class="toc-toggle">☰ İçindekiler</button>

  <aside class="guide-sidebar">
    <div class="guide-toc">
      <!-- <h3>İçindekiler</h3> -->
      <div id="toc"></div>
      <button class="toc-close" aria-label="İçindekileri Kapat">✕</button>
    </div>

    <!-- <div class="guide-nav">
            <h3>Diğer(Tüm) Kılavuzlar</h3>
            <ul>
                <li><a href="/rails/guides/tr/getting_started">Rails ile Başlarken</a></li>
                <li><a href="/rails/guides/en/active_record_basics">Active Record Temelleri</a></li>
                <li><a href="/rails/guides//en/action_controller_overview">Action Controller</a></li>
                <li><a href="/rails/guides/tr/action_cable_overview">Action Cable</a></li>
            </ul>
        </div> -->
  </aside>

  <article class="guide-content">
    <!-- <header class="guide-header">
            <h1>Action View Overview</h1>
            
        </header> -->

    <div class="guide-body"><p><strong>DO NOT READ THIS FILE ON GITHUB, GUIDES ARE PUBLISHED ON <a href="https://guides.rubyonrails.org">https://guides.rubyonrails.org</a>.</strong></p>

<h1 id="action-view-overview">Action View Overview</h1>

<p>After reading this guide, you will know:</p>

<ul>
  <li>What Action View is and how to use it with Rails.</li>
  <li>How best to use templates, partials, and layouts.</li>
  <li>How to use localized views.</li>
</ul>

<hr />

<h2 id="what-is-action-view">What is Action View?</h2>

<p>Action View is the V in
<a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a>.
<a href="action_controller_overview.html">Action Controller</a> and Action View work
together to handle web requests. Action Controller is concerned with
communicating with the model layer (of MVC) and retrieving data. Action View is
then responsible for rendering a response body to the web request using that
data.</p>

<p>By default, Action View templates (also referred to simply as “views”) are
written using Embedded Ruby (ERB), which allows using Ruby code within HTML
documents.</p>

<p>Action View provides many <a href="#helpers">helper</a> methods for dynamically generating
HTML tags for forms, dates, and strings. It’s also possible to add custom
helpers to your application as needed.</p>

<p>NOTE: Action View can make use of Active Model features like
<a href="https://api.rubyonrails.org/classes/ActiveModel/Conversion.html#method-i-to_param"><code class="language-plaintext highlighter-rouge">to_param</code></a>
and
<a href="https://api.rubyonrails.org/classes/ActiveModel/Conversion.html#method-i-to_partial_path"><code class="language-plaintext highlighter-rouge">to_partial_path</code></a>
to simplify code. That doesn’t mean Action View depends on Active Model. Action
View is an independent package that can be used with any Ruby library.</p>

<h2 id="using-action-view-with-rails">Using Action View with Rails</h2>

<p>Action View templates (aka “views”) are stored in subdirectories in the
<code class="language-plaintext highlighter-rouge">app/views</code> directory. There is a subdirectory matching the name of each
controller. The view files inside that subdirectory are used to render specific
views as a response to controller actions.</p>

<p>For example, when you use scaffolding to generate an <code class="language-plaintext highlighter-rouge">article</code> resource, Rails
generates the following files in <code class="language-plaintext highlighter-rouge">app/views/articles</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate scaffold article
      <span class="o">[</span>...]
      invoke  scaffold_controller
      create    app/controllers/articles_controller.rb
      invoke    erb
      create      app/views/articles
      create      app/views/articles/index.html.erb
      create      app/views/articles/edit.html.erb
      create      app/views/articles/show.html.erb
      create      app/views/articles/new.html.erb
      create      app/views/articles/_form.html.erb
      <span class="o">[</span>...]
</code></pre></div></div>

<p>The file names follow a Rails naming convention. They share their name with the
associated controller action. For example the <code class="language-plaintext highlighter-rouge">index.html.erb</code>, <code class="language-plaintext highlighter-rouge">edit.html.erb</code>,
etc.</p>

<p>By following this naming convention, Rails will automatically find and render
the matching view at the end of a controller action, without you having to
specify it. For example, the <code class="language-plaintext highlighter-rouge">index</code> action in the <code class="language-plaintext highlighter-rouge">articles_controller.rb</code> will
automatically render the <code class="language-plaintext highlighter-rouge">index.html.erb</code> view inside the <code class="language-plaintext highlighter-rouge">app/views/articles/</code>
directory. The name and the location of the file are both important.</p>

<p>The final HTML returned to the client is composed of a combination of the
<code class="language-plaintext highlighter-rouge">.html.erb</code> ERB file, a layout template that wraps it, and all the partials that
the ERB file may reference. In the rest of this guide, you will find more
details about each of the three components: <code class="language-plaintext highlighter-rouge">Templates</code>, <code class="language-plaintext highlighter-rouge">Partials</code>, <code class="language-plaintext highlighter-rouge">Layouts</code>.</p>

<h2 id="templates">Templates</h2>

<p>Action View templates can be written in different formats. If the template file
has a <code class="language-plaintext highlighter-rouge">.erb</code> extension, it uses embedded Ruby to build an HTML response. If the
template has a <code class="language-plaintext highlighter-rouge">.jbuilder</code> extension, it uses the
<a href="https://github.com/rails/jbuilder">Jbuilder</a> gem to build a JSON response. And
a template with a <code class="language-plaintext highlighter-rouge">.builder</code> extension uses the
<a href="https://github.com/rails/builder"><code class="language-plaintext highlighter-rouge">Builder::XmlMarkup</code></a> library to build an XML
response.</p>

<p>Rails uses the file extension to distinguish among multiple template systems.
For example, an HTML file using the ERB template system will have <code class="language-plaintext highlighter-rouge">.html.erb</code> as
a file extension, and a JSON file using the Jbuilder template system will have
the <code class="language-plaintext highlighter-rouge">.json.jbuilder</code> file extension. Other libraries may add other template
types and file extensions as well.</p>

<h3 id="erb">ERB</h3>

<p>An ERB template is a way to sprinkle Ruby code within static HTML using special
ERB tags like <code class="language-plaintext highlighter-rouge">&lt;% %&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;%= %&gt;</code>.</p>

<p>When Rails processes the ERB view templates ending with <code class="language-plaintext highlighter-rouge">.html.erb</code>, it
evaluates the embedded Ruby code and replaces the ERB tags with the dynamic
output. That dynamic content is combined with the static HTML markup to form the
final HTML response.</p>

<p>Within an ERB template, Ruby code can be included using both <code class="language-plaintext highlighter-rouge">&lt;% %&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;%=
%&gt;</code> tags. The <code class="language-plaintext highlighter-rouge">&lt;% %&gt;</code> tag (without the <code class="language-plaintext highlighter-rouge">=</code>) is used when you want to execute
Ruby code but not directly output the result, such as conditions or loops. The
tag <code class="language-plaintext highlighter-rouge">&lt;%= %&gt;</code> is used for Ruby code that generates an output and you want that
output rendered within the template, such as a model attribute like
<code class="language-plaintext highlighter-rouge">person.name</code> in this example:</p>

<pre><code class="language-html+erb">&lt;h1&gt;Names&lt;/h1&gt;
&lt;% @people.each do |person| %&gt;
  Name: &lt;%= person.name %&gt;&lt;br&gt;
&lt;% end %&gt;
</code></pre>

<p>The loop is set up using regular embedding tags (<code class="language-plaintext highlighter-rouge">&lt;% %&gt;</code>) and the name is
inserted using the output embedding tags (<code class="language-plaintext highlighter-rouge">&lt;%= %&gt;</code>).</p>

<p>Note that functions such as <code class="language-plaintext highlighter-rouge">print</code> and <code class="language-plaintext highlighter-rouge">puts</code> won’t be rendered to the view
with ERB templates. So something like this would not work:</p>

<pre><code class="language-html+erb">&lt;%# WRONG %&gt;
Hi, Mr. &lt;% puts "Frodo" %&gt;
</code></pre>

<p>The above example shows that comments can be added in ERB within <code class="language-plaintext highlighter-rouge">&lt;%# %&gt;</code> tag.</p>

<p>To suppress leading and trailing whitespaces, you can use <code class="language-plaintext highlighter-rouge">&lt;%-</code> <code class="language-plaintext highlighter-rouge">-%&gt;</code>
interchangeably with <code class="language-plaintext highlighter-rouge">&lt;%</code> and <code class="language-plaintext highlighter-rouge">%&gt;</code>.</p>

<h3 id="jbuilder">Jbuilder</h3>

<p><code class="language-plaintext highlighter-rouge">Jbuilder</code> is a gem that’s maintained by the Rails team and included in the
default Rails <code class="language-plaintext highlighter-rouge">Gemfile</code>. It is used to build JSON responses using templates.</p>

<p>If you don’t have it, you can add the following to your <code class="language-plaintext highlighter-rouge">Gemfile</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gem</span> <span class="s2">"jbuilder"</span>
</code></pre></div></div>

<p>A <code class="language-plaintext highlighter-rouge">Jbuilder</code> object named <code class="language-plaintext highlighter-rouge">json</code> is automatically made available to templates
with a <code class="language-plaintext highlighter-rouge">.jbuilder</code> extension.</p>

<p>Here is a basic example:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">json</span><span class="p">.</span><span class="nf">name</span><span class="p">(</span><span class="s2">"Alex"</span><span class="p">)</span>
<span class="n">json</span><span class="p">.</span><span class="nf">email</span><span class="p">(</span><span class="s2">"alex@example.com"</span><span class="p">)</span>
</code></pre></div></div>

<p>would produce:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alex"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alex@example.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>See the <a href="https://github.com/rails/jbuilder#jbuilder">Jbuilder documentation</a> for
more examples.</p>

<h3 id="builder">Builder</h3>

<p>Builder templates are a more programmatic alternative to ERB. It’s similar to
<code class="language-plaintext highlighter-rouge">JBuilder</code> but is used to generate XML, instead of JSON.</p>

<p>An <code class="language-plaintext highlighter-rouge">XmlMarkup</code> object named <code class="language-plaintext highlighter-rouge">xml</code> is automatically made available to templates
with a <code class="language-plaintext highlighter-rouge">.builder</code> extension.</p>

<p>Here is a basic examples:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">xml</span><span class="p">.</span><span class="nf">em</span><span class="p">(</span><span class="s2">"emphasized"</span><span class="p">)</span>
<span class="n">xml</span><span class="p">.</span><span class="nf">em</span> <span class="p">{</span> <span class="n">xml</span><span class="p">.</span><span class="nf">b</span><span class="p">(</span><span class="s2">"emph &amp; bold"</span><span class="p">)</span> <span class="p">}</span>
<span class="n">xml</span><span class="p">.</span><span class="nf">a</span><span class="p">(</span><span class="s2">"A Link"</span><span class="p">,</span> <span class="s2">"href"</span> <span class="o">=&gt;</span> <span class="s2">"https://rubyonrails.org"</span><span class="p">)</span>
<span class="n">xml</span><span class="p">.</span><span class="nf">target</span><span class="p">(</span><span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"compile"</span><span class="p">,</span> <span class="s2">"option"</span> <span class="o">=&gt;</span> <span class="s2">"fast"</span><span class="p">)</span>
</code></pre></div></div>

<p>which would produce:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;em&gt;</span>emphasized<span class="nt">&lt;/em&gt;</span>
<span class="nt">&lt;em&gt;&lt;b&gt;</span>emph <span class="ni">&amp;amp;</span> bold<span class="nt">&lt;/b&gt;&lt;/em&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://rubyonrails.org"</span><span class="nt">&gt;</span>A link<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;target</span> <span class="na">option=</span><span class="s">"fast"</span> <span class="na">name=</span><span class="s">"compile"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>Any method with a block will be treated as an XML markup tag with nested markup
in the block. For example, the following:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">xml</span><span class="p">.</span><span class="nf">div</span> <span class="p">{</span>
  <span class="n">xml</span><span class="p">.</span><span class="nf">h1</span><span class="p">(</span><span class="vi">@person</span><span class="p">.</span><span class="nf">name</span><span class="p">)</span>
  <span class="n">xml</span><span class="p">.</span><span class="nf">p</span><span class="p">(</span><span class="vi">@person</span><span class="p">.</span><span class="nf">bio</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>would produce something like:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;h1&gt;</span>David Heinemeier Hansson<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;p&gt;</span>A product of Danish Design during the Winter of '79...<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>See <a href="https://github.com/rails/builder">Builder documentation</a> for more examples.</p>

<h3 id="template-compilation">Template Compilation</h3>

<p>By default, Rails will compile each template to a method to render it. In the
development environment, when you alter a template, Rails will check the file’s
modification time and recompile it.</p>

<p>There is also Fragment Caching for when different parts of the page need to be
cached and expired separately. Learn more about it in the <a href="caching_with_rails.html#fragment-caching">caching
guide</a>.</p>

<h2 id="partials">Partials</h2>

<p>Partial templates - usually just called “partials” - are a way of breaking up
the view templates into smaller reusable chunks. With partials, you can extract
a piece of code from your main template to a separate smaller file, and render
that file in the main template. You can also pass data to the partial files from
the main template.</p>

<p>Let’s see this in action with some examples:</p>

<h3 id="rendering-partials">Rendering Partials</h3>

<p>To render a partial as part of a view, you use the
<a href="https://api.rubyonrails.org/classes/ActionView/Helpers/RenderingHelper.html#method-i-render"><code class="language-plaintext highlighter-rouge">render</code></a>
method within the view:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"product"</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>This will look for a file named <code class="language-plaintext highlighter-rouge">_product.html.erb</code> in the same folder to render
within that view. Partial file names start with leading underscore character by
convention. The file name distinguishes partials from regular views. However, no
underscore is used when referring to partials for rendering within a view. This
is true even when you reference a partial from another directory:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"application/product"</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>That code will look for and display a partial file named <code class="language-plaintext highlighter-rouge">_product.html.erb</code> in
<code class="language-plaintext highlighter-rouge">app/views/application/</code>.</p>

<h3 id="using-partials-to-simplify-views">Using Partials to Simplify Views</h3>

<p>One way to use partials is to treat them as the equivalent of methods. A way to
move details out of a view so that you can grasp what’s going on more easily.
For example, you might have a view that looks like this:</p>

<pre><code class="language-html+erb">&lt;%= render "application/ad_banner" %&gt;

&lt;h1&gt;Products&lt;/h1&gt;

&lt;p&gt;Here are a few of our fine products:&lt;/p&gt;
&lt;% @products.each do |product| %&gt;
  &lt;%= render partial: "product", locals: { product: product } %&gt;
&lt;% end %&gt;

&lt;%= render "application/footer" %&gt;
</code></pre>

<p>Here, the <code class="language-plaintext highlighter-rouge">_ad_banner.html.erb</code> and <code class="language-plaintext highlighter-rouge">_footer.html.erb</code> partials could contain
content that is shared among many pages in your application. You don’t need to
see the details of these sections when you’re focused on a Products’ page.</p>

<p>The above example also uses the <code class="language-plaintext highlighter-rouge">_product.html.erb</code> partial. This partial
contains details for rendering an individual product and is used to render each
product in the collection <code class="language-plaintext highlighter-rouge">@products</code>.</p>

<h3 id="passing-data-to-partials-with-locals-option">Passing Data to Partials with <code class="language-plaintext highlighter-rouge">locals</code> Option</h3>

<p>When rendering a partial, you can pass data to the partial from the rendering
view. You use the <code class="language-plaintext highlighter-rouge">locals:</code> options hash for this. Each key in the <code class="language-plaintext highlighter-rouge">locals:</code>
option is available as a partial-local variable:</p>

<pre><code class="language-html+erb">&lt;%# app/views/products/show.html.erb %&gt;

&lt;%= render partial: "product", locals: { my_product: @product } %&gt;

&lt;%# app/views/products/_product.html.erb %&gt;

&lt;%= tag.div id: dom_id(my_product) do %&gt;
  &lt;h1&gt;&lt;%= my_product.name %&gt;&lt;/h1&gt;
&lt;% end %&gt;
</code></pre>

<p>A “partial-local variable” is a variable that is local to a given partial and
only available from within that partial. In the above example, <code class="language-plaintext highlighter-rouge">my_product</code> is a
partial-local variable. It was assigned the value of <code class="language-plaintext highlighter-rouge">@product</code> when passed to
the partial from the original view.</p>

<p>Note that typically we’d simply call this local variable <code class="language-plaintext highlighter-rouge">product</code>. We are using
<code class="language-plaintext highlighter-rouge">my_product</code> to distinguish it from the instance variable name and template name
in this example.</p>

<p>Since <code class="language-plaintext highlighter-rouge">locals</code> is a hash, you can pass in multiple variables as needed, like
<code class="language-plaintext highlighter-rouge">locals: { my_product: @product, my_reviews: @reviews }</code>.</p>

<p>However, if a template refers to a variable that <em>isn’t</em> passed into the view as
part of the <code class="language-plaintext highlighter-rouge">locals:</code> option, the template will raise an
<code class="language-plaintext highlighter-rouge">ActionView::Template::Error</code>:</p>

<pre><code class="language-html+erb">&lt;%# app/views/products/_product.html.erb %&gt;

&lt;%= tag.div id: dom_id(my_product) do %&gt;
  &lt;h1&gt;&lt;%= my_product.name %&gt;&lt;/h1&gt;

  &lt;%# =&gt; raises ActionView::Template::Error for `product_reviews` %&gt;
  &lt;% product_reviews.each do |review| %&gt;
    &lt;%# ... %&gt;
  &lt;% end %&gt;
&lt;% end %&gt;
</code></pre>

<h3 id="using-local_assigns">Using <code class="language-plaintext highlighter-rouge">local_assigns</code></h3>

<p>Each partial has a method called [local_assigns][] available. You can use this
method to access keys passed via the <code class="language-plaintext highlighter-rouge">locals:</code> option. If a partial was not
rendered with <code class="language-plaintext highlighter-rouge">:some_key</code> set, the value of <code class="language-plaintext highlighter-rouge">local_assigns[:some_key]</code> will be
<code class="language-plaintext highlighter-rouge">nil</code> within the partial.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">product_reviews</code> is <code class="language-plaintext highlighter-rouge">nil</code> in the below example since only
<code class="language-plaintext highlighter-rouge">product</code> is set in <code class="language-plaintext highlighter-rouge">locals:</code>:</p>

<pre><code class="language-html+erb">&lt;%# app/views/products/show.html.erb %&gt;

&lt;%= render partial: "product", locals: { product: @product } %&gt;

&lt;%# app/views/products/_product.html.erb %&gt;

&lt;% local_assigns[:product]          # =&gt; "#&lt;Product:0x0000000109ec5d10&gt;" %&gt;
&lt;% local_assigns[:product_reviews]  # =&gt; nil %&gt;
</code></pre>

<p>One use case for <code class="language-plaintext highlighter-rouge">local_assigns</code> is optionally passing in a local variable and
then conditionally performing an action in the partial based on whether the
local variable is set. For example:</p>

<pre><code class="language-html+erb">&lt;% if local_assigns[:redirect] %&gt;
  &lt;%= form.hidden_field :redirect, value: true %&gt;
&lt;% end %&gt;
</code></pre>

<p>Another example from Active Storage’s <code class="language-plaintext highlighter-rouge">_blob.html.erb</code>. This one sets the size
based on whether <code class="language-plaintext highlighter-rouge">in_gallery</code> local variable is set when rendering the partial
that contains this line:</p>

<pre><code class="language-html+erb">&lt;%= image_tag blob.representation(resize_to_limit: local_assigns[:in_gallery] ? [ 800, 600 ] : [ 1024, 768 ]) %&gt;
</code></pre>

<h3 id="render-without-partial-and-locals-options"><code class="language-plaintext highlighter-rouge">render</code> without <code class="language-plaintext highlighter-rouge">partial</code> and <code class="language-plaintext highlighter-rouge">locals</code> Options</h3>

<p>In the above examples, <code class="language-plaintext highlighter-rouge">render</code> takes 2 options: <code class="language-plaintext highlighter-rouge">partial</code> and <code class="language-plaintext highlighter-rouge">locals</code>. But if
these are the only options you need to use, you can skip the keys, <code class="language-plaintext highlighter-rouge">partial</code> and
<code class="language-plaintext highlighter-rouge">locals</code>, and specify the values only.</p>

<p>For example, instead of:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">product: </span><span class="vi">@product</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>You can write:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"product"</span><span class="p">,</span> <span class="ss">product: </span><span class="vi">@product</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>You can also use this shorthand based on conventions:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="vi">@product</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>This will look for a partial named <code class="language-plaintext highlighter-rouge">_product.html.erb</code> in <code class="language-plaintext highlighter-rouge">app/views/products/</code>,
as well as pass a local named <code class="language-plaintext highlighter-rouge">product</code> set to the value <code class="language-plaintext highlighter-rouge">@product</code>.</p>

<h3 id="the-as-and-object-options">The <code class="language-plaintext highlighter-rouge">as</code> and <code class="language-plaintext highlighter-rouge">object</code> Options</h3>

<p>By default, objects passed to the template are in a local variable with the same
name as the template. So, given:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="vi">@product</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>within the <code class="language-plaintext highlighter-rouge">_product.html.erb</code> partial you’ll get <code class="language-plaintext highlighter-rouge">@product</code> instance variable
in the local variable <code class="language-plaintext highlighter-rouge">product</code>, as if you had written:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">product: </span><span class="vi">@product</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">object</code> option can be used to specify a different name. This is useful when
the template’s object is elsewhere (e.g. in a different instance variable or in
a local variable).</p>

<p>For example, instead of:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">product: </span><span class="vi">@item</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>you can write:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">object: </span><span class="vi">@item</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>This assigns the instance variable <code class="language-plaintext highlighter-rouge">@item</code> to a partial local variable named
<code class="language-plaintext highlighter-rouge">product</code>. What if you wanted to change the local variable name from the default
<code class="language-plaintext highlighter-rouge">product</code> to something else? You can use the <code class="language-plaintext highlighter-rouge">:as</code> option for that.</p>

<p>With the <code class="language-plaintext highlighter-rouge">as</code> option, you can specify a different name for the local variable
like this:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">object: </span><span class="vi">@item</span><span class="p">,</span> <span class="ss">as: </span><span class="s2">"item"</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>This is equivalent to</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">item: </span><span class="vi">@item</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<h3 id="rendering-collections">Rendering Collections</h3>

<p>It’s common for a view to iterate over a collection, such as <code class="language-plaintext highlighter-rouge">@products</code>, and
render a partial template for each object in the collection. This pattern has
been implemented as a single method that accepts an array and renders a partial
for each one of the elements in the array.</p>

<p>So this example for rendering all the products:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%</span> <span class="vi">@products</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">product</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">product: </span><span class="n">product</span> <span class="p">}</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>can be rewritten in a single line:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">collection: </span><span class="vi">@products</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>When a partial is called with a collection, the individual instances of the
partial have access to the member of the collection being rendered via a
variable named after the partial. In this case, since the partial is
<code class="language-plaintext highlighter-rouge">_product.html.erb</code>, you can use <code class="language-plaintext highlighter-rouge">product</code> to refer to the collection member
that is being rendered.</p>

<p>You can also use the following conventions based shorthand syntax for rendering
collections.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="vi">@products</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>The above assumes that <code class="language-plaintext highlighter-rouge">@products</code> is a collection of <code class="language-plaintext highlighter-rouge">Product</code> instances. Rails
uses naming conventions to determine the name of the partial to use by looking
at the model name in the collection, <code class="language-plaintext highlighter-rouge">Product</code> in this case. In fact, you can
even render a collection made up of instances of different models using this
shorthand, and Rails will choose the proper partial for each member of the
collection.</p>

<h3 id="spacer-templates">Spacer Templates</h3>

<p>You can also specify a second partial to be rendered between instances of the
main partial by using the <code class="language-plaintext highlighter-rouge">:spacer_template</code> option:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="vi">@products</span><span class="p">,</span> <span class="ss">spacer_template: </span><span class="s2">"product_ruler"</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Rails will render the <code class="language-plaintext highlighter-rouge">_product_ruler.html.erb</code> partial (with no data passed to
it) between each pair of <code class="language-plaintext highlighter-rouge">_product.html.erb</code> partials.</p>

<h3 id="counter-variables">Counter Variables</h3>

<p>Rails also makes a counter variable available within a partial called by the
collection. The variable is named after the title of the partial followed by
<code class="language-plaintext highlighter-rouge">_counter</code>. For example, when rendering a collection <code class="language-plaintext highlighter-rouge">@products</code> the partial
<code class="language-plaintext highlighter-rouge">_product.html.erb</code> can access the variable <code class="language-plaintext highlighter-rouge">product_counter</code>. The variable
indexes the number of times the partial has been rendered within the enclosing
view, starting with a value of <code class="language-plaintext highlighter-rouge">0</code> on the first render.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;%# index.html.erb %&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">collection: </span><span class="vi">@products</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;%# _product.html.erb %&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">product_counter</span> <span class="cp">%&gt;</span> # 0 for the first product, 1 for the second product...
</code></pre></div></div>

<p>This also works when the local variable name is changed using the <code class="language-plaintext highlighter-rouge">as:</code> option.
So if you did <code class="language-plaintext highlighter-rouge">as: :item</code>, the counter variable would be <code class="language-plaintext highlighter-rouge">item_counter</code>.</p>

<p>Note: The following two sections, <a href="#strict-locals">Strict Locals</a> and <a href="#local-assigns-with-pattern-matching">Local
Assigns with Pattern Matching</a> are more
advanced features of using partials, included here for completeness.</p>

<h3 id="local_assigns-with-pattern-matching"><code class="language-plaintext highlighter-rouge">local_assigns</code> with Pattern Matching</h3>

<p>Since <code class="language-plaintext highlighter-rouge">local_assigns</code> is a <code class="language-plaintext highlighter-rouge">Hash</code>, it’s compatible with <a href="https://docs.ruby-lang.org/en/master/syntax/pattern_matching_rdoc.html">Ruby 3.1’s pattern
matching assignment
operator</a>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">local_assigns</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="n">product</span><span class="p">:,</span> <span class="o">**</span><span class="n">options</span> <span class="p">}</span>
<span class="n">product</span> <span class="c1"># =&gt; "#&lt;Product:0x0000000109ec5d10&gt;"</span>
<span class="n">options</span> <span class="c1"># =&gt; {}</span>
</code></pre></div></div>

<p>When keys other than <code class="language-plaintext highlighter-rouge">:product</code> are assigned into a partial-local <code class="language-plaintext highlighter-rouge">Hash</code>
variable, they can be splatted into helper method calls:</p>

<pre><code class="language-html+erb">&lt;%# app/views/products/_product.html.erb %&gt;

&lt;% local_assigns =&gt; { product:, **options } %&gt;

&lt;%= tag.div id: dom_id(product), **options do %&gt;
  &lt;h1&gt;&lt;%= product.name %&gt;&lt;/h1&gt;
&lt;% end %&gt;

&lt;%# app/views/products/show.html.erb %&gt;

&lt;%= render "products/product", product: @product, class: "card" %&gt;
&lt;%# =&gt; &lt;div id="product_1" class="card"&gt;
  #      &lt;h1&gt;A widget&lt;/h1&gt;
  #    &lt;/div&gt;
%&gt;
</code></pre>

<p>Pattern matching assignment also supports variable renaming:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">local_assigns</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">product: </span><span class="n">record</span> <span class="p">}</span>
<span class="n">product</span>             <span class="c1"># =&gt; "#&lt;Product:0x0000000109ec5d10&gt;"</span>
<span class="n">record</span>              <span class="c1"># =&gt; "#&lt;Product:0x0000000109ec5d10&gt;"</span>
<span class="n">product</span> <span class="o">==</span> <span class="n">record</span>   <span class="c1"># =&gt; true</span>
</code></pre></div></div>

<p>You can also conditionally read a variable, then fall back to a default value
when the key isn’t part of the <code class="language-plaintext highlighter-rouge">locals:</code> options, using <code class="language-plaintext highlighter-rouge">fetch</code>:</p>

<pre><code class="language-html+erb">&lt;%# app/views/products/_product.html.erb %&gt;

&lt;% local_assigns.fetch(:related_products, []).each do |related_product| %&gt;
  &lt;%# ... %&gt;
&lt;% end %&gt;
</code></pre>

<p>Combining Ruby 3.1’s pattern matching assignment with calls to
<a href="https://api.rubyonrails.org/classes/Hash.html#method-i-with_defaults">Hash#with_defaults</a>
enables compact partial-local default variable assignments:</p>

<pre><code class="language-html+erb">&lt;%# app/views/products/_product.html.erb %&gt;

&lt;% local_assigns.with_defaults(related_products: []) =&gt; { product:, related_products: } %&gt;

&lt;%= tag.div id: dom_id(product) do %&gt;
  &lt;h1&gt;&lt;%= product.name %&gt;&lt;/h1&gt;

  &lt;% related_products.each do |related_product| %&gt;
    &lt;%# ... %&gt;
  &lt;% end %&gt;
&lt;% end %&gt;
</code></pre>

<p>[local_assigns]:
    https://api.rubyonrails.org/classes/ActionView/Template.html#method-i-local_assigns</p>

<h3 id="strict-locals">Strict Locals</h3>

<p>Action View partials are compiled into regular Ruby methods under the hood.
Because it is impossible in Ruby to dynamically create local variables, every single combination of <code class="language-plaintext highlighter-rouge">locals</code> passed to
a partial requires compiling another version:</p>

<pre><code class="language-html+erb">&lt;%# app/views/articles/show.html.erb %&gt;
&lt;%= render partial: "article", layout: "box", locals: { article: @article } %&gt;
&lt;%= render partial: "article", layout: "box", locals: { article: @article, theme: "dark" } %&gt;
</code></pre>

<p>The above snippet will cause the partial to be compiled twice, taking more time and using more memory.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">_render_template_2323231_article_show</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">local_assigns</span><span class="p">,</span> <span class="n">article</span><span class="p">:)</span>
  <span class="c1"># ...</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">_render_template_3243454_article_show</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">local_assigns</span><span class="p">,</span> <span class="n">article</span><span class="p">:,</span> <span class="n">theme</span><span class="p">:)</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre></div></div>

<p>When the number of combinations is small, it’s not really a problem, but if it’s large it can waste
a sizeable amount of memory and take a long time to compile. To counter act this you can use
strict locals to define the compiled partial signature, and ensure only a single version of the partial is compiled:</p>

<pre><code class="language-html+erb">&lt;%# locals: (article:, theme: "light") -%&gt;
...
</code></pre>

<p>You can enforce how many and which <code class="language-plaintext highlighter-rouge">locals</code> a template accepts, set default
values, and more with a <code class="language-plaintext highlighter-rouge">locals:</code> signature, using the same syntax as Ruby method signatures.</p>

<p>Here are some examples of the <code class="language-plaintext highlighter-rouge">locals:</code> signature:</p>

<pre><code class="language-html+erb">&lt;%# app/views/messages/_message.html.erb %&gt;

&lt;%# locals: (message:) -%&gt;
&lt;%= message %&gt;
</code></pre>

<p>The above makes <code class="language-plaintext highlighter-rouge">message</code> a required local variable. Rendering the partial
without a <code class="language-plaintext highlighter-rouge">:message</code> local variable argument will raise an exception:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">render</span> <span class="s2">"messages/message"</span>
<span class="c1"># =&gt; ActionView::Template::Error: missing local: :message for app/views/messages/_message.html.erb</span>
</code></pre></div></div>

<p>If a default value is set then it can be used if <code class="language-plaintext highlighter-rouge">message</code> is not passed in
<code class="language-plaintext highlighter-rouge">locals:</code>:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;%# app/views/messages/_message.html.erb %&gt;</span>

<span class="c">&lt;%# locals: (message: "Hello, world!") -%&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">message</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Rendering the partial without a <code class="language-plaintext highlighter-rouge">:message</code> local variable uses the default value
set in the <code class="language-plaintext highlighter-rouge">locals:</code> signature:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">render</span> <span class="s2">"messages/message"</span>
<span class="c1"># =&gt; "Hello, world!"</span>
</code></pre></div></div>

<p>Rendering the partial with local variables not specified in the <code class="language-plaintext highlighter-rouge">local:</code> signature will also raise an exception:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">render</span> <span class="s2">"messages/message"</span><span class="p">,</span> <span class="ss">unknown_local: </span><span class="s2">"will raise"</span>
<span class="c1"># =&gt; ActionView::Template::Error: unknown local: :unknown_local for app/views/messages/_message.html.erb</span>
</code></pre></div></div>

<p>You can allow optional local variable arguments with the double splat <code class="language-plaintext highlighter-rouge">**</code>
operator:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c">&lt;%# app/views/messages/_message.html.erb %&gt;</span>

<span class="c">&lt;%# locals: (message: "Hello, world!", **attributes) -%&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">tag</span><span class="p">.</span><span class="nf">p</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="o">**</span><span class="n">attributes</span><span class="p">)</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Or you can disable <code class="language-plaintext highlighter-rouge">locals</code> entirely by setting the <code class="language-plaintext highlighter-rouge">locals:</code> to empty <code class="language-plaintext highlighter-rouge">()</code>:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;%# app/views/messages/_message.html.erb %&gt;</span>

<span class="c">&lt;%# locals: () %&gt;</span>
</code></pre></div></div>

<p>Rendering the partial with <em>any</em> local variable arguments will raise an
exception:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">render</span> <span class="s2">"messages/message"</span><span class="p">,</span> <span class="ss">unknown_local: </span><span class="s2">"will raise"</span>
<span class="c1"># =&gt; ActionView::Template::Error: no locals accepted for app/views/messages/_message.html.erb</span>
</code></pre></div></div>

<p>Action View will process the <code class="language-plaintext highlighter-rouge">locals:</code> signature in any templating engine
that supports <code class="language-plaintext highlighter-rouge">#</code>-prefixed comments, and will read the signature from any
line in the partial.</p>

<p>CAUTION: Only keyword arguments are supported. Defining positional or block
arguments will raise an Action View Error at render-time.</p>

<p>The <code class="language-plaintext highlighter-rouge">local_assigns</code> method does not contain default values specified in the
<code class="language-plaintext highlighter-rouge">local:</code> signature. To access a local variable with a default value that
is named the same as a reserved Ruby keyword, like <code class="language-plaintext highlighter-rouge">class</code> or <code class="language-plaintext highlighter-rouge">if</code>, the values
can be accessed through <code class="language-plaintext highlighter-rouge">binding.local_variable_get</code>:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;%# locals: (class: "message") %&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"</span><span class="cp">&lt;%=</span> <span class="nb">binding</span><span class="p">.</span><span class="nf">local_variable_get</span><span class="p">(</span><span class="ss">:class</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>...<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<h2 id="layouts">Layouts</h2>

<p>Layouts can be used to render a common view template around the results of Rails
controller actions. A Rails application can have multiple layouts that pages can
be rendered within.</p>

<p>For example, an application might have one layout for a logged in user and
another for the marketing part of the site. The logged in user layout might
include top-level navigation that should be present across many controller
actions. The sales layout for a SaaS app might include top-level navigation for
things like “Pricing” and “Contact Us” pages. Different layouts can have a
different header and footer content.</p>

<p>To find the layout for the current controller action, Rails first looks for a
file in <code class="language-plaintext highlighter-rouge">app/views/layouts</code> with the same base name as the controller. For
example, rendering actions from the <code class="language-plaintext highlighter-rouge">ProductsController</code> class will use
<code class="language-plaintext highlighter-rouge">app/views/layouts/products.html.erb</code>.</p>

<p>Rails will use <code class="language-plaintext highlighter-rouge">app/views/layouts/application.html.erb</code> if a controller-specific layout does not exist.</p>

<p>Here is an example of a simple layout in <code class="language-plaintext highlighter-rouge">application.html.erb</code> file:</p>

<pre><code class="language-html+erb">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;&lt;%= "Your Rails App" %&gt;&lt;/title&gt;
  &lt;%= csrf_meta_tags %&gt;
  &lt;%= csp_meta_tag %&gt;
  &lt;%= stylesheet_link_tag "application", "data-turbo-track": "reload" %&gt;
  &lt;%= javascript_importmap_tags %&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;nav&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;%= link_to "Home", root_path %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%= link_to "Products", products_path %&gt;&lt;/li&gt;
    &lt;!-- Additional navigation links here --&gt;
  &lt;/ul&gt;
&lt;/nav&gt;

&lt;%= yield %&gt;

&lt;footer&gt;
  &lt;p&gt;&amp;copy; &lt;%= Date.current.year %&gt; Your Company&lt;/p&gt;
&lt;/footer&gt;
</code></pre>

<p>In the above example layout, view content will be rendered in place of <code class="language-plaintext highlighter-rouge">&lt;%=
yield %&gt;</code>, and surrounded by the same <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;nav&gt;</code>, and <code class="language-plaintext highlighter-rouge">&lt;footer&gt;</code> content.</p>

<p>Rails provides more ways to assign specific layouts to individual controllers
and actions. You can learn more about layouts in general in the <a href="layouts_and_rendering.html">Layouts and
Rendering in Rails</a> guide.</p>

<h3 id="partial-layouts">Partial Layouts</h3>

<p>Partials can have their own layouts applied to them. These layouts are different
from those applied to a controller action, but they work in a similar fashion.</p>

<p>Let’s say you’re displaying an article on a page which should be wrapped in a
<code class="language-plaintext highlighter-rouge">div</code> for display purposes. First, you’ll create a new <code class="language-plaintext highlighter-rouge">Article</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Article</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">body: </span><span class="s2">"Partial Layouts are cool!"</span><span class="p">)</span>
</code></pre></div></div>

<p>In the <code class="language-plaintext highlighter-rouge">show</code> template, you’ll render the <code class="language-plaintext highlighter-rouge">_article</code> partial wrapped in the
<code class="language-plaintext highlighter-rouge">box</code> layout:</p>

<pre><code class="language-html+erb">&lt;%# app/views/articles/show.html.erb %&gt;
&lt;%= render partial: 'article', layout: 'box', locals: { article: @article } %&gt;
</code></pre>

<p>The <code class="language-plaintext highlighter-rouge">box</code> layout simply wraps the <code class="language-plaintext highlighter-rouge">_article</code> partial in a <code class="language-plaintext highlighter-rouge">div</code>:</p>

<pre><code class="language-html+erb">&lt;%# app/views/articles/_box.html.erb %&gt;
&lt;div class="box"&gt;
  &lt;%= yield %&gt;
&lt;/div&gt;
</code></pre>

<p>Note that the partial layout has access to the local <code class="language-plaintext highlighter-rouge">article</code> variable that was
passed into the <code class="language-plaintext highlighter-rouge">render</code> call, although it is not being used within
<code class="language-plaintext highlighter-rouge">_box.html.erb</code> in this case.</p>

<p>Unlike application-wide layouts, partial layouts still have the underscore
prefix in their name.</p>

<p>You can also render a block of code within a partial layout instead of calling
<code class="language-plaintext highlighter-rouge">yield</code>. For example, if you didn’t have the <code class="language-plaintext highlighter-rouge">_article</code> partial, you could do
this instead:</p>

<pre><code class="language-html+erb">&lt;%# app/views/articles/show.html.erb %&gt;
&lt;%= render(layout: 'box', locals: { article: @article }) do %&gt;
  &lt;div&gt;
    &lt;p&gt;&lt;%= article.body %&gt;&lt;/p&gt;
  &lt;/div&gt;
&lt;% end %&gt;
</code></pre>

<p>Assuming you use the same <code class="language-plaintext highlighter-rouge">_box</code> partial from above, this would produce the same
output as the previous example.</p>

<h3 id="collection-with-partial-layouts">Collection with Partial Layouts</h3>

<p>When rendering collections it is also possible to use the <code class="language-plaintext highlighter-rouge">:layout</code> option:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"article"</span><span class="p">,</span> <span class="ss">collection: </span><span class="vi">@articles</span><span class="p">,</span> <span class="ss">layout: </span><span class="s2">"special_layout"</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>The layout will be rendered together with the partial for each item in the
collection. The current object and object_counter variables, <code class="language-plaintext highlighter-rouge">article</code> and
<code class="language-plaintext highlighter-rouge">article_counter</code> in the above example, will be available in the layout as well,
the same way they are within the partial.</p>

<h2 id="helpers">Helpers</h2>

<p>Rails provides many helper methods to use with Action View. These include
methods for:</p>

<ul>
  <li>Formatting dates, strings and numbers</li>
  <li>Creating HTML links to images, videos, stylesheets, etc…</li>
  <li>Sanitizing content</li>
  <li>Creating forms</li>
  <li>Localizing content</li>
</ul>

<p>You can learn more about helpers in the <a href="action_view_helpers.html">Action View Helpers
Guide</a> and the <a href="form_helpers.html">Action View Form Helpers
Guide</a>.</p>

<h2 id="localized-views">Localized Views</h2>

<p>Action View has the ability to render different templates depending on the
current locale.</p>

<p>For example, suppose you have an <code class="language-plaintext highlighter-rouge">ArticlesController</code> with a <code class="language-plaintext highlighter-rouge">show</code> action. By
default, calling this action will render <code class="language-plaintext highlighter-rouge">app/views/articles/show.html.erb</code>. But
if you set <code class="language-plaintext highlighter-rouge">I18n.locale = :de</code>, then Action View will try to render the template
<code class="language-plaintext highlighter-rouge">app/views/articles/show.de.html.erb</code> first. If the localized template isn’t
present, the undecorated version will be used. This means you’re not required to
provide localized views for all cases, but they will be preferred and used if
available.</p>

<p>You can use the same technique to localize the rescue files in your public
directory. For example, setting <code class="language-plaintext highlighter-rouge">I18n.locale = :de</code> and creating
<code class="language-plaintext highlighter-rouge">public/500.de.html</code> and <code class="language-plaintext highlighter-rouge">public/404.de.html</code> would allow you to have localized
rescue pages.</p>

<p>See the <a href="i18n.html">Rails Internationalization (I18n) API documentation</a> for
more details.</p>
</div>
  </article>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toc = document.getElementById("toc");
    const headings = document.querySelectorAll(
      ".guide-content h2, .guide-content h3, .guide-content h4"
    );

    if (headings.length > 0) {
      const tocList = document.createElement("ul");
      const headingMap = new Map();

      // Türkçe karakterleri URL-dostu hale getiren fonksiyon
      function turkishToSlug(text) {
        const turkishChars = {
          'ç': 'c', 'Ç': 'c',
          'ğ': 'g', 'Ğ': 'g',
          'ı': 'i', 'I': 'i',
          'İ': 'i', 'i': 'i',
          'ö': 'o', 'Ö': 'o',
          'ş': 's', 'Ş': 's',
          'ü': 'u', 'Ü': 'u'
        };
        
        return text
          .split('')
          .map(char => turkishChars[char] || char)
          .join('')
          .toLowerCase()
          .replace(/[^a-z0-9]+/g, '-')
          .replace(/^-+|-+$/g, '');
      }

      // Aynı ID'nin tekrarlanmasını önlemek için sayaç
      const idCounts = new Map();

      headings.forEach(function (heading, index) {
        // Başlık metninden anlamlı ID oluştur
        const headingText = heading.textContent.trim();
        let baseId = turkishToSlug(headingText);
        
        // Boş ID kontrolü
        if (!baseId) {
          baseId = "heading-" + index;
        }
        
        // Tekrarlanan ID'leri önle
        let finalId = baseId;
        if (idCounts.has(baseId)) {
          const count = idCounts.get(baseId) + 1;
          idCounts.set(baseId, count);
          finalId = baseId + "-" + count;
        } else {
          idCounts.set(baseId, 1);
        }
        
        heading.id = finalId;

        const li = document.createElement("li");
        const a = document.createElement("a");
        a.href = "#" + finalId;
        a.textContent = headingText;
        a.className = "toc-" + heading.tagName.toLowerCase();

        li.appendChild(a);
        tocList.appendChild(li);

        headingMap.set(finalId, a);
      });

      toc.appendChild(tocList);

      // Başlıkların görünürlük oranlarını takip et
      const visibilityMap = new Map();

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            const id = entry.target.getAttribute("id");
            visibilityMap.set(id, entry.intersectionRatio);
          });

          // En çok görünür olan başlığı bul
          let mostVisibleId = null;
          let maxRatio = 0;

          visibilityMap.forEach((ratio, id) => {
            if (ratio > maxRatio) {
              mostVisibleId = id;
              maxRatio = ratio;
            }
          });

          if (mostVisibleId) {
            headingMap.forEach((linkEl) => linkEl.classList.remove("active"));
            const activeLink = headingMap.get(mostVisibleId);
            if (activeLink) {
              activeLink.classList.add("active");

              // Ortalamak için:
              const linkTop = activeLink.offsetTop;
              const linkHeight = activeLink.offsetHeight;
              const tocScrollParent = toc;
              const tocHeight = tocScrollParent.offsetHeight;

              tocScrollParent.scrollTo({
                top: linkTop - tocHeight / 2 + linkHeight / 2,
                behavior: "smooth",
              });
            }
          }
        },
        {
          threshold: [0, 0.25, 0.5, 0.75, 1.0],
        }
      );

      headings.forEach((heading) => {
        observer.observe(heading);
      });

      const toggleBtn = document.getElementById("toc-toggle");
      const sidebar = document.querySelector(".guide-sidebar");

      toggleBtn.addEventListener("click", function () {
        sidebar.classList.toggle("open");
      });
      const closeBtn = document.querySelector(".toc-close");

      closeBtn?.addEventListener("click", function () {
        sidebar.classList.remove("open");
      });
    }
  });
</script>
        <!-- <footer class="guide-footer"> -->
        <div class="feedback">
          <h3>Geri Bildirim</h3>
          <p>
            Bu rehberin kalitesinin iyileştirilmesine yardımcı olmanızı
            öneririz.
          </p>
          <p>
            Herhangi bir yazım hatası veya olgusal hata görürseniz lütfen
            katkıda bulunun. Başlamak için,
            <a
              href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation"
              >dokümantasyon katkıları</a
            >
            bölümünü okuyabilirsiniz.
          </p>
          <p>
            Ayrıca eksik veya güncel olmayan içerik de bulabilirsiniz. Lütfen
            main için eksik olan belgeleri ekleyin. Sorunların main dalda zaten
            düzeltilip düzeltilmediğini doğrulamak için önce
            <a href="https://edgeguides.rubyonrails.org/">Edge Guides</a>'ı
            kontrol ettiğinizden emin olun. Stil ve kurallar için
            <a
              href="https://guides.rubyonrails.org/v8.0/ruby_on_rails_guides_guidelines.html"
              >Ruby on Rails Guides Guidelines</a
            >'ı kontrol edin.
          </p>
          <p>
            Herhangi bir sebepten dolayı düzeltebileceğiniz bir şey bulursanız
            ancak kendiniz patch yapamıyorsanız lütfen bir
            <a href="https://github.com/rails/rails/issues">issue</a> açın.
          </p>
          <p>
            Ve son olarak, Ruby on Rails dokümantasyonu ile ilgili her türlü
            tartışma resmi
            <a href="https://discuss.rubyonrails.org/c/rubyonrails-docs/6"
              >Ruby on Rails Forum</a
            >'unda memnuniyetle karşılanacaktır.
          </p>
        </div>
      </div>
    </main>

    <button id="scrollToTop" class="scroll-to-top" aria-label="Yukarı çık">
      <svg
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <polyline points="18,15 12,9 6,15"></polyline>
      </svg>
    </button>

    <footer class="footer">
      <div class="container">
        <p>
          Bu çalışma <a href=" Creative Commons Attribution-ShareAlike 4.0 International">Creative Commons Attribution-ShareAlike 4.0 International</a> Lisansı kapsamında lisanslanmıştır.
          </p>
        <p>
          "Rails", "Ruby on Rails" ve Rails logosu David Heinemeier Hansson'un ticari markalarıdır. Tüm hakları saklıdır.
        </p><br/>
        <p>
          &copy; 2025 Rails Kılavuzları Türkçe Çevirisi.
          <a href="https://github.com/DilanKaya127">Dilan Kaya</a> tarafından
          hazırlanmıştır.
          Orijinal dokümantasyon
          <a href="https://guides.rubyonrails.org">Ruby on Rails</a> ekibine
          aittir.
        </p>
        

      </div>
    </footer>

    <script>
      hljs.highlightAll();
      // Yukarı çık butonu işlevselliği
      const scrollToTopBtn = document.getElementById("scrollToTop");

      // Scroll pozisyonunu kontrol et
      window.addEventListener("scroll", function () {
        if (window.pageYOffset > 500) {
          scrollToTopBtn.classList.add("visible");
        } else {
          scrollToTopBtn.classList.remove("visible");
        }
      });

      // Butona tıklandığında yukarı çık
      scrollToTopBtn.addEventListener("click", function () {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      });
    </script>
  </body>
</html>
