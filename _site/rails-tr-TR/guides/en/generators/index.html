<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generators - Rails Dokümantasyonu - Türkçe</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="logo">
                    <a href="/">Rails Kılavuzları</a>
                </h1>
                <nav class="nav">
                    <a href="/">Ana Sayfa</a>
                    <a href="https://dilankaya127.github.io">Portföy</a>
                    <a href="https://github.com/dilankaya127/rails-tr-TR">GitHub</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <div class="guide-container">
    <aside class="guide-sidebar">
        <div class="guide-toc">
            <h3>İçindekiler</h3>
            <div id="toc"></div>
        </div>
        
        <div class="guide-nav">
            <h3>Diğer Kılavuzlar</h3>
            <ul>
                <li><a href="/rails-tr-TR/guides/tr/getting_started">Rails ile Başlarken</a></li>
                <li><a href="/rails-tr-TR/guides/en/active_record_basics">Active Record Temelleri</a></li>
                <li><a href="/rails-tr-TR/guides//en/action_controller_overview">Action Controller</a></li>
                <li><a href="/rails-tr-TR/guides/tr/action_cable_overview">Action Cable</a></li>
            </ul>
        </div>
    </aside>

    <article class="guide-content">
        <header class="guide-header">
            <h1>Generators</h1>
            
        </header>

        <div class="guide-body">
            <p><strong>DO NOT READ THIS FILE ON GITHUB, GUIDES ARE PUBLISHED ON <a href="https://guides.rubyonrails.org">https://guides.rubyonrails.org</a>.</strong></p>

<h1 id="creating-and-customizing-rails-generators--templates">Creating and Customizing Rails Generators &amp; Templates</h1>

<p>Rails generators and application templates are useful tools that can help improve your workflow by automatically creating boilerplate code. In this guide you will learn:</p>

<ul>
  <li>How to see which generators are available in your application.</li>
  <li>How to create a generator using templates.</li>
  <li>How Rails searches for generators before invoking them.</li>
  <li>How to customize Rails scaffolding by overriding generators and templates.</li>
  <li>How to use fallbacks to avoid overwriting a huge set of generators.</li>
  <li>How to use templates to create/customize Rails applications.</li>
  <li>How to use the Rails Template API to write your own reusable application templates.</li>
</ul>

<hr />

<h2 id="first-contact">First Contact</h2>

<p>When you create an application using the <code class="language-plaintext highlighter-rouge">rails</code> command, you are in fact using
a Rails generator. After that, you can get a list of all available generators by
invoking <code class="language-plaintext highlighter-rouge">bin/rails generate</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails new myapp
<span class="nv">$ </span><span class="nb">cd </span>myapp
<span class="nv">$ </span>bin/rails generate
</code></pre></div></div>

<p>NOTE: To create a Rails application we use the <code class="language-plaintext highlighter-rouge">rails</code> global command which uses
the version of Rails installed via <code class="language-plaintext highlighter-rouge">gem install rails</code>. When inside the
directory of your application, we use the <code class="language-plaintext highlighter-rouge">bin/rails</code> command which uses the
version of Rails bundled with the application.</p>

<p>You will get a list of all generators that come with Rails. To see a detailed
description of a particular generator, invoke the generator with the <code class="language-plaintext highlighter-rouge">--help</code>
option. For example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate scaffold <span class="nt">--help</span>
</code></pre></div></div>

<h2 id="creating-your-first-generator">Creating Your First Generator</h2>

<p>Generators are built on top of <a href="https://github.com/rails/thor">Thor</a>, which
provides powerful options for parsing and a great API for manipulating files.</p>

<p>Let’s build a generator that creates an initializer file named <code class="language-plaintext highlighter-rouge">initializer.rb</code>
inside <code class="language-plaintext highlighter-rouge">config/initializers</code>. The first step is to create a file at
<code class="language-plaintext highlighter-rouge">lib/generators/initializer_generator.rb</code> with the following content:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">InitializerGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">Base</span>
  <span class="k">def</span> <span class="nf">create_initializer_file</span>
    <span class="n">create_file</span> <span class="s2">"config/initializers/initializer.rb"</span><span class="p">,</span> <span class="o">&lt;&lt;~</span><span class="no">RUBY</span><span class="sh">
      # Add initialization content here
</span><span class="no">    RUBY</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Our new generator is quite simple: it inherits from <a href="https://api.rubyonrails.org/classes/Rails/Generators/Base.html"><code class="language-plaintext highlighter-rouge">Rails::Generators::Base</code></a>
and has one method definition. When a generator is invoked, each public method
in the generator is executed sequentially in the order that it is defined. Our
method invokes <a href="https://www.rubydoc.info/gems/thor/Thor/Actions#create_file-instance_method"><code class="language-plaintext highlighter-rouge">create_file</code></a>, which will create a file at the given
destination with the given content.</p>

<p>To invoke our new generator, we run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate initializer
</code></pre></div></div>

<p>Before we go on, let’s see the description of our new generator:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate initializer <span class="nt">--help</span>
</code></pre></div></div>

<p>Rails is usually able to derive a good description if a generator is namespaced,
such as <code class="language-plaintext highlighter-rouge">ActiveRecord::Generators::ModelGenerator</code>, but not in this case. We can
solve this problem in two ways. The first way to add a description is by calling
<a href="https://www.rubydoc.info/gems/thor/Thor#desc-class_method"><code class="language-plaintext highlighter-rouge">desc</code></a> inside our generator:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">InitializerGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">desc</span> <span class="s2">"This generator creates an initializer file at config/initializers"</span>
  <span class="k">def</span> <span class="nf">create_initializer_file</span>
    <span class="n">create_file</span> <span class="s2">"config/initializers/initializer.rb"</span><span class="p">,</span> <span class="o">&lt;&lt;~</span><span class="no">RUBY</span><span class="sh">
      # Add initialization content here
</span><span class="no">    RUBY</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Now we can see the new description by invoking <code class="language-plaintext highlighter-rouge">--help</code> on the new generator.</p>

<p>The second way to add a description is by creating a file named <code class="language-plaintext highlighter-rouge">USAGE</code> in the
same directory as our generator. We are going to do that in the next step.</p>

<h2 id="creating-generators-with-generators">Creating Generators with Generators</h2>

<p>Generators themselves have a generator. Let’s remove our <code class="language-plaintext highlighter-rouge">InitializerGenerator</code>
and use <code class="language-plaintext highlighter-rouge">bin/rails generate generator</code> to generate a new one:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">rm </span>lib/generators/initializer_generator.rb

<span class="nv">$ </span>bin/rails generate generator initializer
      create  lib/generators/initializer
      create  lib/generators/initializer/initializer_generator.rb
      create  lib/generators/initializer/USAGE
      create  lib/generators/initializer/templates
      invoke  test_unit
      create    <span class="nb">test</span>/lib/generators/initializer_generator_test.rb
</code></pre></div></div>

<p>This is the generator just created:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">InitializerGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">NamedBase</span>
  <span class="n">source_root</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="s2">"templates"</span><span class="p">,</span> <span class="n">__dir__</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>First, notice that the generator inherits from <a href="https://api.rubyonrails.org/classes/Rails/Generators/NamedBase.html"><code class="language-plaintext highlighter-rouge">Rails::Generators::NamedBase</code></a>
instead of <code class="language-plaintext highlighter-rouge">Rails::Generators::Base</code>. This means that our generator expects at
least one argument, which will be the name of the initializer and will be
available to our code via <code class="language-plaintext highlighter-rouge">name</code>.</p>

<p>We can see that by checking the description of the new generator:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate initializer <span class="nt">--help</span>
Usage:
  bin/rails generate initializer NAME <span class="o">[</span>options]
</code></pre></div></div>

<p>Also, notice that the generator has a class method called <a href="https://api.rubyonrails.org/classes/Rails/Generators/Base.html#method-c-source_root"><code class="language-plaintext highlighter-rouge">source_root</code></a>.
This method points to the location of our templates, if any. By default it
points to the <code class="language-plaintext highlighter-rouge">lib/generators/initializer/templates</code> directory that was just
created.</p>

<p>In order to understand how generator templates work, let’s create the file
<code class="language-plaintext highlighter-rouge">lib/generators/initializer/templates/initializer.rb</code> with the following
content:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Add initialization content here</span>
</code></pre></div></div>

<p>And let’s change the generator to copy this template when invoked:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">InitializerGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">NamedBase</span>
  <span class="n">source_root</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="s2">"templates"</span><span class="p">,</span> <span class="n">__dir__</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">copy_initializer_file</span>
    <span class="n">copy_file</span> <span class="s2">"initializer.rb"</span><span class="p">,</span> <span class="s2">"config/initializers/</span><span class="si">#{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">.rb"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Now let’s run our generator:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate initializer core_extensions
      create  config/initializers/core_extensions.rb

<span class="nv">$ </span><span class="nb">cat </span>config/initializers/core_extensions.rb
<span class="c"># Add initialization content here</span>
</code></pre></div></div>

<p>We see that <a href="https://www.rubydoc.info/gems/thor/Thor/Actions#copy_file-instance_method"><code class="language-plaintext highlighter-rouge">copy_file</code></a> created <code class="language-plaintext highlighter-rouge">config/initializers/core_extensions.rb</code>
with the contents of our template. (The <code class="language-plaintext highlighter-rouge">file_name</code> method used in the
destination path is inherited from <code class="language-plaintext highlighter-rouge">Rails::Generators::NamedBase</code>.)</p>

<h2 id="generator-command-line-options">Generator Command Line Options</h2>

<p>Generators can support command line options using <a href="https://www.rubydoc.info/gems/thor/Thor/Base/ClassMethods#class_option-instance_method"><code class="language-plaintext highlighter-rouge">class_option</code></a>. For
example:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">InitializerGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">NamedBase</span>
  <span class="n">class_option</span> <span class="ss">:scope</span><span class="p">,</span> <span class="ss">type: :string</span><span class="p">,</span> <span class="ss">default: </span><span class="s2">"app"</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Now our generator can be invoked with a <code class="language-plaintext highlighter-rouge">--scope</code> option:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate initializer theme <span class="nt">--scope</span> dashboard
</code></pre></div></div>

<p>Option values are accessible in generator methods via <a href="https://www.rubydoc.info/gems/thor/Thor/Base#options-instance_method"><code class="language-plaintext highlighter-rouge">options</code></a>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">copy_initializer_file</span>
  <span class="vi">@scope</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s2">"scope"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="generator-resolution">Generator Resolution</h2>

<p>When resolving a generator’s name, Rails looks for the generator using multiple
file names. For example, when you run <code class="language-plaintext highlighter-rouge">bin/rails generate initializer core_extensions</code>,
Rails tries to load each of the following files, in order, until one is found:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">rails/generators/initializer/initializer_generator.rb</code></li>
  <li><code class="language-plaintext highlighter-rouge">generators/initializer/initializer_generator.rb</code></li>
  <li><code class="language-plaintext highlighter-rouge">rails/generators/initializer_generator.rb</code></li>
  <li><code class="language-plaintext highlighter-rouge">generators/initializer_generator.rb</code></li>
</ul>

<p>If none of these are found, an error will be raised.</p>

<p>We put our generator in the application’s <code class="language-plaintext highlighter-rouge">lib/</code> directory because that
directory is in <code class="language-plaintext highlighter-rouge">$LOAD_PATH</code>, thus allowing Rails to find and load the file.</p>

<h2 id="overriding-rails-generator-templates">Overriding Rails Generator Templates</h2>

<p>Rails will also look in multiple places when resolving generator template files.
One of those places is the application’s <code class="language-plaintext highlighter-rouge">lib/templates/</code> directory. This
behavior allows us to override the templates used by Rails’ built-in generators.
For example, we could override the <a href="https://github.com/rails/rails/blob/main/railties/lib/rails/generators/rails/scaffold_controller/templates/controller.rb.tt">scaffold controller template</a> or the
<a href="https://github.com/rails/rails/tree/main/railties/lib/rails/generators/erb/scaffold/templates">scaffold view templates</a>.</p>

<p>To see this in action, let’s create a <code class="language-plaintext highlighter-rouge">lib/templates/erb/scaffold/index.html.erb.tt</code>
file with the following contents:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%%</span> <span class="err">@</span><span class="o">&lt;</span><span class="sx">%= plural_table_name </span><span class="cp">%&gt;</span>.count %&gt; <span class="cp">&lt;%=</span><span class="sx"> human_name.pluralize </span><span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Note that the template is an ERB template that renders <em>another</em> ERB template.
So any <code class="language-plaintext highlighter-rouge">&lt;%</code> that should appear in the <em>resulting</em> template must be escaped as
<code class="language-plaintext highlighter-rouge">&lt;%%</code> in the <em>generator</em> template.</p>

<p>Now let’s run Rails’ built-in scaffold generator:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate scaffold Post title:string
      ...
      create      app/views/posts/index.html.erb
      ...
</code></pre></div></div>

<p>The contents of <code class="language-plaintext highlighter-rouge">app/views/posts/index.html.erb</code> is:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%</span> <span class="vi">@posts</span><span class="p">.</span><span class="nf">count</span> <span class="cp">%&gt;</span> Posts
</code></pre></div></div>

<h2 id="overriding-rails-generators">Overriding Rails Generators</h2>

<p>Rails’ built-in generators can be configured via <a href="configuring.html#configuring-generators"><code class="language-plaintext highlighter-rouge">config.generators</code></a>,
including overriding some generators entirely.</p>

<p>First, let’s take a closer look at how the scaffold generator works.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate scaffold User name:string
      invoke  active_record
      create    db/migrate/20230518000000_create_users.rb
      create    app/models/user.rb
      invoke    test_unit
      create      <span class="nb">test</span>/models/user_test.rb
      create      <span class="nb">test</span>/fixtures/users.yml
      invoke  resource_route
       route    resources :users
      invoke  scaffold_controller
      create    app/controllers/users_controller.rb
      invoke    erb
      create      app/views/users
      create      app/views/users/index.html.erb
      create      app/views/users/edit.html.erb
      create      app/views/users/show.html.erb
      create      app/views/users/new.html.erb
      create      app/views/users/_form.html.erb
      create      app/views/users/_user.html.erb
      invoke    resource_route
      invoke    test_unit
      create      <span class="nb">test</span>/controllers/users_controller_test.rb
      create      <span class="nb">test</span>/system/users_test.rb
      invoke    helper
      create      app/helpers/users_helper.rb
      invoke      test_unit
      invoke    jbuilder
      create      app/views/users/index.json.jbuilder
      create      app/views/users/show.json.jbuilder
</code></pre></div></div>

<p>From the output, we can see that the scaffold generator invokes other
generators, such as the <code class="language-plaintext highlighter-rouge">scaffold_controller</code> generator. And some of those
generators invoke other generators too. In particular, the <code class="language-plaintext highlighter-rouge">scaffold_controller</code>
generator invokes several other generators, including the <code class="language-plaintext highlighter-rouge">helper</code> generator.</p>

<p>Let’s override the built-in <code class="language-plaintext highlighter-rouge">helper</code> generator with a new generator. We’ll name
the generator <code class="language-plaintext highlighter-rouge">my_helper</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate generator rails/my_helper
      create  lib/generators/rails/my_helper
      create  lib/generators/rails/my_helper/my_helper_generator.rb
      create  lib/generators/rails/my_helper/USAGE
      create  lib/generators/rails/my_helper/templates
      invoke  test_unit
      create    <span class="nb">test</span>/lib/generators/rails/my_helper_generator_test.rb
</code></pre></div></div>

<p>And in <code class="language-plaintext highlighter-rouge">lib/generators/rails/my_helper/my_helper_generator.rb</code> we’ll define
the generator as:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Rails::MyHelperGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">NamedBase</span>
  <span class="k">def</span> <span class="nf">create_helper_file</span>
    <span class="n">create_file</span> <span class="s2">"app/helpers/</span><span class="si">#{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">_helper.rb"</span><span class="p">,</span> <span class="o">&lt;&lt;~</span><span class="no">RUBY</span><span class="sh">
      module </span><span class="si">#{</span><span class="n">class_name</span><span class="si">}</span><span class="sh">Helper
        # I'm helping!
      end
</span><span class="no">    RUBY</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Finally, we need to tell Rails to use the <code class="language-plaintext highlighter-rouge">my_helper</code> generator instead of the
built-in <code class="language-plaintext highlighter-rouge">helper</code> generator. For that we use <code class="language-plaintext highlighter-rouge">config.generators</code>. In
<code class="language-plaintext highlighter-rouge">config/application.rb</code>, let’s add:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">config</span><span class="p">.</span><span class="nf">generators</span> <span class="k">do</span> <span class="o">|</span><span class="n">g</span><span class="o">|</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">helper</span> <span class="ss">:my_helper</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Now if we run the scaffold generator again, we see the <code class="language-plaintext highlighter-rouge">my_helper</code> generator in
action:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate scaffold Article body:text
      ...
      invoke  scaffold_controller
      ...
      invoke    my_helper
      create      app/helpers/articles_helper.rb
      ...
</code></pre></div></div>

<p>NOTE: You may notice that the output for the built-in <code class="language-plaintext highlighter-rouge">helper</code> generator
includes “invoke test_unit”, whereas the output for <code class="language-plaintext highlighter-rouge">my_helper</code> does not.
Although the <code class="language-plaintext highlighter-rouge">helper</code> generator does not generate tests by default, it does
provide a hook to do so using <a href="https://api.rubyonrails.org/classes/Rails/Generators/Base.html#method-c-hook_for"><code class="language-plaintext highlighter-rouge">hook_for</code></a>. We can do the same by including
<code class="language-plaintext highlighter-rouge">hook_for :test_framework, as: :helper</code> in the <code class="language-plaintext highlighter-rouge">MyHelperGenerator</code> class. See
the <code class="language-plaintext highlighter-rouge">hook_for</code> documentation for more information.</p>

<h3 id="generators-fallbacks">Generators Fallbacks</h3>

<p>Another way to override specific generators is by using <em>fallbacks</em>. A fallback
allows a generator namespace to delegate to another generator namespace.</p>

<p>For example, let’s say we want to override the <code class="language-plaintext highlighter-rouge">test_unit:model</code> generator with
our own <code class="language-plaintext highlighter-rouge">my_test_unit:model</code> generator, but we don’t want to replace all of the
other <code class="language-plaintext highlighter-rouge">test_unit:*</code> generators such as <code class="language-plaintext highlighter-rouge">test_unit:controller</code>.</p>

<p>First, we create the <code class="language-plaintext highlighter-rouge">my_test_unit:model</code> generator in
<code class="language-plaintext highlighter-rouge">lib/generators/my_test_unit/model/model_generator.rb</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">MyTestUnit</span>
  <span class="k">class</span> <span class="nc">ModelGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">NamedBase</span>
    <span class="n">source_root</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="s2">"templates"</span><span class="p">,</span> <span class="n">__dir__</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do_different_stuff</span>
      <span class="n">say</span> <span class="s2">"Doing different stuff..."</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Next, we use <code class="language-plaintext highlighter-rouge">config.generators</code> to configure the <code class="language-plaintext highlighter-rouge">test_framework</code> generator as
<code class="language-plaintext highlighter-rouge">my_test_unit</code>, but we also configure a fallback such that any missing
<code class="language-plaintext highlighter-rouge">my_test_unit:*</code> generators resolve to <code class="language-plaintext highlighter-rouge">test_unit:*</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">config</span><span class="p">.</span><span class="nf">generators</span> <span class="k">do</span> <span class="o">|</span><span class="n">g</span><span class="o">|</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">test_framework</span> <span class="ss">:my_test_unit</span><span class="p">,</span> <span class="ss">fixture: </span><span class="kp">false</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">fallbacks</span><span class="p">[</span><span class="ss">:my_test_unit</span><span class="p">]</span> <span class="o">=</span> <span class="ss">:test_unit</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Now when we run the scaffold generator, we see that <code class="language-plaintext highlighter-rouge">my_test_unit</code> has replaced
<code class="language-plaintext highlighter-rouge">test_unit</code>, but only the model tests have been affected:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate scaffold Comment body:text
      invoke  active_record
      create    db/migrate/20230518000000_create_comments.rb
      create    app/models/comment.rb
      invoke    my_test_unit
    Doing different stuff...
      invoke  resource_route
       route    resources :comments
      invoke  scaffold_controller
      create    app/controllers/comments_controller.rb
      invoke    erb
      create      app/views/comments
      create      app/views/comments/index.html.erb
      create      app/views/comments/edit.html.erb
      create      app/views/comments/show.html.erb
      create      app/views/comments/new.html.erb
      create      app/views/comments/_form.html.erb
      create      app/views/comments/_comment.html.erb
      invoke    resource_route
      invoke    my_test_unit
      create      <span class="nb">test</span>/controllers/comments_controller_test.rb
      create      <span class="nb">test</span>/system/comments_test.rb
      invoke    helper
      create      app/helpers/comments_helper.rb
      invoke      my_test_unit
      invoke    jbuilder
      create      app/views/comments/index.json.jbuilder
      create      app/views/comments/show.json.jbuilder
</code></pre></div></div>

<h2 id="application-templates">Application Templates</h2>

<p>Application templates are a little different from generators. While generators
add files to an existing Rails application (models, views, etc.), templates are
used to automate the setup of a new Rails application. Templates are Ruby
scripts (typically named <code class="language-plaintext highlighter-rouge">template.rb</code>) that customize new Rails applications
right after they are generated.</p>

<p>Let’s see how to use a template while creating a new Rails application.</p>

<h3 id="creating-and-using-templates">Creating and Using Templates</h3>

<p>Let’s start with a sample template Ruby script. The below template adds Devise
to the <code class="language-plaintext highlighter-rouge">Gemfile</code> after asking the user and also allows the user to name the
Devise user model. After <code class="language-plaintext highlighter-rouge">bundle install</code> has been run, the template runs the
Devise generators and also runs migrations. Finally, the template does <code class="language-plaintext highlighter-rouge">git add</code> and <code class="language-plaintext highlighter-rouge">git commit</code>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># template.rb</span>
<span class="k">if</span> <span class="n">yes?</span><span class="p">(</span><span class="s2">"Would you like to install Devise?"</span><span class="p">)</span>
  <span class="n">gem</span> <span class="s2">"devise"</span>
  <span class="n">devise_model</span> <span class="o">=</span> <span class="n">ask</span><span class="p">(</span><span class="s2">"What would you like the user model to be called?"</span><span class="p">,</span> <span class="ss">default: </span><span class="s2">"User"</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">after_bundle</span> <span class="k">do</span>
  <span class="k">if</span> <span class="n">devise_model</span>
    <span class="n">generate</span> <span class="s2">"devise:install"</span>
    <span class="n">generate</span> <span class="s2">"devise"</span><span class="p">,</span> <span class="n">devise_model</span>
    <span class="n">rails_command</span> <span class="s2">"db:migrate"</span>
  <span class="k">end</span>

  <span class="n">git</span> <span class="ss">add: </span><span class="s2">"."</span><span class="p">,</span> <span class="ss">commit: </span><span class="sx">%(-m 'Initial commit')</span>
<span class="k">end</span>
</code></pre></div></div>

<p>To apply this template while creating a new Rails application, you need to
provide the location of the template using the <code class="language-plaintext highlighter-rouge">-m</code> option:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails new blog <span class="nt">-m</span> ~/template.rb
</code></pre></div></div>

<p>The above will create a new Rails application called <code class="language-plaintext highlighter-rouge">blog</code> that has Devise gem configured.</p>

<p>You can also apply templates to an existing Rails application by using
<code class="language-plaintext highlighter-rouge">app:template</code> command. The location of the template needs to be passed in via
the <code class="language-plaintext highlighter-rouge">LOCATION</code> environment variable:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails app:template <span class="nv">LOCATION</span><span class="o">=</span>~/template.rb
</code></pre></div></div>

<p>Templates don’t have to be stored locally, you can also specify an URL instead
of a path:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails new blog <span class="nt">-m</span> https://example.com/template.rb
<span class="nv">$ </span>bin/rails app:template <span class="nv">LOCATION</span><span class="o">=</span>https://example.com/template.rb
</code></pre></div></div>

<p>WARNING: Caution should be taken when executing remote scripts from third parties. Since the template is a plain Ruby script, it can easily contain code that compromises your local machine (such as download a virus, delete files or upload your private files to a server).</p>

<p>The above <code class="language-plaintext highlighter-rouge">template.rb</code> file uses helper methods such as <code class="language-plaintext highlighter-rouge">after_bundle</code> and
<code class="language-plaintext highlighter-rouge">rails_command</code> and also adds user interactivity with methods like <code class="language-plaintext highlighter-rouge">yes?</code>. All
of these methods are part of the <a href="https://edgeapi.rubyonrails.org/classes/Rails/Generators/Actions.html">Rails Template
API</a>. The
following sections shows how to use more of these methods with examples.</p>

<h2 id="rails-generators-api">Rails Generators API</h2>

<p>Generators and the template Ruby scripts have access to several helper methods
using a <a href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL</a> (Domain
Specific Language). These methods are part of the Rails Generators API and you
can find more details at <a href="https://www.rubydoc.info/gems/thor/Thor/Actions"><code class="language-plaintext highlighter-rouge">Thor::Actions</code></a> and
<a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html"><code class="language-plaintext highlighter-rouge">Rails::Generators::Actions</code></a> API documentation.</p>

<p>Here’s another example of a typical Rails template that scaffolds a model, runs
migrations, and commits the changes with git:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># template.rb</span>
<span class="n">generate</span><span class="p">(</span><span class="ss">:scaffold</span><span class="p">,</span> <span class="s2">"person name:string"</span><span class="p">)</span>
<span class="n">route</span> <span class="s2">"root to: 'people#index'"</span>
<span class="n">rails_command</span><span class="p">(</span><span class="s2">"db:migrate"</span><span class="p">)</span>

<span class="n">after_bundle</span> <span class="k">do</span>
  <span class="n">git</span> <span class="ss">:init</span>
  <span class="n">git</span> <span class="ss">add: </span><span class="s2">"."</span>
  <span class="n">git</span> <span class="ss">commit: </span><span class="sx">%Q{ -m 'Initial commit' }</span>
<span class="k">end</span>
</code></pre></div></div>

<p>NOTE: All code snippets in the examples below can be used in a template
file, such as the <code class="language-plaintext highlighter-rouge">template.rb</code> file above.</p>

<h3 id="add_source">add_source</h3>

<p>The <a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-add_source"><code class="language-plaintext highlighter-rouge">add_source</code></a> method adds the given source to the generated application’s <code class="language-plaintext highlighter-rouge">Gemfile</code>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">add_source</span> <span class="s2">"https://rubygems.org"</span>
</code></pre></div></div>

<p>If a block is given, gem entries in the block are wrapped into the source group.
For example, if you need to source a gem from <code class="language-plaintext highlighter-rouge">"http://gems.github.com"</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">add_source</span> <span class="s2">"http://gems.github.com/"</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s2">"rspec-rails"</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="after_bundle">after_bundle</h3>

<p>The <a href="https://api.rubyonrails.org/classes/Rails/Generators/AppGenerator.html#method-i-after_bundle"><code class="language-plaintext highlighter-rouge">after_bundle</code></a> method registers a callback to be executed after the gems
are bundled. For example, it would make sense to run the “install” command for
<code class="language-plaintext highlighter-rouge">tailwindcss-rails</code> and <code class="language-plaintext highlighter-rouge">devise</code> only after those gems are bundled:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Install gems</span>
<span class="n">after_bundle</span> <span class="k">do</span>
  <span class="c1"># Install TailwindCSS</span>
  <span class="n">rails_command</span> <span class="s2">"tailwindcss:install"</span>

  <span class="c1"># Install Devise</span>
  <span class="n">generate</span> <span class="s2">"devise:install"</span>
<span class="k">end</span>
</code></pre></div></div>

<p>The callbacks get executed even if <code class="language-plaintext highlighter-rouge">--skip-bundle</code> has been passed.</p>

<h3 id="environment">environment</h3>

<p>The <a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-environment"><code class="language-plaintext highlighter-rouge">environment</code></a> method adds a line inside the <code class="language-plaintext highlighter-rouge">Application</code> class for
<code class="language-plaintext highlighter-rouge">config/application.rb</code>. If <code class="language-plaintext highlighter-rouge">options[:env]</code> is specified, the line is appended
to the corresponding file in <code class="language-plaintext highlighter-rouge">config/environments</code>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">environment</span> <span class="s1">'config.action_mailer.default_url_options = {host: "http://yourwebsite.example.com"}'</span><span class="p">,</span> <span class="ss">env: </span><span class="s2">"production"</span>
</code></pre></div></div>

<p>The above will add the config line to <code class="language-plaintext highlighter-rouge">config/environments/production.rb</code>.</p>

<h3 id="gem">gem</h3>

<p>The <a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-gem"><code class="language-plaintext highlighter-rouge">gem</code></a> helper adds an entry for the given gem to the generated application’s
<code class="language-plaintext highlighter-rouge">Gemfile</code>.</p>

<p>For example, if your application depends on the gems <code class="language-plaintext highlighter-rouge">devise</code> and
<code class="language-plaintext highlighter-rouge">tailwindcss-rails</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gem</span> <span class="s2">"devise"</span>
<span class="n">gem</span> <span class="s2">"tailwindcss-rails"</span>
</code></pre></div></div>

<p>Note that this method only adds the gem to the <code class="language-plaintext highlighter-rouge">Gemfile</code>, it does not install
the gem.</p>

<p>You can also specify an exact version:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gem</span> <span class="s2">"devise"</span><span class="p">,</span> <span class="s2">"~&gt; 4.9.4"</span>
</code></pre></div></div>

<p>And you can also add comments that will be added to the <code class="language-plaintext highlighter-rouge">Gemfile</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gem</span> <span class="s2">"devise"</span><span class="p">,</span> <span class="ss">comment: </span><span class="s2">"Add devise for authentication."</span>
</code></pre></div></div>

<h3 id="gem_group">gem_group</h3>

<p>The <a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-gem_group"><code class="language-plaintext highlighter-rouge">gem_group</code></a> helper wraps gem entries inside a group. For example, to load <code class="language-plaintext highlighter-rouge">rspec-rails</code>
only in the <code class="language-plaintext highlighter-rouge">development</code> and <code class="language-plaintext highlighter-rouge">test</code> groups:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gem_group</span> <span class="ss">:development</span><span class="p">,</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s2">"rspec-rails"</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="generate">generate</h3>

<p>You can even call a generator from inside a <code class="language-plaintext highlighter-rouge">template.rb</code> with the
<a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-generate"><code class="language-plaintext highlighter-rouge">generate</code></a> method. The following runs the <code class="language-plaintext highlighter-rouge">scaffold</code> rails generator with
the given arguments:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">generate</span><span class="p">(</span><span class="ss">:scaffold</span><span class="p">,</span> <span class="s2">"person"</span><span class="p">,</span> <span class="s2">"name:string"</span><span class="p">,</span> <span class="s2">"address:text"</span><span class="p">,</span> <span class="s2">"age:number"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="git">git</h3>

<p>Rails templates let you run any git command with the <a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-git"><code class="language-plaintext highlighter-rouge">git</code></a> helper:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">git</span> <span class="ss">:init</span>
<span class="n">git</span> <span class="ss">add: </span><span class="s2">"."</span>
<span class="n">git</span> <span class="ss">commit: </span><span class="s2">"-a -m 'Initial commit'"</span>
</code></pre></div></div>

<h3 id="initializer-vendor-lib-file">initializer, vendor, lib, file</h3>

<p>The <a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-initializer"><code class="language-plaintext highlighter-rouge">initializer</code></a> helper method adds an initializer to the generated
application’s <code class="language-plaintext highlighter-rouge">config/initializers</code> directory.</p>

<p>After adding the below to the <code class="language-plaintext highlighter-rouge">template.rb</code> file, you can use <code class="language-plaintext highlighter-rouge">Object#not_nil?</code>
and <code class="language-plaintext highlighter-rouge">Object#not_blank?</code> in your application:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">initializer</span> <span class="s2">"not_methods.rb"</span><span class="p">,</span> <span class="o">&lt;&lt;-</span><span class="no">CODE</span><span class="sh">
  class Object
    def not_nil?
      !nil?
    end

    def not_blank?
      !blank?
    end
  end
</span><span class="no">CODE</span>
</code></pre></div></div>

<p>Similarly, the <a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-lib"><code class="language-plaintext highlighter-rouge">lib</code></a> method creates a file in the <code class="language-plaintext highlighter-rouge">lib/</code> directory and
<a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-vendor"><code class="language-plaintext highlighter-rouge">vendor</code></a> method creates a file in the <code class="language-plaintext highlighter-rouge">vendor/</code> directory.</p>

<p>There is also a <code class="language-plaintext highlighter-rouge">file</code> method (which is an alias for <a href="https://www.rubydoc.info/gems/thor/Thor/Actions#create_file-instance_method"><code class="language-plaintext highlighter-rouge">create_file</code></a>), which
accepts a relative path from <code class="language-plaintext highlighter-rouge">Rails.root</code> and creates all the directories and
files needed:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">file</span> <span class="s2">"app/components/foo.rb"</span><span class="p">,</span> <span class="o">&lt;&lt;-</span><span class="no">CODE</span><span class="sh">
  class Foo
  end
</span><span class="no">CODE</span>
</code></pre></div></div>

<p>The above will create the <code class="language-plaintext highlighter-rouge">app/components</code> directory and put <code class="language-plaintext highlighter-rouge">foo.rb</code> in there.</p>

<h3 id="rakefile">rakefile</h3>

<p>The <a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-rakefile"><code class="language-plaintext highlighter-rouge">rakefile</code></a> method creates a new Rake file under <code class="language-plaintext highlighter-rouge">lib/tasks</code> with the
given tasks:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rakefile</span><span class="p">(</span><span class="s2">"bootstrap.rake"</span><span class="p">)</span> <span class="k">do</span>
  <span class="o">&lt;&lt;-</span><span class="no">TASK</span><span class="sh">
    namespace :boot do
      task :strap do
        puts "I like boots!"
      end
    end
</span><span class="no">  TASK</span>
<span class="k">end</span>
</code></pre></div></div>

<p>The above creates <code class="language-plaintext highlighter-rouge">lib/tasks/bootstrap.rake</code> with a <code class="language-plaintext highlighter-rouge">boot:strap</code> rake task.</p>

<h3 id="run">run</h3>

<p>The <a href="https://www.rubydoc.info/gems/thor/Thor/Actions#run-instance_method"><code class="language-plaintext highlighter-rouge">run</code></a> method executes an arbitrary command. Let’s say you want to remove
the <code class="language-plaintext highlighter-rouge">README.rdoc</code> file:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">run</span> <span class="s2">"rm README.rdoc"</span>
</code></pre></div></div>

<h3 id="rails_command">rails_command</h3>

<p>You can run the Rails commands in the generated application with the
<a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-rails_command"><code class="language-plaintext highlighter-rouge">rails_command</code></a> helper. Let’s say you want to migrate the database at some
point in the template ruby script:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rails_command</span> <span class="s2">"db:migrate"</span>
</code></pre></div></div>

<p>Commands can be run with a different Rails environment:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rails_command</span> <span class="s2">"db:migrate"</span><span class="p">,</span> <span class="ss">env: </span><span class="s2">"production"</span>
</code></pre></div></div>

<p>You can also run commands that should abort application generation if they fail:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rails_command</span> <span class="s2">"db:migrate"</span><span class="p">,</span> <span class="ss">abort_on_failure: </span><span class="kp">true</span>
</code></pre></div></div>

<h3 id="route">route</h3>

<p>The <a href="https://api.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-route"><code class="language-plaintext highlighter-rouge">route</code></a> method adds an entry to the <code class="language-plaintext highlighter-rouge">config/routes.rb</code> file. To make
<code class="language-plaintext highlighter-rouge">PeopleController#index</code> the default page for the application, we can add:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">route</span> <span class="s2">"root to: 'person#index'"</span>
</code></pre></div></div>

<p>There are also many helper methods that can manipulate the local file system,
such as <a href="https://www.rubydoc.info/gems/thor/Thor/Actions#copy_file-instance_method"><code class="language-plaintext highlighter-rouge">copy_file</code></a>, <a href="https://www.rubydoc.info/gems/thor/Thor/Actions#create_file-instance_method"><code class="language-plaintext highlighter-rouge">create_file</code></a>, <a href="https://www.rubydoc.info/gems/thor/Thor/Actions#insert_into_file-instance_method"><code class="language-plaintext highlighter-rouge">insert_into_file</code></a>, and
<a href="https://www.rubydoc.info/gems/thor/Thor/Actions#inside-instance_method"><code class="language-plaintext highlighter-rouge">inside</code></a>. You can see the <a href="https://www.rubydoc.info/gems/thor/Thor/Actions">Thor API
documentation</a> for details.
Here is an example of one such method:</p>

<h3 id="inside">inside</h3>

<p>This <a href="https://www.rubydoc.info/gems/thor/Thor/Actions#inside-instance_method"><code class="language-plaintext highlighter-rouge">inside</code></a> method enables you to run a command from a given directory.
For example, if you have a copy of edge rails that you wish to symlink from your
new apps, you can do this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">inside</span><span class="p">(</span><span class="s2">"vendor"</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">run</span> <span class="s2">"ln -s ~/my-forks/rails rails"</span>
<span class="k">end</span>
</code></pre></div></div>

<p>There are also methods that allow you to interact with the user from the Ruby template, such as <a href="https://www.rubydoc.info/gems/thor/Thor/Shell/Basic#ask-instance_method"><code class="language-plaintext highlighter-rouge">ask</code></a>, <a href="https://www.rubydoc.info/gems/thor/Thor/Shell/Basic#yes%3F-instance_method"><code class="language-plaintext highlighter-rouge">yes</code></a>, and <a href="https://www.rubydoc.info/gems/thor/Thor/Shell/Basic#no%3F-instance_method"><code class="language-plaintext highlighter-rouge">no</code></a>. You can learn about all user interactivity methods in the <a href="https://www.rubydoc.info/gems/thor/Thor/Shell/Basic">Thor Shell documentation</a>. Let’s see examples of using <code class="language-plaintext highlighter-rouge">ask</code>, <code class="language-plaintext highlighter-rouge">yes?</code> and <code class="language-plaintext highlighter-rouge">no?</code>:</p>

<h3 id="ask">ask</h3>

<p>The <a href="https://www.rubydoc.info/gems/thor/Thor/Shell/Basic#ask-instance_method"><code class="language-plaintext highlighter-rouge">ask</code></a> methods allows you to get feedback from the user and use it in your
templates. Let’s say you want your user to name the new shiny library you’re
adding:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lib_name</span> <span class="o">=</span> <span class="n">ask</span><span class="p">(</span><span class="s2">"What do you want to call the shiny library?"</span><span class="p">)</span>
<span class="n">lib_name</span> <span class="o">&lt;&lt;</span> <span class="s2">".rb"</span> <span class="k">unless</span> <span class="n">lib_name</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="s2">".rb"</span><span class="p">)</span>

<span class="n">lib</span> <span class="n">lib_name</span><span class="p">,</span> <span class="o">&lt;&lt;-</span><span class="no">CODE</span><span class="sh">
  class Shiny
  end
</span><span class="no">CODE</span>
</code></pre></div></div>

<h3 id="yes-or-no">yes? or no?</h3>

<p>These methods let you ask questions from templates and decide the flow based on
the user’s answer. Let’s say you want to prompt the user to run migrations:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rails_command</span><span class="p">(</span><span class="s2">"db:migrate"</span><span class="p">)</span> <span class="k">if</span> <span class="n">yes?</span><span class="p">(</span><span class="s2">"Run database migrations?"</span><span class="p">)</span>
<span class="c1"># no? questions acts the opposite of yes?</span>
</code></pre></div></div>

<h2 id="testing-generators">Testing Generators</h2>

<p>Rails provides testing helper methods via
<a href="https://api.rubyonrails.org/classes/Rails/Generators/Testing/Behavior.html"><code class="language-plaintext highlighter-rouge">Rails::Generators::Testing::Behaviour</code></a>, such as:</p>

<ul>
  <li><a href="https://api.rubyonrails.org/classes/Rails/Generators/Testing/Behavior.html#method-i-run_generator"><code class="language-plaintext highlighter-rouge">run_generator</code></a></li>
</ul>

<p>If running tests against generators you will need to set
<code class="language-plaintext highlighter-rouge">RAILS_LOG_TO_STDOUT=true</code> in order for debugging tools to work.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">RAILS_LOG_TO_STDOUT</span><span class="o">=</span><span class="nb">true</span> ./bin/test <span class="nb">test</span>/generators/actions_test.rb
</code></pre></div></div>

<p>In addition to those, Rails also provides additional assertions via
<a href="https://api.rubyonrails.org/classes/Rails/Generators/Testing/Assertions.html"><code class="language-plaintext highlighter-rouge">Rails::Generators::Testing::Assertions</code></a>.</p>


        </div>

        <footer class="guide-footer">
            <div class="feedback">
                <h3>Geri Bildirim</h3>
                <p>Bu kılavuzun kalitesini artırmamıza yardımcı olmak için geri bildirimlerinizi bekliyoruz.</p>
                <p>Lütfen <a href="https://github.com/dilankaya127/rails-tr-TR">GitHub Issues</a> üzerinden katkıda bulunun.</p>
            </div>
        </footer>
    </article>
</div>

<script>
// İçindekiler tablosunu otomatik oluştur
document.addEventListener('DOMContentLoaded', function() {
    const toc = document.getElementById('toc');
    const headings = document.querySelectorAll('.guide-content h2, .guide-content h3, .guide-content h4');
    
    if (headings.length > 0) {
        const tocList = document.createElement('ul');
        
        headings.forEach(function(heading, index) {
            const id = 'heading-' + index;
            heading.id = id;
            
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = '#' + id;
            a.textContent = heading.textContent;
            a.className = 'toc-' + heading.tagName.toLowerCase();
            
            li.appendChild(a);
            tocList.appendChild(li);
        });
        
        toc.appendChild(tocList);
    }
});
</script>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Rails Kılavuzları Türkçe Çevirisi. Gönüllüler tarafından hazırlanmıştır.</p>
            <p>Orijinal dokümantasyon <a href="https://guides.rubyonrails.org">Ruby on Rails</a> ekibine aittir.</p>
        </div>
    </footer>

    <script>hljs.highlightAll();</script>
</body>
</html>