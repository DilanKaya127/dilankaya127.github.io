<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3 0 Release Notes - Rails Dokümantasyonu - Türkçe</title>
    <link rel="stylesheet" href="/rails-tr-TR/assets/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="logo">
                    <a href="/rails-tr-TR/">Rails Kılavuzları</a>
                </h1>
                <nav class="nav">
                    <a href="/rails-tr-TR/">Ana Sayfa</a>
                    <a href="https://dilankaya127.github.io">Portföy</a>
                    <a href="https://github.com/dilankaya127/rails-tr-TR">GitHub</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <div class="guide-container">
    <aside class="guide-sidebar">
        <div class="guide-toc">
            <h3>İçindekiler</h3>
            <div id="toc"></div>
        </div>
        
        <div class="guide-nav">
            <h3>Diğer Kılavuzlar</h3>
            <ul>
                <li><a href="/rails-tr-TR/guides/tr/getting_started">Rails ile Başlarken</a></li>
                <li><a href="/rails-tr-TR/guides/en/active_record_basics">Active Record Temelleri</a></li>
                <li><a href="/rails-tr-TR/guides//en/action_controller_overview">Action Controller</a></li>
                <li><a href="/rails-tr-TR/guides/tr/action_cable_overview">Action Cable</a></li>
            </ul>
        </div>
    </aside>

    <article class="guide-content">
        <header class="guide-header">
            <h1>3 0 Release Notes</h1>
            
        </header>

        <div class="guide-body">
            <p><strong>DO NOT READ THIS FILE ON GITHUB, GUIDES ARE PUBLISHED ON <a href="https://guides.rubyonrails.org">https://guides.rubyonrails.org</a>.</strong></p>

<h1 id="ruby-on-rails-30-release-notes">Ruby on Rails 3.0 Release Notes</h1>

<p>Rails 3.0 is ponies and rainbows! It’s going to cook you dinner and fold your laundry. You’re going to wonder how life was ever possible before it arrived. It’s the Best Version of Rails We’ve Ever Done!</p>

<p>But seriously now, it’s really good stuff. There are all the good ideas brought over from when the Merb team joined the party and brought a focus on framework agnosticism, slimmer and faster internals, and a handful of tasty APIs. If you’re coming to Rails 3.0 from Merb 1.x, you should recognize lots. If you’re coming from Rails 2.x, you’re going to love it too.</p>

<p>Even if you don’t give a hoot about any of our internal cleanups, Rails 3.0 is going to delight. We have a bunch of new features and improved APIs. It’s never been a better time to be a Rails developer. Some of the highlights are:</p>

<ul>
  <li>Brand new router with an emphasis on RESTful declarations</li>
  <li>New Action Mailer API modeled after Action Controller (now without the agonizing pain of sending multipart messages!)</li>
  <li>New Active Record chainable query language built on top of relational algebra</li>
  <li>Unobtrusive JavaScript helpers with drivers for Prototype, jQuery, and more coming (end of inline JS)</li>
  <li>Explicit dependency management with Bundler</li>
</ul>

<p>On top of all that, we’ve tried our best to deprecate the old APIs with nice warnings. That means that you can move your existing application to Rails 3 without immediately rewriting all your old code to the latest best practices.</p>

<p>These release notes cover the major upgrades, but don’t include every little bug fix and change. Rails 3.0 consists of almost 4,000 commits by more than 250 authors! If you want to see everything, check out the <a href="https://github.com/rails/rails/commits/3-0-stable">list of commits</a> in the main Rails repository on GitHub.</p>

<hr />

<p>To install Rails 3:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Use sudo if your setup requires it</span>
<span class="nv">$ </span>gem <span class="nb">install </span>rails
</code></pre></div></div>

<h2 id="upgrading-to-rails-3">Upgrading to Rails 3</h2>

<p>If you’re upgrading an existing application, it’s a great idea to have good test coverage before going in. You should also first upgrade to Rails 2.3.5 and make sure your application still runs as expected before attempting to update to Rails 3. Then take heed of the following changes:</p>

<h3 id="rails-3-requires-at-least-ruby-187">Rails 3 requires at least Ruby 1.8.7</h3>

<p>Rails 3.0 requires Ruby 1.8.7 or higher. Support for all of the previous Ruby versions has been dropped officially and you should upgrade as early as possible. Rails 3.0 is also compatible with Ruby 1.9.2.</p>

<p>TIP: Note that Ruby 1.8.7 p248 and p249 have marshalling bugs that crash Rails 3.0. Ruby Enterprise Edition have these fixed since release 1.8.7-2010.02 though. On the 1.9 front, Ruby 1.9.1 is not usable because it outright segfaults on Rails 3.0, so if you want to use Rails 3 with 1.9.x jump on 1.9.2 for smooth sailing.</p>

<h3 id="rails-application-object">Rails Application object</h3>

<p>As part of the groundwork for supporting running multiple Rails applications in the same process, Rails 3 introduces the concept of an Application object. An application object holds all the application specific configurations and is very similar in nature to <code class="language-plaintext highlighter-rouge">config/environment.rb</code> from the previous versions of Rails.</p>

<p>Each Rails application now must have a corresponding application object. The application object is defined in <code class="language-plaintext highlighter-rouge">config/application.rb</code>. If you’re upgrading an existing application to Rails 3, you must add this file and move the appropriate configurations from <code class="language-plaintext highlighter-rouge">config/environment.rb</code> to <code class="language-plaintext highlighter-rouge">config/application.rb</code>.</p>

<h3 id="script-replaced-by-scriptrails">script/* replaced by script/rails</h3>

<p>The new <code class="language-plaintext highlighter-rouge">script/rails</code> replaces all the scripts that used to be in the <code class="language-plaintext highlighter-rouge">script</code> directory. You do not run <code class="language-plaintext highlighter-rouge">script/rails</code> directly though, the <code class="language-plaintext highlighter-rouge">rails</code> command detects it is being invoked in the root of a Rails application and runs the script for you. Intended usage is:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails console                      <span class="c"># instead of script/console</span>
<span class="nv">$ </span>rails g scaffold post title:string <span class="c"># instead of script/generate scaffold post title:string</span>
</code></pre></div></div>

<p>Run <code class="language-plaintext highlighter-rouge">rails --help</code> for a list of all the options.</p>

<h3 id="dependencies-and-configgem">Dependencies and config.gem</h3>

<p>The <code class="language-plaintext highlighter-rouge">config.gem</code> method is gone and has been replaced by using <code class="language-plaintext highlighter-rouge">bundler</code> and a <code class="language-plaintext highlighter-rouge">Gemfile</code>, see <a href="#vendoring-gems">Vendoring Gems</a> below.</p>

<h3 id="upgrade-process">Upgrade Process</h3>

<p>To help with the upgrade process, a plugin named <a href="https://github.com/rails/rails_upgrade">Rails Upgrade</a> has been created to automate part of it.</p>

<p>Simply install the plugin, then run <code class="language-plaintext highlighter-rouge">rake rails:upgrade:check</code> to check your app for pieces that need to be updated (with links to information on how to update them). It also offers a task to generate a <code class="language-plaintext highlighter-rouge">Gemfile</code> based on your current <code class="language-plaintext highlighter-rouge">config.gem</code> calls and a task to generate a new routes file from your current one. To get the plugin, simply run the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ruby script/plugin <span class="nb">install </span>git://github.com/rails/rails_upgrade.git
</code></pre></div></div>

<p>You can see an example of how that works at <a href="http://omgbloglol.com/post/364624593/rails-upgrade-is-now-an-official-plugin">Rails Upgrade is now an Official Plugin</a></p>

<p>Aside from Rails Upgrade tool, if you need more help, there are people on IRC and <a href="https://discuss.rubyonrails.org/c/rubyonrails-talk">rubyonrails-talk</a> that are probably doing the same thing, possibly hitting the same issues. Be sure to blog your own experiences when upgrading so others can benefit from your knowledge!</p>

<h2 id="creating-a-rails-30-application">Creating a Rails 3.0 application</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># You should have the 'rails' RubyGem installed</span>
<span class="nv">$ </span>rails new myapp
<span class="nv">$ </span><span class="nb">cd </span>myapp
</code></pre></div></div>

<h3 id="vendoring-gems">Vendoring Gems</h3>

<p>Rails now uses a <code class="language-plaintext highlighter-rouge">Gemfile</code> in the application root to determine the gems you require for your application to start. This <code class="language-plaintext highlighter-rouge">Gemfile</code> is processed by the <a href="https://github.com/bundler/bundler">Bundler</a> which then installs all your dependencies. It can even install all the dependencies locally to your application so that it doesn’t depend on the system gems.</p>

<p>More information: - <a href="https://bundler.io/">bundler homepage</a></p>

<h3 id="living-on-the-edge">Living on the Edge</h3>

<p><code class="language-plaintext highlighter-rouge">Bundler</code> and <code class="language-plaintext highlighter-rouge">Gemfile</code> makes freezing your Rails application easy as pie with the new dedicated <code class="language-plaintext highlighter-rouge">bundle</code> command, so <code class="language-plaintext highlighter-rouge">rake freeze</code> is no longer relevant and has been dropped.</p>

<p>If you want to bundle straight from the Git repository, you can pass the <code class="language-plaintext highlighter-rouge">--edge</code> flag:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails new myapp <span class="nt">--edge</span>
</code></pre></div></div>

<p>If you have a local checkout of the Rails repository and want to generate an application using that, you can pass the <code class="language-plaintext highlighter-rouge">--dev</code> flag:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ruby /path/to/rails/bin/rails new myapp <span class="nt">--dev</span>
</code></pre></div></div>

<h2 id="rails-architectural-changes">Rails Architectural Changes</h2>

<p>There are six major changes in the architecture of Rails.</p>

<h3 id="railties-restrung">Railties Restrung</h3>

<p>Railties was updated to provide a consistent plugin API for the entire Rails framework as well as a total rewrite of generators and the Rails bindings, the result is that developers can now hook into any significant stage of the generators and application framework in a consistent, defined manner.</p>

<h3 id="all-rails-core-components-are-decoupled">All Rails core components are decoupled</h3>

<p>With the merge of Merb and Rails, one of the big jobs was to remove the tight coupling between Rails core components. This has now been achieved, and all Rails core components are now using the same API that you can use for developing plugins. This means any plugin you make, or any core component replacement (like DataMapper or Sequel) can access all the functionality that the Rails core components have access to and extend and enhance at will.</p>

<p>More information: - <a href="http://yehudakatz.com/2009/07/19/rails-3-the-great-decoupling/">The Great Decoupling</a></p>

<h3 id="active-model-abstraction">Active Model Abstraction</h3>

<p>Part of decoupling the core components was extracting all ties to Active Record from Action Pack. This has now been completed. All new ORM plugins now just need to implement Active Model interfaces to work seamlessly with Action Pack.</p>

<p>More information: - <a href="http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/">Make Any Ruby Object Feel Like ActiveRecord</a></p>

<h3 id="controller-abstraction">Controller Abstraction</h3>

<p>Another big part of decoupling the core components was creating a base superclass that is separated from the notions of HTTP in order to handle rendering of views, etc. This creation of <code class="language-plaintext highlighter-rouge">AbstractController</code> allowed <code class="language-plaintext highlighter-rouge">ActionController</code> and <code class="language-plaintext highlighter-rouge">ActionMailer</code> to be greatly simplified with common code removed from all these libraries and put into Abstract Controller.</p>

<p>More Information: - <a href="http://yehudakatz.com/2009/06/11/rails-edge-architecture/">Rails Edge Architecture</a></p>

<h3 id="arel-integration">Arel Integration</h3>

<p><a href="https://github.com/brynary/arel">Arel</a> (or Active Relation) has been taken on as the underpinnings of Active Record and is now required for Rails. Arel provides an SQL abstraction that simplifies out Active Record and provides the underpinnings for the relation functionality in Active Record.</p>

<p>More information: - <a href="https://web.archive.org/web/20120718093140/http://magicscalingsprinkles.wordpress.com/2010/01/28/why-i-wrote-arel/">Why I wrote Arel</a></p>

<h3 id="mail-extraction">Mail Extraction</h3>

<p>Action Mailer ever since its beginnings has had monkey patches, pre parsers and even delivery and receiver agents, all in addition to having TMail vendored in the source tree. Version 3 changes that with all email message related functionality abstracted out to the <a href="https://github.com/mikel/mail">Mail</a> gem. This again reduces code duplication and helps create definable boundaries between Action Mailer and the email parser.</p>

<p>More information: - <a href="http://lindsaar.net/2010/1/26/new-actionmailer-api-in-rails-3">New Action Mailer API in Rails 3</a></p>

<h2 id="documentation">Documentation</h2>

<p>The documentation in the Rails tree is being updated with all the API changes, additionally, the <a href="https://edgeguides.rubyonrails.org/">Rails Edge Guides</a> are being updated one by one to reflect the changes in Rails 3.0. The guides at <a href="https://guides.rubyonrails.org/">guides.rubyonrails.org</a> however will continue to contain only the stable version of Rails (at this point, version 2.3.5, until 3.0 is released).</p>

<p>More Information: - <a href="https://rubyonrails.org/2009/1/15/rails-documentation-projects">Rails Documentation Projects</a></p>

<h2 id="internationalization">Internationalization</h2>

<p>A large amount of work has been done with I18n support in Rails 3, including the latest <a href="https://github.com/svenfuchs/i18n">I18n</a> gem supplying many speed improvements.</p>

<ul>
  <li>I18n for any object - I18n behavior can be added to any object by including <code class="language-plaintext highlighter-rouge">ActiveModel::Translation</code> and <code class="language-plaintext highlighter-rouge">ActiveModel::Validations</code>. There is also an <code class="language-plaintext highlighter-rouge">errors.messages</code> fallback for translations.</li>
  <li>Attributes can have default translations.</li>
  <li>Form Submit Tags automatically pull the correct status (Create or Update) depending on the object status, and so pull the correct translation.</li>
  <li>Labels with I18n also now work by just passing the attribute name.</li>
</ul>

<p>More Information: - <a href="http://blog.plataformatec.com.br/2010/02/rails-3-i18n-changes/">Rails 3 I18n changes</a></p>

<h2 id="railties">Railties</h2>

<p>With the decoupling of the main Rails frameworks, Railties got a huge overhaul so as to make linking up frameworks, engines, or plugins as painless and extensible as possible:</p>

<ul>
  <li>Each application now has its own name space, application is started with <code class="language-plaintext highlighter-rouge">YourAppName.boot</code> for example, makes interacting with other applications a lot easier.</li>
  <li>Anything under <code class="language-plaintext highlighter-rouge">Rails.root/app</code> is now added to the load path, so you can make <code class="language-plaintext highlighter-rouge">app/observers/user_observer.rb</code> and Rails will load it without any modifications.</li>
  <li>
    <p>Rails 3.0 now provides a <code class="language-plaintext highlighter-rouge">Rails.config</code> object, which provides a central repository of all sorts of Rails wide configuration options.</p>

    <p>Application generation has received extra flags allowing you to skip the installation of test-unit, Active Record, Prototype and Git. Also a new <code class="language-plaintext highlighter-rouge">--dev</code> flag has been added which sets the application up with the <code class="language-plaintext highlighter-rouge">Gemfile</code> pointing to your Rails checkout (which is determined by the path to the <code class="language-plaintext highlighter-rouge">rails</code> binary). See <code class="language-plaintext highlighter-rouge">rails --help</code> for more info.</p>
  </li>
</ul>

<p>Railties generators got a huge amount of attention in Rails 3.0, basically:</p>

<ul>
  <li>Generators were completely rewritten and are backwards incompatible.</li>
  <li>Rails templates API and generators API were merged (they are the same as the former).</li>
  <li>Generators are no longer loaded from special paths anymore, they are just found in the Ruby load path, so calling <code class="language-plaintext highlighter-rouge">rails generate foo</code> will look for <code class="language-plaintext highlighter-rouge">generators/foo_generator</code>.</li>
  <li>New generators provide hooks, so any template engine, ORM, test framework can easily hook in.</li>
  <li>New generators allow you to override the templates by placing a copy at <code class="language-plaintext highlighter-rouge">Rails.root/lib/templates</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">Rails::Generators::TestCase</code> is also supplied so you can create your own generators and test them.</li>
</ul>

<p>Also, the views generated by Railties generators had some overhaul:</p>

<ul>
  <li>Views now use <code class="language-plaintext highlighter-rouge">div</code> tags instead of <code class="language-plaintext highlighter-rouge">p</code> tags.</li>
  <li>Scaffolds generated now make use of <code class="language-plaintext highlighter-rouge">_form</code> partials, instead of duplicated code in the edit and new views.</li>
  <li>Scaffold forms now use <code class="language-plaintext highlighter-rouge">f.submit</code> which returns “Create ModelName” or “Update ModelName” depending on the state of the object passed in.</li>
</ul>

<p>Finally a couple of enhancements were added to the rake tasks:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">rake db:forward</code> was added, allowing you to roll forward your migrations individually or in groups.</li>
  <li><code class="language-plaintext highlighter-rouge">rake routes CONTROLLER=x</code> was added allowing you to just view the routes for one controller.</li>
</ul>

<p>Railties now deprecates:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">RAILS_ROOT</code> in favor of <code class="language-plaintext highlighter-rouge">Rails.root</code>,</li>
  <li><code class="language-plaintext highlighter-rouge">RAILS_ENV</code> in favor of <code class="language-plaintext highlighter-rouge">Rails.env</code>, and</li>
  <li><code class="language-plaintext highlighter-rouge">RAILS_DEFAULT_LOGGER</code> in favor of <code class="language-plaintext highlighter-rouge">Rails.logger</code>.</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">PLUGIN/rails/tasks</code>, and <code class="language-plaintext highlighter-rouge">PLUGIN/tasks</code> are no longer loaded all tasks now must be in <code class="language-plaintext highlighter-rouge">PLUGIN/lib/tasks</code>.</p>

<p>More information:</p>

<ul>
  <li><a href="http://blog.plataformatec.com.br/2010/01/discovering-rails-3-generators">Discovering Rails 3 generators</a></li>
  <li><a href="http://quaran.to/blog/2010/02/03/the-rails-module/">The Rails Module (in Rails 3)</a></li>
</ul>

<h2 id="action-pack">Action Pack</h2>

<p>There have been significant internal and external changes in Action Pack.</p>

<h3 id="abstract-controller">Abstract Controller</h3>

<p>Abstract Controller pulls out the generic parts of Action Controller into a reusable module that any library can use to render templates, render partials, helpers, translations, logging, any part of the request response cycle. This abstraction allowed <code class="language-plaintext highlighter-rouge">ActionMailer::Base</code> to now just inherit from <code class="language-plaintext highlighter-rouge">AbstractController</code> and just wrap the Rails DSL onto the Mail gem.</p>

<p>It also provided an opportunity to clean up Action Controller, abstracting out what could to simplify the code.</p>

<p>Note however that Abstract Controller is not a user facing API, you will not run into it in your day to day use of Rails.</p>

<p>More Information: - <a href="http://yehudakatz.com/2009/06/11/rails-edge-architecture/">Rails Edge Architecture</a></p>

<h3 id="action-controller">Action Controller</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">application_controller.rb</code> now has <code class="language-plaintext highlighter-rouge">protect_from_forgery</code> on by default.</li>
  <li>The <code class="language-plaintext highlighter-rouge">cookie_verifier_secret</code> has been deprecated and now instead it is assigned through <code class="language-plaintext highlighter-rouge">Rails.application.config.cookie_secret</code> and moved into its own file: <code class="language-plaintext highlighter-rouge">config/initializers/cookie_verification_secret.rb</code>.</li>
  <li>The <code class="language-plaintext highlighter-rouge">session_store</code> was configured in <code class="language-plaintext highlighter-rouge">ActionController::Base.session</code>, and that is now moved to <code class="language-plaintext highlighter-rouge">Rails.application.config.session_store</code>. Defaults are set up in <code class="language-plaintext highlighter-rouge">config/initializers/session_store.rb</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">cookies.secure</code> allowing you to set encrypted values in cookies with <code class="language-plaintext highlighter-rouge">cookie.secure[:key] =&gt; value</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">cookies.permanent</code> allowing you to set permanent values in the cookie hash <code class="language-plaintext highlighter-rouge">cookie.permanent[:key] =&gt; value</code> that raise exceptions on signed values if verification failures.</li>
  <li>You can now pass <code class="language-plaintext highlighter-rouge">:notice =&gt; 'This is a flash message'</code> or <code class="language-plaintext highlighter-rouge">:alert =&gt; 'Something went wrong'</code> to the <code class="language-plaintext highlighter-rouge">format</code> call inside a <code class="language-plaintext highlighter-rouge">respond_to</code> block. The <code class="language-plaintext highlighter-rouge">flash[]</code> hash still works as previously.</li>
  <li><code class="language-plaintext highlighter-rouge">respond_with</code> method has now been added to your controllers simplifying the venerable <code class="language-plaintext highlighter-rouge">format</code> blocks.</li>
  <li><code class="language-plaintext highlighter-rouge">ActionController::Responder</code> added allowing you flexibility in how your responses get generated.</li>
</ul>

<p>Deprecations:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">filter_parameter_logging</code> is deprecated in favor of <code class="language-plaintext highlighter-rouge">config.filter_parameters &lt;&lt; :password</code>.</li>
</ul>

<p>More Information:</p>

<ul>
  <li><a href="https://blog.engineyard.com/2010/render-options-in-rails-3">Render Options in Rails 3</a></li>
  <li><a href="https://rubyonrails.org/2009/8/31/three-reasons-love-responder">Three reasons to love ActionController::Responder</a></li>
</ul>

<h3 id="action-dispatch">Action Dispatch</h3>

<p>Action Dispatch is new in Rails 3.0 and provides a new, cleaner implementation for routing.</p>

<ul>
  <li>Big clean up and re-write of the router, the Rails router is now <code class="language-plaintext highlighter-rouge">rack_mount</code> with a Rails DSL on top, it is a stand alone piece of software.</li>
  <li>
    <p>Routes defined by each application are now name spaced within your Application module, that is:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1"># Instead of:</span>

  <span class="no">ActionController</span><span class="o">::</span><span class="no">Routing</span><span class="o">::</span><span class="no">Routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span> <span class="o">|</span><span class="n">map</span><span class="o">|</span>
    <span class="n">map</span><span class="p">.</span><span class="nf">resources</span> <span class="ss">:posts</span>
  <span class="k">end</span>

  <span class="c1"># You do:</span>

  <span class="no">AppName</span><span class="o">::</span><span class="no">Application</span><span class="p">.</span><span class="nf">routes</span> <span class="k">do</span>
    <span class="n">resources</span> <span class="ss">:posts</span>
  <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>Added <code class="language-plaintext highlighter-rouge">match</code> method to the router, you can also pass any Rack application to the matched route.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">constraints</code> method to the router, allowing you to guard routers with defined constraints.</li>
  <li>
    <p>Added <code class="language-plaintext highlighter-rouge">scope</code> method to the router, allowing you to namespace routes for different languages or different actions, for example:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">scope</span> <span class="s1">'es'</span> <span class="k">do</span>
    <span class="n">resources</span> <span class="ss">:projects</span><span class="p">,</span> <span class="ss">:path_names</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:edit</span> <span class="o">=&gt;</span> <span class="s1">'cambiar'</span> <span class="p">},</span> <span class="ss">:path</span> <span class="o">=&gt;</span> <span class="s1">'proyecto'</span>
  <span class="k">end</span>

  <span class="c1"># Gives you the edit action with /es/proyecto/1/cambiar</span>
</code></pre></div>    </div>
  </li>
  <li>Added <code class="language-plaintext highlighter-rouge">root</code> method to the router as a short cut for <code class="language-plaintext highlighter-rouge">match '/', :to =&gt; path</code>.</li>
  <li>You can pass optional segments into the match, for example <code class="language-plaintext highlighter-rouge">match "/:controller(/:action(/:id))(.:format)"</code>, each parenthesized segment is optional.</li>
  <li>Routes can be expressed via blocks, for example you can call <code class="language-plaintext highlighter-rouge">controller :home { match '/:action' }</code>.</li>
</ul>

<p>NOTE. The old style <code class="language-plaintext highlighter-rouge">map</code> commands still work as before with a backwards compatibility layer, however this will be removed in the 3.1 release.</p>

<p>Deprecations</p>

<ul>
  <li>The catch all route for non-REST applications (<code class="language-plaintext highlighter-rouge">/:controller/:action/:id</code>) is now commented out.</li>
  <li>Routes <code class="language-plaintext highlighter-rouge">:path_prefix</code> no longer exists and <code class="language-plaintext highlighter-rouge">:name_prefix</code> now automatically adds “_” at the end of the given value.</li>
</ul>

<p>More Information:</p>
<ul>
  <li><a href="http://yehudakatz.com/2009/12/26/the-rails-3-router-rack-it-up/">The Rails 3 Router: Rack it Up</a></li>
  <li><a href="https://medium.com/fusion-of-thoughts/revamped-routes-in-rails-3-b6d00654e5b0">Revamped Routes in Rails 3</a></li>
  <li><a href="http://yehudakatz.com/2009/12/20/generic-actions-in-rails-3/">Generic Actions in Rails 3</a></li>
</ul>

<h3 id="action-view">Action View</h3>

<h4 id="unobtrusive-javascript">Unobtrusive JavaScript</h4>

<p>Major re-write was done in the Action View helpers, implementing Unobtrusive JavaScript (UJS) hooks and removing the old inline AJAX commands. This enables Rails to use any compliant UJS driver to implement the UJS hooks in the helpers.</p>

<p>What this means is that all previous <code class="language-plaintext highlighter-rouge">remote_&lt;method&gt;</code> helpers have been removed from Rails core and put into the <a href="https://github.com/rails/prototype_legacy_helper">Prototype Legacy Helper</a>. To get UJS hooks into your HTML, you now pass <code class="language-plaintext highlighter-rouge">:remote =&gt; true</code> instead. For example:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">form_for</span> <span class="vi">@post</span><span class="p">,</span> <span class="ss">:remote</span> <span class="o">=&gt;</span> <span class="kp">true</span>
</code></pre></div></div>

<p>Produces:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"http://host.com"</span> <span class="na">id=</span><span class="s">"create-post"</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">data-remote=</span><span class="s">"true"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<h4 id="helpers-with-blocks">Helpers with Blocks</h4>

<p>Helpers like <code class="language-plaintext highlighter-rouge">form_for</code> or <code class="language-plaintext highlighter-rouge">div_for</code> that insert content from a block use <code class="language-plaintext highlighter-rouge">&lt;%=</code> now:</p>

<pre><code class="language-html+erb">&lt;%= form_for @post do |f| %&gt;
  ...
&lt;% end %&gt;
</code></pre>

<p>Your own helpers of that kind are expected to return a string, rather than appending to the output buffer by hand.</p>

<p>Helpers that do something else, like <code class="language-plaintext highlighter-rouge">cache</code> or <code class="language-plaintext highlighter-rouge">content_for</code>, are not affected by this change, they need <code class="language-plaintext highlighter-rouge">&amp;lt;%</code> as before.</p>

<h4 id="other-changes">Other Changes</h4>

<ul>
  <li>You no longer need to call <code class="language-plaintext highlighter-rouge">h(string)</code> to escape HTML output, it is on by default in all view templates. If you want the unescaped string, call <code class="language-plaintext highlighter-rouge">raw(string)</code>.</li>
  <li>Helpers now output HTML5 by default.</li>
  <li>Form label helper now pulls values from I18n with a single value, so <code class="language-plaintext highlighter-rouge">f.label :name</code> will pull the <code class="language-plaintext highlighter-rouge">:name</code> translation.</li>
  <li>I18n select label on should now be :en.helpers.select instead of :en.support.select.</li>
  <li>You no longer need to place a minus sign at the end of a Ruby interpolation inside an ERB template to remove the trailing carriage return in the HTML output.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">grouped_collection_select</code> helper to Action View.</li>
  <li><code class="language-plaintext highlighter-rouge">content_for?</code> has been added allowing you to check for the existence of content in a view before rendering.</li>
  <li>passing <code class="language-plaintext highlighter-rouge">:value =&gt; nil</code> to form helpers will set the field’s <code class="language-plaintext highlighter-rouge">value</code> attribute to nil as opposed to using the default value</li>
  <li>passing <code class="language-plaintext highlighter-rouge">:id =&gt; nil</code> to form helpers will cause those fields to be rendered with no <code class="language-plaintext highlighter-rouge">id</code> attribute</li>
  <li>passing <code class="language-plaintext highlighter-rouge">:alt =&gt; nil</code> to <code class="language-plaintext highlighter-rouge">image_tag</code> will cause the <code class="language-plaintext highlighter-rouge">img</code> tag to render with no <code class="language-plaintext highlighter-rouge">alt</code> attribute</li>
</ul>

<h2 id="active-model">Active Model</h2>

<p>Active Model is new in Rails 3.0. It provides an abstraction layer for any ORM libraries to use to interact with Rails by implementing an Active Model interface.</p>

<h3 id="orm-abstraction-and-action-pack-interface">ORM Abstraction and Action Pack Interface</h3>

<p>Part of decoupling the core components was extracting all ties to Active Record from Action Pack. This has now been completed. All new ORM plugins now just need to implement Active Model interfaces to work seamlessly with Action Pack.</p>

<p>More Information: - <a href="http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/">Make Any Ruby Object Feel Like ActiveRecord</a></p>

<h3 id="validations">Validations</h3>

<p>Validations have been moved from Active Record into Active Model, providing an interface to validations that works across ORM libraries in Rails 3.</p>

<ul>
  <li>There is now a <code class="language-plaintext highlighter-rouge">validates :attribute, options_hash</code> shortcut method that allows you to pass options for all the validates class methods, you can pass more than one option to a validate method.</li>
  <li>The <code class="language-plaintext highlighter-rouge">validates</code> method has the following options:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">:acceptance =&gt; Boolean</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">:confirmation =&gt; Boolean</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">:exclusion =&gt; { :in =&gt; Enumerable }</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">:inclusion =&gt; { :in =&gt; Enumerable }</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">:format =&gt; { :with =&gt; Regexp, :on =&gt; :create }</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">:length =&gt; { :maximum =&gt; Fixnum }</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">:numericality =&gt; Boolean</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">:presence =&gt; Boolean</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">:uniqueness =&gt; Boolean</code>.</li>
    </ul>
  </li>
</ul>

<p>NOTE: All the Rails version 2.3 style validation methods are still supported in Rails 3.0, the new validates method is designed as an additional aid in your model validations, not a replacement for the existing API.</p>

<p>You can also pass in a validator object, which you can then reuse between objects that use Active Model:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">TitleValidator</span> <span class="o">&lt;</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">EachValidator</span>
  <span class="no">Titles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Mr.'</span><span class="p">,</span> <span class="s1">'Mrs.'</span><span class="p">,</span> <span class="s1">'Dr.'</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">validate_each</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">unless</span> <span class="no">Titles</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
      <span class="n">record</span><span class="p">.</span><span class="nf">errors</span><span class="p">[</span><span class="n">attribute</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s1">'must be a valid title'</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Person</span>
  <span class="kp">include</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Validations</span>
  <span class="nb">attr_accessor</span> <span class="ss">:title</span>
  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:presence</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="k">end</span>

<span class="c1"># Or for Active Record</span>

<span class="k">class</span> <span class="nc">Person</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:presence</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span> <span class="ss">:title</span> <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="k">end</span>
</code></pre></div></div>

<p>There’s also support for introspection:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">User</span><span class="p">.</span><span class="nf">validators</span>
<span class="no">User</span><span class="p">.</span><span class="nf">validators_on</span><span class="p">(</span><span class="ss">:login</span><span class="p">)</span>
</code></pre></div></div>

<p>More Information:</p>

<ul>
  <li><a href="http://thelucid.com/2010/01/08/sexy-validation-in-edge-rails-rails-3/">Sexy Validation in Rails 3</a></li>
  <li><a href="http://lindsaar.net/2010/1/31/validates_rails_3_awesome_is_true">Rails 3 Validations Explained</a></li>
</ul>

<h2 id="active-record">Active Record</h2>

<p>Active Record received a lot of attention in Rails 3.0, including abstraction into Active Model, a full update to the Query interface using Arel, validation updates, and many enhancements and fixes. All of the Rails 2.x API will be usable through a compatibility layer that will be supported until version 3.1.</p>

<h3 id="query-interface">Query Interface</h3>

<p>Active Record, through the use of Arel, now returns relations on its core methods. The existing API in Rails 2.3.x is still supported and will not be deprecated until Rails 3.1 and not removed until Rails 3.2, however, the new API provides the following new methods that all return relations allowing them to be chained together:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">where</code> - provides conditions on the relation, what gets returned.</li>
  <li><code class="language-plaintext highlighter-rouge">select</code> - choose what attributes of the models you wish to have returned from the database.</li>
  <li><code class="language-plaintext highlighter-rouge">group</code> - groups the relation on the attribute supplied.</li>
  <li><code class="language-plaintext highlighter-rouge">having</code> - provides an expression limiting group relations (GROUP BY constraint).</li>
  <li><code class="language-plaintext highlighter-rouge">joins</code> - joins the relation to another table.</li>
  <li><code class="language-plaintext highlighter-rouge">clause</code> - provides an expression limiting join relations (JOIN constraint).</li>
  <li><code class="language-plaintext highlighter-rouge">includes</code> - includes other relations pre-loaded.</li>
  <li><code class="language-plaintext highlighter-rouge">order</code> - orders the relation based on the expression supplied.</li>
  <li><code class="language-plaintext highlighter-rouge">limit</code> - limits the relation to the number of records specified.</li>
  <li><code class="language-plaintext highlighter-rouge">lock</code> - locks the records returned from the table.</li>
  <li><code class="language-plaintext highlighter-rouge">readonly</code> - returns an read only copy of the data.</li>
  <li><code class="language-plaintext highlighter-rouge">from</code> - provides a way to select relationships from more than one table.</li>
  <li><code class="language-plaintext highlighter-rouge">scope</code> - (previously <code class="language-plaintext highlighter-rouge">named_scope</code>) return relations and can be chained together with the other relation methods.</li>
  <li><code class="language-plaintext highlighter-rouge">with_scope</code> - and <code class="language-plaintext highlighter-rouge">with_exclusive_scope</code> now also return relations and so can be chained.</li>
  <li><code class="language-plaintext highlighter-rouge">default_scope</code> - also works with relations.</li>
</ul>

<p>More Information:</p>

<ul>
  <li><a href="http://m.onkey.org/2010/1/22/active-record-query-interface">Active Record Query Interface</a></li>
  <li><a href="http://hasmanyquestions.wordpress.com/2010/01/17/let-your-sql-growl-in-rails-3/">Let your SQL Growl in Rails 3</a></li>
</ul>

<h3 id="enhancements">Enhancements</h3>

<ul>
  <li>Added <code class="language-plaintext highlighter-rouge">:destroyed?</code> to Active Record objects.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">:inverse_of</code> to Active Record associations allowing you to pull the instance of an already loaded association without hitting the database.</li>
</ul>

<h3 id="patches-and-deprecations">Patches and Deprecations</h3>

<p>Additionally, many fixes in the Active Record branch:</p>

<ul>
  <li>SQLite 2 support has been dropped in favor of SQLite 3.</li>
  <li>MySQL support for column order.</li>
  <li>PostgreSQL adapter has had its <code class="language-plaintext highlighter-rouge">TIME ZONE</code> support fixed so it no longer inserts incorrect values.</li>
  <li>Support multiple schemas in table names for PostgreSQL.</li>
  <li>PostgreSQL support for the XML data type column.</li>
  <li><code class="language-plaintext highlighter-rouge">table_name</code> is now cached.</li>
  <li>A large amount of work done on the Oracle adapter as well with many bug fixes.</li>
</ul>

<p>As well as the following deprecations:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">named_scope</code> in an Active Record class is deprecated and has been renamed to just <code class="language-plaintext highlighter-rouge">scope</code>.</li>
  <li>In <code class="language-plaintext highlighter-rouge">scope</code> methods, you should move to using the relation methods, instead of a <code class="language-plaintext highlighter-rouge">:conditions =&gt; {}</code> finder method, for example <code class="language-plaintext highlighter-rouge">scope :since, lambda {|time| where("created_at &gt; ?", time) }</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">save(false)</code> is deprecated, in favor of <code class="language-plaintext highlighter-rouge">save(:validate =&gt; false)</code>.</li>
  <li>I18n error messages for Active Record should be changed from :en.activerecord.errors.template to <code class="language-plaintext highlighter-rouge">:en.errors.template</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">model.errors.on</code> is deprecated in favor of <code class="language-plaintext highlighter-rouge">model.errors[]</code></li>
  <li>validates_presence_of =&gt; validates… :presence =&gt; true</li>
  <li><code class="language-plaintext highlighter-rouge">ActiveRecord::Base.colorize_logging</code> and <code class="language-plaintext highlighter-rouge">config.active_record.colorize_logging</code> are deprecated in favor of <code class="language-plaintext highlighter-rouge">Rails::LogSubscriber.colorize_logging</code> or <code class="language-plaintext highlighter-rouge">config.colorize_logging</code></li>
</ul>

<p>NOTE: While an implementation of State Machine has been in Active Record edge for some months now, it has been removed from the Rails 3.0 release.</p>

<h2 id="active-resource">Active Resource</h2>

<p>Active Resource was also extracted out to Active Model allowing you to use Active Resource objects with Action Pack seamlessly.</p>

<ul>
  <li>Added validations through Active Model.</li>
  <li>Added observing hooks.</li>
  <li>HTTP proxy support.</li>
  <li>Added support for digest authentication.</li>
  <li>Moved model naming into Active Model.</li>
  <li>Changed Active Resource attributes to a Hash with indifferent access.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">first</code>, <code class="language-plaintext highlighter-rouge">last</code> and <code class="language-plaintext highlighter-rouge">all</code> aliases for equivalent find scopes.</li>
  <li><code class="language-plaintext highlighter-rouge">find_every</code> now does not return a <code class="language-plaintext highlighter-rouge">ResourceNotFound</code> error if nothing returned.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">save!</code> which raises <code class="language-plaintext highlighter-rouge">ResourceInvalid</code> unless the object is <code class="language-plaintext highlighter-rouge">valid?</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">update_attribute</code> and <code class="language-plaintext highlighter-rouge">update_attributes</code> added to Active Resource models.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">exists?</code>.</li>
  <li>Renamed <code class="language-plaintext highlighter-rouge">SchemaDefinition</code> to <code class="language-plaintext highlighter-rouge">Schema</code> and <code class="language-plaintext highlighter-rouge">define_schema</code> to <code class="language-plaintext highlighter-rouge">schema</code>.</li>
  <li>Use the <code class="language-plaintext highlighter-rouge">format</code> of Active Resources rather than the <code class="language-plaintext highlighter-rouge">content-type</code> of remote errors to load errors.</li>
  <li>Use <code class="language-plaintext highlighter-rouge">instance_eval</code> for schema block.</li>
  <li>Fix <code class="language-plaintext highlighter-rouge">ActiveResource::ConnectionError#to_s</code> when <code class="language-plaintext highlighter-rouge">@response</code> does not respond to #code or #message, handles Ruby 1.9 compatibility.</li>
  <li>Add support for errors in JSON format.</li>
  <li>Ensure <code class="language-plaintext highlighter-rouge">load</code> works with numeric arrays.</li>
  <li>Recognizes a 410 response from remote resource as the resource has been deleted.</li>
  <li>Add ability to set SSL options on Active Resource connections.</li>
  <li>Setting connection timeout also affects <code class="language-plaintext highlighter-rouge">Net::HTTP</code> <code class="language-plaintext highlighter-rouge">open_timeout</code>.</li>
</ul>

<p>Deprecations:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">save(false)</code> is deprecated, in favor of <code class="language-plaintext highlighter-rouge">save(:validate =&gt; false)</code>.</li>
  <li>Ruby 1.9.2: <code class="language-plaintext highlighter-rouge">URI.parse</code> and <code class="language-plaintext highlighter-rouge">.decode</code> are deprecated and are no longer used in the library.</li>
</ul>

<h2 id="active-support">Active Support</h2>

<p>A large effort was made in Active Support to make it cherry pickable, that is, you no longer have to require the entire Active Support library to get pieces of it. This allows the various core components of Rails to run slimmer.</p>

<p>These are the main changes in Active Support:</p>

<ul>
  <li>Large clean up of the library removing unused methods throughout.</li>
  <li>Active Support no longer provides vendored versions of TZInfo, Memcache Client and Builder. These are all included as dependencies and installed via the <code class="language-plaintext highlighter-rouge">bundle install</code> command.</li>
  <li>Safe buffers are implemented in <code class="language-plaintext highlighter-rouge">ActiveSupport::SafeBuffer</code>.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">Array.uniq_by</code> and <code class="language-plaintext highlighter-rouge">Array.uniq_by!</code>.</li>
  <li>Removed <code class="language-plaintext highlighter-rouge">Array#rand</code> and backported <code class="language-plaintext highlighter-rouge">Array#sample</code> from Ruby 1.9.</li>
  <li>Fixed bug on <code class="language-plaintext highlighter-rouge">TimeZone.seconds_to_utc_offset</code> returning wrong value.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">ActiveSupport::Notifications</code> middleware.</li>
  <li><code class="language-plaintext highlighter-rouge">ActiveSupport.use_standard_json_time_format</code> now defaults to true.</li>
  <li><code class="language-plaintext highlighter-rouge">ActiveSupport.escape_html_entities_in_json</code> now defaults to false.</li>
  <li><code class="language-plaintext highlighter-rouge">Integer#multiple_of?</code> accepts zero as an argument, returns false unless the receiver is zero.</li>
  <li><code class="language-plaintext highlighter-rouge">string.chars</code> has been renamed to <code class="language-plaintext highlighter-rouge">string.mb_chars</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">ActiveSupport::OrderedHash</code> now can de-serialize through YAML.</li>
  <li>Added SAX-based parser for XmlMini, using LibXML and Nokogiri.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">Object#presence</code> that returns the object if it’s <code class="language-plaintext highlighter-rouge">#present?</code> otherwise returns <code class="language-plaintext highlighter-rouge">nil</code>.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">String#exclude?</code> core extension that returns the inverse of <code class="language-plaintext highlighter-rouge">#include?</code>.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">to_i</code> to <code class="language-plaintext highlighter-rouge">DateTime</code> in <code class="language-plaintext highlighter-rouge">ActiveSupport</code> so <code class="language-plaintext highlighter-rouge">to_yaml</code> works correctly on models with <code class="language-plaintext highlighter-rouge">DateTime</code> attributes.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">Enumerable#exclude?</code> to bring parity to <code class="language-plaintext highlighter-rouge">Enumerable#include?</code> and avoid if <code class="language-plaintext highlighter-rouge">!x.include?</code>.</li>
  <li>Switch to on-by-default XSS escaping for rails.</li>
  <li>Support deep-merging in <code class="language-plaintext highlighter-rouge">ActiveSupport::HashWithIndifferentAccess</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">Enumerable#sum</code> now works will all enumerables, even if they don’t respond to <code class="language-plaintext highlighter-rouge">:size</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">inspect</code> on a zero length duration returns ‘0 seconds’ instead of empty string.</li>
  <li>Add <code class="language-plaintext highlighter-rouge">element</code> and <code class="language-plaintext highlighter-rouge">collection</code> to <code class="language-plaintext highlighter-rouge">ModelName</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">String#to_time</code> and <code class="language-plaintext highlighter-rouge">String#to_datetime</code> handle fractional seconds.</li>
  <li>Added support to new callbacks for around filter object that respond to <code class="language-plaintext highlighter-rouge">:before</code> and <code class="language-plaintext highlighter-rouge">:after</code> used in before and after callbacks.</li>
  <li>The <code class="language-plaintext highlighter-rouge">ActiveSupport::OrderedHash#to_a</code> method returns an ordered set of arrays. Matches Ruby 1.9’s <code class="language-plaintext highlighter-rouge">Hash#to_a</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">MissingSourceFile</code> exists as a constant but it is now just equal to <code class="language-plaintext highlighter-rouge">LoadError</code>.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">Class#class_attribute</code>, to be able to declare a class-level attribute whose value is inheritable and overwritable by subclasses.</li>
  <li>Finally removed <code class="language-plaintext highlighter-rouge">DeprecatedCallbacks</code> in <code class="language-plaintext highlighter-rouge">ActiveRecord::Associations</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">Object#metaclass</code> is now <code class="language-plaintext highlighter-rouge">Kernel#singleton_class</code> to match Ruby.</li>
</ul>

<p>The following methods have been removed because they are now available in Ruby 1.8.7 and 1.9.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Integer#even?</code> and <code class="language-plaintext highlighter-rouge">Integer#odd?</code></li>
  <li><code class="language-plaintext highlighter-rouge">String#each_char</code></li>
  <li><code class="language-plaintext highlighter-rouge">String#start_with?</code> and <code class="language-plaintext highlighter-rouge">String#end_with?</code> (3rd person aliases still kept)</li>
  <li><code class="language-plaintext highlighter-rouge">String#bytesize</code></li>
  <li><code class="language-plaintext highlighter-rouge">Object#tap</code></li>
  <li><code class="language-plaintext highlighter-rouge">Symbol#to_proc</code></li>
  <li><code class="language-plaintext highlighter-rouge">Object#instance_variable_defined?</code></li>
  <li><code class="language-plaintext highlighter-rouge">Enumerable#none?</code></li>
</ul>

<p>The security patch for REXML remains in Active Support because early patch-levels of Ruby 1.8.7 still need it. Active Support knows whether it has to apply it or not.</p>

<p>The following methods have been removed because they are no longer used in the framework:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Kernel#daemonize</code></li>
  <li><code class="language-plaintext highlighter-rouge">Object#remove_subclasses_of</code> <code class="language-plaintext highlighter-rouge">Object#extend_with_included_modules_from</code>, <code class="language-plaintext highlighter-rouge">Object#extended_by</code></li>
  <li><code class="language-plaintext highlighter-rouge">Class#remove_class</code></li>
  <li><code class="language-plaintext highlighter-rouge">Regexp#number_of_captures</code>, <code class="language-plaintext highlighter-rouge">Regexp.unoptionalize</code>, <code class="language-plaintext highlighter-rouge">Regexp.optionalize</code>, <code class="language-plaintext highlighter-rouge">Regexp#number_of_captures</code></li>
</ul>

<h2 id="action-mailer">Action Mailer</h2>

<p>Action Mailer has been given a new API with TMail being replaced out with the new <a href="https://github.com/mikel/mail">Mail</a> as the email library. Action Mailer itself has been given an almost complete re-write with pretty much every line of code touched. The result is that Action Mailer now simply inherits from Abstract Controller and wraps the Mail gem in a Rails DSL. This reduces the amount of code and duplication of other libraries in Action Mailer considerably.</p>

<ul>
  <li>All mailers are now in <code class="language-plaintext highlighter-rouge">app/mailers</code> by default.</li>
  <li>Can now send email using new API with three methods: <code class="language-plaintext highlighter-rouge">attachments</code>, <code class="language-plaintext highlighter-rouge">headers</code> and <code class="language-plaintext highlighter-rouge">mail</code>.</li>
  <li>Action Mailer now has native support for inline attachments using the <code class="language-plaintext highlighter-rouge">attachments.inline</code> method.</li>
  <li>Action Mailer emailing methods now return <code class="language-plaintext highlighter-rouge">Mail::Message</code> objects, which can then be sent the <code class="language-plaintext highlighter-rouge">deliver</code> message to send itself.</li>
  <li>All delivery methods are now abstracted out to the Mail gem.</li>
  <li>The mail delivery method can accept a hash of all valid mail header fields with their value pair.</li>
  <li>The <code class="language-plaintext highlighter-rouge">mail</code> delivery method acts in a similar way to Action Controller’s <code class="language-plaintext highlighter-rouge">respond_to</code>, and you can explicitly or implicitly render templates. Action Mailer will turn the email into a multipart email as needed.</li>
  <li>You can pass a proc to the <code class="language-plaintext highlighter-rouge">format.mime_type</code> calls within the mail block and explicitly render specific types of text, or add layouts or different templates. The <code class="language-plaintext highlighter-rouge">render</code> call inside the proc is from Abstract Controller and supports the same options.</li>
  <li>What were mailer unit tests have been moved to functional tests.</li>
  <li>Action Mailer now delegates all auto encoding of header fields and bodies to Mail Gem</li>
  <li>Action Mailer will auto encode email bodies and headers for you</li>
</ul>

<p>Deprecations:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">:charset</code>, <code class="language-plaintext highlighter-rouge">:content_type</code>, <code class="language-plaintext highlighter-rouge">:mime_version</code>, <code class="language-plaintext highlighter-rouge">:implicit_parts_order</code> are all deprecated in favor of <code class="language-plaintext highlighter-rouge">ActionMailer.default :key =&gt; value</code> style declarations.</li>
  <li>Mailer dynamic <code class="language-plaintext highlighter-rouge">create_method_name</code> and <code class="language-plaintext highlighter-rouge">deliver_method_name</code> are deprecated, just call <code class="language-plaintext highlighter-rouge">method_name</code> which now returns a <code class="language-plaintext highlighter-rouge">Mail::Message</code> object.</li>
  <li><code class="language-plaintext highlighter-rouge">ActionMailer.deliver(message)</code> is deprecated, just call <code class="language-plaintext highlighter-rouge">message.deliver</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">template_root</code> is deprecated, pass options to a render call inside a proc from the <code class="language-plaintext highlighter-rouge">format.mime_type</code> method inside the <code class="language-plaintext highlighter-rouge">mail</code> generation block</li>
  <li>The <code class="language-plaintext highlighter-rouge">body</code> method to define instance variables is deprecated (<code class="language-plaintext highlighter-rouge">body {:ivar =&gt; value}</code>), just declare instance variables in the method directly and they will be available in the view.</li>
  <li>Mailers being in <code class="language-plaintext highlighter-rouge">app/models</code> is deprecated, use <code class="language-plaintext highlighter-rouge">app/mailers</code> instead.</li>
</ul>

<p>More Information:</p>

<ul>
  <li><a href="http://lindsaar.net/2010/1/26/new-actionmailer-api-in-rails-3">New Action Mailer API in Rails 3</a></li>
  <li><a href="http://lindsaar.net/2010/1/23/mail-gem-version-2-released">New Mail Gem for Ruby</a></li>
</ul>

<h2 id="credits">Credits</h2>

<p>See the <a href="https://contributors.rubyonrails.org/">full list of contributors to Rails</a> for the many people who spent many hours making Rails 3. Kudos to all of them.</p>

<p>Rails 3.0 Release Notes were compiled by <a href="http://lindsaar.net">Mikel Lindsaar</a>.</p>

        </div>

        <footer class="guide-footer">
            <div class="feedback">
                <h3>Geri Bildirim</h3>
                <p>Bu kılavuzun kalitesini artırmamıza yardımcı olmak için geri bildirimlerinizi bekliyoruz.</p>
                <p>Lütfen <a href="https://github.com/dilankaya127/rails-tr-TR">GitHub Issues</a> üzerinden katkıda bulunun.</p>
            </div>
        </footer>
    </article>
</div>

<script>
// İçindekiler tablosunu otomatik oluştur
document.addEventListener('DOMContentLoaded', function() {
    const toc = document.getElementById('toc');
    const headings = document.querySelectorAll('.guide-content h2, .guide-content h3, .guide-content h4');
    
    if (headings.length > 0) {
        const tocList = document.createElement('ul');
        
        headings.forEach(function(heading, index) {
            const id = 'heading-' + index;
            heading.id = id;
            
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = '#' + id;
            a.textContent = heading.textContent;
            a.className = 'toc-' + heading.tagName.toLowerCase();
            
            li.appendChild(a);
            tocList.appendChild(li);
        });
        
        toc.appendChild(tocList);
    }
});
</script>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Rails Kılavuzları Türkçe Çevirisi. Gönüllüler tarafından hazırlanmıştır.</p>
            <p>Orijinal dokümantasyon <a href="https://guides.rubyonrails.org">Ruby on Rails</a> ekibine aittir.</p>
        </div>
    </footer>

    <script>hljs.highlightAll();</script>
</body>
</html>